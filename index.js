"undefined"==typeof window||"process"in window||(window.process={env:{},argv:[],stderr:{}}),function(){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e,t){return e(t={exports:{}},t.exports),t.exports}var i=t((function(t){var i,r,n;(e||self||window).Two=function(i){var r;r="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:this;var n=Object.prototype.toString,s={_indexAmount:0,natural:{slice:Array.prototype.slice,indexOf:Array.prototype.indexOf,keys:Object.keys,bind:Function.prototype.bind,create:Object.create},identity:function(e){return e},isArguments:function(e){return"[object Arguments]"===n.call(e)},isFunction:function(e){return"[object Function]"===n.call(e)},isString:function(e){return"[object String]"===n.call(e)},isNumber:function(e){return"[object Number]"===n.call(e)},isDate:function(e){return"[object Date]"===n.call(e)},isRegExp:function(e){return"[object RegExp]"===n.call(e)},isError:function(e){return"[object Error]"===n.call(e)},isFinite:function(e){return isFinite(e)&&!isNaN(parseFloat(e))},isNaN:function(e){return s.isNumber(e)&&e!==+e},isBoolean:function(e){return!0===e||!1===e||"[object Boolean]"===n.call(e)},isNull:function(e){return null===e},isUndefined:function(e){return void 0===e},isEmpty:function(e){return null==e||(y&&(s.isArray(e)||s.isString(e)||s.isArguments(e))?0===e.length:0===s.keys(e).length)},isElement:function(e){return!(!e||1!==e.nodeType)},isArray:Array.isArray||function(e){return"[object Array]"===n.call(e)},isObject:function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},toArray:function(e){return e?s.isArray(e)?p.call(e):y(e)?s.map(e,s.identity):s.values(e):[]},range:function(e,t,i){null==t&&(t=e||0,e=0),i=i||1;for(var r=Math.max(Math.ceil((t-e)/i),0),n=Array(r),s=0;s<r;s++,e+=i)n[s]=e;return n},indexOf:function(e,t){if(s.natural.indexOf)return s.natural.indexOf.call(e,t);for(var i=0;i<e.length;i++)if(e[i]===t)return i;return-1},has:function(e,t){return null!=e&&hasOwnProperty.call(e,t)},bind:function(e,t){var i=s.natural.bind;if(i&&e.bind===i)return i.apply(e,p.call(arguments,1));var r=p.call(arguments,2);return function(){e.apply(t,r)}},extend:function(e){for(var t=p.call(arguments,1),i=0;i<t.length;i++){var r=t[i];for(var n in r)e[n]=r[n]}return e},defaults:function(e){for(var t=p.call(arguments,1),i=0;i<t.length;i++){var r=t[i];for(var n in r)void 0===e[n]&&(e[n]=r[n])}return e},keys:function(e){if(!s.isObject(e))return[];if(s.natural.keys)return s.natural.keys(e);var t=[];for(var i in e)s.has(e,i)&&t.push(i);return t},values:function(e){for(var t=s.keys(e),i=[],r=0;r<t.length;r++){var n=t[r];i.push(e[n])}return i},each:function(e,t,i){for(var r=i||this,n=!y(e)&&s.keys(e),a=(n||e).length,o=0;o<a;o++){var l=n?n[o]:o;t.call(r,e[l],l,e)}return e},map:function(e,t,i){for(var r=i||this,n=!y(e)&&s.keys(e),a=(n||e).length,o=[],l=0;l<a;l++){var h=n?n[l]:l;o[l]=t.call(r,e[h],h,e)}return o},once:function(e){var t=!1;return function(){return t?e:(t=!0,e.apply(this,arguments))}},after:function(e,t){return function(){for(;--e<1;)return t.apply(this,arguments)}},uniqueId:function(e){var t=++s._indexAmount+"";return e?e+t:t}},a=Math.sin,o=Math.cos,l=Math.sqrt,h=Math.abs,c=Math.PI,d=c/2,u=Math.pow,f=Math.min,_=Math.max,g=0,p=s.natural.slice,m=r.performance&&r.performance.now?r.performance:Date,v=Math.pow(2,53)-1,y=function(e){var t,i=null==(t=e)?void 0:t.length;return"number"==typeof i&&i>=0&&i<=v},b={temp:r.document?r.document.createElement("div"):{},hasEventListeners:s.isFunction(r.addEventListener),bind:function(e,t,i,r){return this.hasEventListeners?e.addEventListener(t,i,!!r):e.attachEvent("on"+t,i),b},unbind:function(e,t,i,r){return b.hasEventListeners?e.removeEventListeners(t,i,!!r):e.detachEvent("on"+t,i),b},getRequestAnimationFrame:function(){var e,t=0,i=["ms","moz","webkit","o"],n=r.requestAnimationFrame;if(!n){for(var a=0;a<i.length;a++)n=r[i[a]+"RequestAnimationFrame"]||n,e=r[i[a]+"CancelAnimationFrame"]||r[i[a]+"CancelRequestAnimationFrame"]||e;n=n||function(e,i){var n=(new Date).getTime(),s=Math.max(0,16-(n-t)),a=r.setTimeout((function(){e(n+s)}),s);return t=n+s,a}}return n.init=s.once(T),n}},x=r.Two=function(e){var t=s.defaults(e||{},{fullscreen:!1,width:640,height:480,type:x.Types.svg,autostart:!1});if(s.each(t,(function(e,t){/fullscreen/i.test(t)||/autostart/i.test(t)||(this[t]=e)}),this),s.isElement(t.domElement)){var i=t.domElement.tagName.toLowerCase();/^(CanvasRenderer-canvas|WebGLRenderer-canvas|SVGRenderer-svg)$/.test(this.type+"-"+i)||(this.type=x.Types[i])}if(this.renderer=new x[this.type](this),x.Utils.setPlaying.call(this,t.autostart),this.frameCount=0,t.fullscreen){var n=s.bind(R,this);s.extend(document.body.style,{overflow:"hidden",margin:0,padding:0,top:0,left:0,right:0,bottom:0,position:"fixed"}),s.extend(this.renderer.domElement.style,{display:"block",top:0,left:0,right:0,bottom:0,position:"fixed"}),b.bind(r,"resize",n),n()}else s.isElement(t.domElement)||(this.renderer.setSize(t.width,t.height,this.ratio),this.width=t.width,this.height=t.height);this.renderer.bind(x.Events.resize,s.bind(F,this)),this.scene=this.renderer.scene,x.Instances.push(this),t.autostart&&M.init()};s.extend(x,{root:r,nextFrameID:null,Array:r.Float32Array||Array,Types:{webgl:"WebGLRenderer",svg:"SVGRenderer",canvas:"CanvasRenderer"},Version:"v0.7.0",PublishDate:"2020-01-22T21:17:28.421Z",Identifier:"two-",Events:{play:"play",pause:"pause",update:"update",render:"render",resize:"resize",change:"change",remove:"remove",insert:"insert",order:"order",load:"load"},Commands:{move:"M",line:"L",curve:"C",arc:"A",close:"Z"},Resolution:12,Instances:[],noConflict:function(){return r.Two=i,x},uniqueId:function(){var e=g;return g++,e},Utils:s.extend(s,{performance:m,defineProperty:function(e){var t="_"+e,i="_flag"+e.charAt(0).toUpperCase()+e.slice(1);Object.defineProperty(this,e,{enumerable:!0,get:function(){return this[t]},set:function(e){this[t]=e,this[i]=!0}})},Image:null,isHeadless:!1,shim:function(e,t){return x.CanvasRenderer.Utils.shim(e),s.isUndefined(t)||(x.Utils.Image=t),x.Utils.isHeadless=!0,e},release:function(e){if(s.isObject(e))return s.isFunction(e.unbind)&&e.unbind(),e.vertices&&(s.isFunction(e.vertices.unbind)&&e.vertices.unbind(),s.each(e.vertices,(function(e){s.isFunction(e.unbind)&&e.unbind()}))),e.children&&s.each(e.children,(function(e){x.Utils.release(e)})),e},xhr:function(e,t){var i=new XMLHttpRequest;return i.open("GET",e),i.onreadystatechange=function(){4===i.readyState&&200===i.status&&t(i.responseText)},i.send(),i},Curve:{CollinearityEpsilon:u(10,-30),RecursionLimit:16,CuspLimit:0,Tolerance:{distance:.25,angle:0,epsilon:Number.EPSILON},abscissas:[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],weights:[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]]},devicePixelRatio:r.devicePixelRatio||1,getBackingStoreRatio:function(e){return e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1},getRatio:function(e){return x.Utils.devicePixelRatio/k(e)},setPlaying:function(e){return this.playing=!!e,this},getComputedMatrix:function(e,t){t=t&&t.identity()||new x.Matrix;for(var i=e,r=[];i&&i._matrix;)r.push(i._matrix),i=i.parent;r.reverse();for(var n=0;n<r.length;n++){var s=r[n].elements;t.multiply(s[0],s[1],s[2],s[3],s[4],s[5],s[6],s[7],s[8],s[9])}return t},decomposeMatrix:function(e){return{translateX:e.e,translateY:e.f,scaleX:e.a,scaleY:e.d,rotation:Math.asin(-e.b)}},extractCSSText:function(e,t){var i,r,n,a;t||(t={}),i=e.split(";");for(var o=0;o<i.length;o++)n=(r=i[o].split(":"))[0],a=r[1],s.isUndefined(n)||s.isUndefined(a)||(t[n]=a.replace(/\s/,""));return t},getSvgStyles:function(e){for(var t={},i=x.Utils.getSvgAttributes(e),r=Math.max(i.length,e.style.length),n=0;n<r;n++){var s=e.style[n],a=i[n];s&&(t[s]=e.style[s]),a&&(t[a]=e.getAttribute(a))}return t},getSvgAttributes:function(e){for(var t=e.getAttributeNames(),i=["id","class","transform","xmlns","viewBox"],r=0;r<i.length;r++){var n=i[r],a=s.indexOf(t,n);a>=0&&t.splice(a,1)}return t},applySvgViewBox:function(e,t){var i=t.split(/\s/),r=parseFloat(i[0]),n=parseFloat(i[1]),s=parseFloat(i[2]),a=parseFloat(i[3]),o=Math.min(this.width/s,this.height/a);return e.translation.x-=r*o,e.translation.y-=n*o,e.scale=o,e},applySvgAttributes:function(e,t,i){var n,a,o,l,h={},c={},d={};if(r.getComputedStyle){var u=r.getComputedStyle(e);for(n=u.length;n--;)o=u[a=u[n]],s.isUndefined(o)||(h[a]=o)}for(n=0;n<e.attributes.length;n++)l=e.attributes[n],/style/i.test(l.nodeName)?x.Utils.extractCSSText(l.value,d):c[l.nodeName]=l.value;for(a in s.isUndefined(h.opacity)||(h["stroke-opacity"]=h.opacity,h["fill-opacity"]=h.opacity,delete h.opacity),i&&s.defaults(h,i),s.extend(h,c,d),h.visible=!(s.isUndefined(h.display)&&/none/i.test(h.display))||s.isUndefined(h.visibility)&&/hidden/i.test(h.visibility),h)switch(o=h[a],a){case"transform":if(/none/i.test(o))break;var f=e.transform&&e.transform.baseVal&&e.transform.baseVal.length>0?e.transform.baseVal[0].matrix:e.getCTM?e.getCTM():null;if(s.isNull(f))break;var _=x.Utils.decomposeMatrix(f);t.translation.set(_.translateX,_.translateY),t.rotation=Math.PI*(_.rotation/180),t.scale=new x.Vector(_.scaleX,_.scaleY);var g=parseFloat((h.x+"").replace("px")),p=parseFloat((h.y+"").replace("px"));g&&(t.translation.x=g),p&&(t.translation.y=p);break;case"viewBox":x.Utils.applySvgViewBox.call(this,t,o);break;case"visible":if(t instanceof x.Group){t._visible=o;break}t.visible=o;break;case"stroke-linecap":if(t instanceof x.Group){t._cap=o;break}t.cap=o;break;case"stroke-linejoin":if(t instanceof x.Group){t._join=o;break}t.join=o;break;case"stroke-miterlimit":if(t instanceof x.Group){t._miter=o;break}t.miter=o;break;case"stroke-width":if(t instanceof x.Group){t._linewidth=parseFloat(o);break}t.linewidth=parseFloat(o);break;case"opacity":case"stroke-opacity":case"fill-opacity":if(t instanceof x.Group){t._opacity=parseFloat(o);break}t.opacity=parseFloat(o);break;case"fill":case"stroke":if(t instanceof x.Group&&(a="_"+a),/url\(#.*\)/i.test(o)){var m=x.Utils.getScene(this);t[a]=m.getById(o.replace(/url\(#(.*)\)/i,"$1"))}else t[a]=/none/i.test(o)?"transparent":o;break;case"id":t.id=o,e.id=o+"-"+x.Identifier+"applied";break;case"class":case"className":t.classList=o.split(" ")}return h},getScene:function(e){for(;e.parent;)e=e.parent;return e.scene},read:{svg:function(e){var t=x.Utils.read.g.call(this,e);e.getAttribute("viewBox");return t},defs:function(e){var t=new x.Utils.Error("interpret <defs /> not supported.");return console.warn(t.name,t.message),null},use:function(e){var t=new x.Utils.Error("interpret <use /> not supported.");return console.warn(t.name,t.message),null},g:function(e,t){var i,r=new x.Group;x.Utils.applySvgAttributes.call(this,e,r,t),this.add(r),i=x.Utils.getSvgStyles.call(this,e);for(var n=0,s=e.childNodes.length;n<s;n++){var a=e.childNodes[n],o=a.nodeName;if(!o)return;var l=o.replace(/svg:/gi,"").toLowerCase();if(l in x.Utils.read){var h=x.Utils.read[l].call(r,a,i);h&&!h.parent&&r.add(h)}}return r},polygon:function(e,t){var i=e.getAttribute("points"),r=[];i.replace(/(-?[\d.?]+)[,|\s](-?[\d.?]+)/g,(function(e,t,i){r.push(new x.Anchor(parseFloat(t),parseFloat(i)))}));var n=new x.Path(r,!0).noStroke();return n.fill="black",x.Utils.applySvgAttributes.call(this,e,n,t),n},polyline:function(e,t){var i=x.Utils.read.polygon.call(this,e,t);return i.closed=!1,i},path:function(e,t){var i=e.getAttribute("d"),r=[],n=!1,a=!1;if(i){var o,l,h=new x.Anchor,c=i.match(/[a-df-z][^a-df-z]*/gi),d=c.length-1;s.each(c.slice(0),(function(e,t){var i,r,n,s,a,o,l,h,d,u=e[0],f=u.toLowerCase(),_=e.slice(1).trim().split(/[\s,]+|(?=\s?[+-])/),g=[],p=!1;for(a=0;a<_.length;a++)if((i=_[a]).indexOf(".")!==i.lastIndexOf(".")){for(n=(r=i.split("."))[0]+"."+r[1],_.splice(a,1,n),s=2;s<r.length;s++)_.splice(a+s-1,0,"0."+r[s]);p=!0}switch(p&&(e=u+_.join(",")),t<=0&&(c=[]),f){case"h":case"v":_.length>1&&(d=1);break;case"m":case"l":case"t":_.length>2&&(d=2);break;case"s":case"q":_.length>4&&(d=4);break;case"c":_.length>6&&(d=6);break;case"a":_.length>7&&(d=7)}if(d){for(a=0,l=_.length,h=0;a<l;a+=d){if(o=u,h>0)switch(u){case"m":o="l";break;case"M":o="L"}g.push(o+_.slice(a,a+d).join(" ")),h++}c=Array.prototype.concat.apply(c,g)}else c.push(e)})),s.each(c,(function(e,t){var i,c,f,_,g,p,m,v,y,b,w,E,A=e[0],k=A.toLowerCase();switch(l=(l=(l=e.slice(1).trim()).replace(/(-?\d+(?:\.\d*)?)[eE]([+-]?\d+)/g,(function(e,t,i){return parseFloat(t)*u(10,i)}))).split(/[\s,]+|(?=\s?[+-])/),a=A===k,k){case"z":if(t>=d)n=!0;else{c=h.x,f=h.y,i=new x.Anchor(c,f,void 0,void 0,void 0,void 0,x.Commands.close);for(var C=r.length-1;C>=0;C--){var S=r[C];if(/m/i.test(S.command)){h=S;break}}}break;case"m":case"l":o=void 0,c=parseFloat(l[0]),f=parseFloat(l[1]),i=new x.Anchor(c,f,void 0,void 0,void 0,void 0,/m/i.test(k)?x.Commands.move:x.Commands.line),a&&i.addSelf(h),h=i;break;case"h":case"v":var R=/h/i.test(k)?"x":"y",F=/x/i.test(R)?"y":"x";(i=new x.Anchor(void 0,void 0,void 0,void 0,void 0,void 0,x.Commands.line))[R]=parseFloat(l[0]),i[F]=h[F],a&&(i[R]+=h[R]),h=i;break;case"c":case"s":_=h.x,g=h.y,o||(o=new x.Vector),/c/i.test(k)?(p=parseFloat(l[0]),m=parseFloat(l[1]),v=parseFloat(l[2]),y=parseFloat(l[3]),b=parseFloat(l[4]),w=parseFloat(l[5])):(p=(E=O(h,o,a)).x,m=E.y,v=parseFloat(l[0]),y=parseFloat(l[1]),b=parseFloat(l[2]),w=parseFloat(l[3])),a&&(p+=_,m+=g,v+=_,y+=g,b+=_,w+=g),s.isObject(h.controls)||x.Anchor.AppendCurveProperties(h),h.controls.right.set(p-h.x,m-h.y),i=new x.Anchor(b,w,v-b,y-w,void 0,void 0,x.Commands.curve),h=i,o=i.controls.left;break;case"t":case"q":_=h.x,g=h.y,o||(o=new x.Vector),/q/i.test(k)?(p=parseFloat(l[0]),m=parseFloat(l[1]),v=parseFloat(l[0]),y=parseFloat(l[1]),b=parseFloat(l[2]),w=parseFloat(l[3])):(p=(E=O(h,o,a)).x,m=E.y,v=E.x,y=E.y,b=parseFloat(l[0]),w=parseFloat(l[1])),a&&(p+=_,m+=g,v+=_,y+=g,b+=_,w+=g),s.isObject(h.controls)||x.Anchor.AppendCurveProperties(h),h.controls.right.set(.33*(p-h.x),.33*(m-h.y)),i=new x.Anchor(b,w,v-b,y-w,void 0,void 0,x.Commands.curve),h=i,o=i.controls.left;break;case"a":_=h.x,g=h.y;var M=parseFloat(l[0]),T=parseFloat(l[1]),P=parseFloat(l[2]),L=parseFloat(l[3]),U=parseFloat(l[4]);b=parseFloat(l[5]),w=parseFloat(l[6]),a&&(b+=_,w+=g);var N=new x.Anchor(b,w);N.command=x.Commands.arc,N.rx=M,N.ry=T,N.xAxisRotation=P,N.largeArcFlag=L,N.sweepFlag=U,i=N,h=N,o=void 0}i&&(s.isArray(i)?r=r.concat(i):r.push(i))}))}(i=new x.Path(r,n,void 0,!0).noStroke()).fill="black";var f=i.getBoundingClientRect(!0);return f.centroid={x:f.left+f.width/2,y:f.top+f.height/2},s.each(i.vertices,(function(e){e.subSelf(f.centroid)})),x.Utils.applySvgAttributes.call(this,e,i,t),i.translation.addSelf(f.centroid),i},circle:function(e,t){var i=parseFloat(e.getAttribute("cx")),r=parseFloat(e.getAttribute("cy")),n=parseFloat(e.getAttribute("r")),s=new x.Circle(i,r,n).noStroke();return s.fill="black",x.Utils.applySvgAttributes.call(this,e,s,t),s},ellipse:function(e,t){var i=parseFloat(e.getAttribute("cx")),r=parseFloat(e.getAttribute("cy")),n=parseFloat(e.getAttribute("rx")),s=parseFloat(e.getAttribute("ry")),a=new x.Ellipse(i,r,n,s).noStroke();return a.fill="black",x.Utils.applySvgAttributes.call(this,e,a,t),a},rect:function(e,t){var i=parseFloat(e.getAttribute("rx")),r=parseFloat(e.getAttribute("ry"));if(!s.isNaN(i)||!s.isNaN(r))return x.Utils.read["rounded-rect"](e);var n=parseFloat(e.getAttribute("x"))||0,a=parseFloat(e.getAttribute("y"))||0,o=parseFloat(e.getAttribute("width")),l=parseFloat(e.getAttribute("height")),h=o/2,c=l/2,d=new x.Rectangle(n+h,a+c,o,l).noStroke();return d.fill="black",x.Utils.applySvgAttributes.call(this,e,d,t),d},"rounded-rect":function(e,t){var i=parseFloat(e.getAttribute("x"))||0,r=parseFloat(e.getAttribute("y"))||0,n=parseFloat(e.getAttribute("rx"))||0,s=parseFloat(e.getAttribute("ry"))||0,a=parseFloat(e.getAttribute("width")),o=parseFloat(e.getAttribute("height")),l=a/2,h=o/2,c=new x.Vector(n,s),d=new x.RoundedRectangle(i+l,r+h,a,o,c).noStroke();return d.fill="black",x.Utils.applySvgAttributes.call(this,e,d,t),d},line:function(e,t){var i=parseFloat(e.getAttribute("x1")),r=parseFloat(e.getAttribute("y1")),n=parseFloat(e.getAttribute("x2")),s=parseFloat(e.getAttribute("y2")),a=new x.Line(i,r,n,s).noFill();return x.Utils.applySvgAttributes.call(this,e,a,t),a},lineargradient:function(e,t){for(var i=parseFloat(e.getAttribute("x1")),r=parseFloat(e.getAttribute("y1")),n=parseFloat(e.getAttribute("x2")),a=parseFloat(e.getAttribute("y2")),o=(n+i)/2,l=(a+r)/2,h=[],c=0;c<e.children.length;c++){var d=e.children[c],u=d.getAttribute("offset");/%/gi.test(u)&&(u=parseFloat(u.replace(/%/gi,""))/100),u=parseFloat(u);var f,_=d.getAttribute("stop-color"),g=d.getAttribute("stop-opacity"),p=d.getAttribute("style");s.isNull(_)&&(_=(f=!!p&&p.match(/stop-color:\s?([#a-fA-F0-9]*)/))&&f.length>1?f[1]:void 0),g=s.isNull(g)?(f=!!p&&p.match(/stop-opacity:\s?([0-9.-]*)/))&&f.length>1?parseFloat(f[1]):1:parseFloat(g),h.push(new x.Gradient.Stop(u,_,g))}var m=new x.LinearGradient(i-o,r-l,n-o,a-l,h);return x.Utils.applySvgAttributes.call(this,e,m,t),m},radialgradient:function(e,t){var i=parseFloat(e.getAttribute("cx"))||0,r=parseFloat(e.getAttribute("cy"))||0,n=parseFloat(e.getAttribute("r")),a=parseFloat(e.getAttribute("fx")),o=parseFloat(e.getAttribute("fy"));s.isNaN(a)&&(a=i),s.isNaN(o)&&(o=r);for(var l=h(i+a)/2,c=h(r+o)/2,d=[],u=0;u<e.children.length;u++){var f=e.children[u],_=f.getAttribute("offset");/%/gi.test(_)&&(_=parseFloat(_.replace(/%/gi,""))/100),_=parseFloat(_);var g,p=f.getAttribute("stop-color"),m=f.getAttribute("stop-opacity"),v=f.getAttribute("style");s.isNull(p)&&(p=(g=!!v&&v.match(/stop-color:\s?([#a-fA-F0-9]*)/))&&g.length>1?g[1]:void 0),m=s.isNull(m)?(g=!!v&&v.match(/stop-opacity:\s?([0-9.-]*)/))&&g.length>1?parseFloat(g[1]):1:parseFloat(m),d.push(new x.Gradient.Stop(_,p,m))}var y=new x.RadialGradient(i-l,r-c,n,d,a-l,o-c);return x.Utils.applySvgAttributes.call(this,e,y,t),y}},subdivide:function(e,t,i,r,n,s,a,o,l){var c=(l=l||x.Utils.Curve.RecursionLimit)+1;if(h(e-a)<.001&&h(t-o)<.001)return[new x.Anchor(a,o)];for(var d=[],u=0;u<c;u++){var f=u/c,_=C(f,e,i,n,a),g=C(f,t,r,s,o);d.push(new x.Anchor(_,g))}return d},getComponentOnCubicBezier:function(e,t,i,r,n){var s=1-e;return s*s*s*t+3*s*s*e*i+3*s*e*e*r+e*e*e*n},getCurveLength:function(e,t,i,r,n,s,a,o,h){if(e===i&&t===r&&n===a&&s===o){var c=a-e,d=o-t;return l(c*c+d*d)}var u=9*(i-n)+3*(a-e),f=6*(e+n)-12*i,_=3*(i-e),g=9*(r-s)+3*(o-t),p=6*(t+s)-12*r,m=3*(r-t);return S((function(e){var t=(u*e+f)*e+_,i=(g*e+p)*e+m;return l(t*t+i*i)}),0,1,h||x.Utils.Curve.RecursionLimit)},getCurveBoundingBox:function(e,t,i,r,n,s,a,o){for(var l,c,d,u,f,_,g,p,m=[],v=[[],[]],y=0;y<2;++y)if(0==y?(c=6*e-12*i+6*n,l=-3*e+9*i-9*n+3*a,d=3*i-3*e):(c=6*t-12*r+6*s,l=-3*t+9*r-9*s+3*o,d=3*r-3*t),h(l)<1e-12){if(h(c)<1e-12)continue;0<(u=-d/c)&&u<1&&m.push(u)}else g=c*c-4*d*l,p=Math.sqrt(g),g<0||(0<(f=(-c+p)/(2*l))&&f<1&&m.push(f),0<(_=(-c-p)/(2*l))&&_<1&&m.push(_));for(var b,x=m.length,w=x;x--;)b=1-(u=m[x]),v[0][x]=b*b*b*e+3*b*b*u*i+3*b*u*u*n+u*u*u*a,v[1][x]=b*b*b*t+3*b*b*u*r+3*b*u*u*s+u*u*u*o;return v[0][w]=e,v[1][w]=t,v[0][w+1]=a,v[1][w+1]=o,v[0].length=v[1].length=w+2,{min:{x:Math.min.apply(0,v[0]),y:Math.min.apply(0,v[1])},max:{x:Math.max.apply(0,v[0]),y:Math.max.apply(0,v[1])}}},integrate:function(e,t,i,r){for(var n=x.Utils.Curve.abscissas[r-2],s=x.Utils.Curve.weights[r-2],a=.5*(i-t),o=a+t,l=0,h=r+1>>1,c=1&r?s[l++]*e(o):0;l<h;){var d=a*n[l];c+=s[l++]*(e(o+d)+e(o-d))}return a*c},getCurveFromPoints:function(e,t){for(var i=e.length,r=i-1,n=0;n<i;n++){var a=e[n];s.isObject(a.controls)||x.Anchor.AppendCurveProperties(a);var o=t?A(n-1,i):_(n-1,0),l=t?A(n+1,i):f(n+1,r),h=e[o],c=a,d=e[l];E(h,c,d),c.command=0===n?x.Commands.move:x.Commands.curve}},getControlPoints:function(e,t,i){var r=x.Vector.angleBetween(e,t),n=x.Vector.angleBetween(i,t),l=x.Vector.distanceBetween(e,t),h=x.Vector.distanceBetween(i,t),u=(r+n)/2;return l<1e-4||h<1e-4?(s.isBoolean(t.relative)&&!t.relative&&(t.controls.left.copy(t),t.controls.right.copy(t)),t):(l*=.33,h*=.33,n<r?u+=d:u-=d,t.controls.left.x=o(u)*l,t.controls.left.y=a(u)*l,u-=c,t.controls.right.x=o(u)*h,t.controls.right.y=a(u)*h,s.isBoolean(t.relative)&&!t.relative&&(t.controls.left.x+=t.x,t.controls.left.y+=t.y,t.controls.right.x+=t.x,t.controls.right.y+=t.y),t)},getReflection:function(e,t,i){return new x.Vector(2*e.x-(t.x+e.x)-(i?e.x:0),2*e.y-(t.y+e.y)-(i?e.y:0))},getAnchorsFromArcData:function(e,t,i,r,n,a,o){var l=x.Resolution;return s.map(s.range(l),(function(e){var t=(e+1)/l;o&&(t=1-t);var s=t*a+n,h=i*Math.cos(s),c=r*Math.sin(s),d=new x.Anchor(h,c);return x.Anchor.AppendCurveProperties(d),d.command=x.Commands.line,d}))},lerp:function(e,t,i){return i*(t-e)+e},toFixed:function(e){return Math.floor(1e3*e)/1e3},mod:function(e,t){for(;e<0;)e+=t;return e%t},Collection:function(){Array.call(this),arguments.length>1?Array.prototype.push.apply(this,arguments):arguments[0]&&Array.isArray(arguments[0])&&Array.prototype.push.apply(this,arguments[0])},Error:function(e){this.name="Two.js",this.message=e},Events:{on:function(e,t){return this._events||(this._events={}),(this._events[e]||(this._events[e]=[])).push(t),this},off:function(e,t){if(!this._events)return this;if(!e&&!t)return this._events={},this;for(var i=e?[e]:s.keys(this._events),r=0,n=i.length;r<n;r++){e=i[r];var a=this._events[e];if(a){var o=[];if(t)for(var l=0,h=a.length;l<h;l++){var c=a[l];c=c.handler?c.handler:c,t&&t!==c&&o.push(c)}this._events[e]=o}}return this},trigger:function(e){if(!this._events)return this;var t=p.call(arguments,1),i=this._events[e];return i&&w(this,i,t),this},listen:function(e,t,i){var r=this;if(e){var n=function(){i.apply(r,arguments)};n.obj=e,n.name=t,n.handler=i,e.on(t,n)}return this},ignore:function(e,t,i){return e.off(t,i),this}}})}),x.Utils.Events.bind=x.Utils.Events.on,x.Utils.Events.unbind=x.Utils.Events.off;var w=function(e,t,i){var r;switch(i.length){case 0:r=function(r){t[r].call(e,i[0])};break;case 1:r=function(r){t[r].call(e,i[0],i[1])};break;case 2:r=function(r){t[r].call(e,i[0],i[1],i[2])};break;case 3:r=function(r){t[r].call(e,i[0],i[1],i[2],i[3])};break;default:r=function(r){t[r].apply(e,i)}}for(var n=0;n<t.length;n++)r(n)};x.Utils.Error.prototype=new Error,x.Utils.Error.prototype.constructor=x.Utils.Error,x.Utils.Collection.prototype=new Array,x.Utils.Collection.prototype.constructor=x.Utils.Collection,s.extend(x.Utils.Collection.prototype,x.Utils.Events,{pop:function(){var e=Array.prototype.pop.apply(this,arguments);return this.trigger(x.Events.remove,[e]),e},shift:function(){var e=Array.prototype.shift.apply(this,arguments);return this.trigger(x.Events.remove,[e]),e},push:function(){var e=Array.prototype.push.apply(this,arguments);return this.trigger(x.Events.insert,arguments),e},unshift:function(){var e=Array.prototype.unshift.apply(this,arguments);return this.trigger(x.Events.insert,arguments),e},splice:function(){var e,t=Array.prototype.splice.apply(this,arguments);return this.trigger(x.Events.remove,t),arguments.length>2&&(e=this.slice(arguments[0],arguments[0]+arguments.length-2),this.trigger(x.Events.insert,e),this.trigger(x.Events.order)),t},sort:function(){return Array.prototype.sort.apply(this,arguments),this.trigger(x.Events.order),this},reverse:function(){return Array.prototype.reverse.apply(this,arguments),this.trigger(x.Events.order),this}});x.Utils.getAnchorsFromArcData;var E=x.Utils.getControlPoints,A=(x.Utils.getCurveFromPoints,x.Utils.solveSegmentIntersection,x.Utils.decoupleShapes,x.Utils.mod),k=x.Utils.getBackingStoreRatio,C=x.Utils.getComponentOnCubicBezier,S=(x.Utils.getCurveLength,x.Utils.integrate),O=x.Utils.getReflection;function R(){var e=document.body.getBoundingClientRect(),t=this.width=e.width,i=this.height=e.height;this.renderer.setSize(t,i,this.ratio)}function F(e,t){this.width=e,this.height=t,this.trigger(x.Events.resize,e,t)}s.extend(x.prototype,x.Utils.Events,{constructor:x,appendTo:function(e){return e.appendChild(this.renderer.domElement),this},play:function(){return x.Utils.setPlaying.call(this,!0),M.init(),this.trigger(x.Events.play)},pause:function(){return this.playing=!1,this.trigger(x.Events.pause)},update:function(){var e=!!this._lastFrame,t=m.now();e&&(this.timeDelta=parseFloat((t-this._lastFrame).toFixed(3))),this._lastFrame=t;var i=this.width,r=this.height,n=this.renderer;return i===n.width&&r===n.height||n.setSize(i,r,this.ratio),this.trigger(x.Events.update,this.frameCount,this.timeDelta),this.render()},render:function(){return this.renderer.render(),this.trigger(x.Events.render,this.frameCount++)},add:function(e){var t=e;return t instanceof Array||(t=s.toArray(arguments)),this.scene.add(t),this},remove:function(e){var t=e;return t instanceof Array||(t=s.toArray(arguments)),this.scene.remove(t),this},clear:function(){return this.scene.remove(this.scene.children),this},makeLine:function(e,t,i,r){var n=new x.Line(e,t,i,r);return this.scene.add(n),n},makeArrow:function(e,t,i,r,n){var a=s.isNumber(n)?n:10,o=Math.atan2(r-t,i-e),l=[new x.Anchor(e,t,void 0,void 0,void 0,void 0,x.Commands.move),new x.Anchor(i,r,void 0,void 0,void 0,void 0,x.Commands.line),new x.Anchor(i-a*Math.cos(o-Math.PI/4),r-a*Math.sin(o-Math.PI/4),void 0,void 0,void 0,void 0,x.Commands.line),new x.Anchor(i,r,void 0,void 0,void 0,void 0,x.Commands.move),new x.Anchor(i-a*Math.cos(o+Math.PI/4),r-a*Math.sin(o+Math.PI/4),void 0,void 0,void 0,void 0,x.Commands.line)],h=new x.Path(l,!1,!1,!0);return h.noFill(),h.cap="round",h.join="round",this.scene.add(h),h},makeRectangle:function(e,t,i,r){var n=new x.Rectangle(e,t,i,r);return this.scene.add(n),n},makeRoundedRectangle:function(e,t,i,r,n){var s=new x.RoundedRectangle(e,t,i,r,n);return this.scene.add(s),s},makeCircle:function(e,t,i,r){var n=new x.Circle(e,t,i,r);return this.scene.add(n),n},makeEllipse:function(e,t,i,r,n){var s=new x.Ellipse(e,t,i,r,n);return this.scene.add(s),s},makeStar:function(e,t,i,r,n){var s=new x.Star(e,t,i,r,n);return this.scene.add(s),s},makeCurve:function(e){var t=arguments.length,i=e;if(!s.isArray(e)){i=[];for(var r=0;r<t;r+=2){var n=arguments[r];if(!s.isNumber(n))break;var a=arguments[r+1];i.push(new x.Anchor(n,a))}}var o=arguments[t-1],l=new x.Path(i,!(s.isBoolean(o)?o:void 0),!0),h=l.getBoundingClientRect();return l.center().translation.set(h.left+h.width/2,h.top+h.height/2),this.scene.add(l),l},makePolygon:function(e,t,i,r){var n=new x.Polygon(e,t,i,r);return this.scene.add(n),n},makeArcSegment:function(e,t,i,r,n,s,a){var o=new x.ArcSegment(e,t,i,r,n,s,a);return this.scene.add(o),o},makePath:function(e){var t=arguments.length,i=e;if(!s.isArray(e)){i=[];for(var r=0;r<t;r+=2){var n=arguments[r];if(!s.isNumber(n))break;var a=arguments[r+1];i.push(new x.Anchor(n,a))}}var o=arguments[t-1],l=new x.Path(i,!(s.isBoolean(o)?o:void 0)),h=l.getBoundingClientRect();return s.isNumber(h.top)&&s.isNumber(h.left)&&s.isNumber(h.right)&&s.isNumber(h.bottom)&&l.center().translation.set(h.left+h.width/2,h.top+h.height/2),this.scene.add(l),l},makeText:function(e,t,i,r){var n=new x.Text(e,t,i,r);return this.add(n),n},makeLinearGradient:function(e,t,i,r){var n=p.call(arguments,4),s=new x.LinearGradient(e,t,i,r,n);return this.add(s),s},makeRadialGradient:function(e,t,i){var r=p.call(arguments,3),n=new x.RadialGradient(e,t,i,r);return this.add(n),n},makeSprite:function(e,t,i,r,n,s,a){var o=new x.Sprite(e,t,i,r,n,s);return a&&o.play(),this.add(o),o},makeImageSequence:function(e,t,i,r,n){var s=new x.ImageSequence(e,t,i,r);return n&&s.play(),this.add(s),s},makeTexture:function(e,t){return new x.Texture(e,t)},makeGroup:function(e){var t=e;t instanceof Array||(t=s.toArray(arguments));var i=new x.Group;return this.scene.add(i),i.add(t),i},interpret:function(e,t,i){var r=e.tagName.toLowerCase();if(i=void 0===i||i,!(r in x.Utils.read))return null;var n=x.Utils.read[r].call(this,e);return i&&this.add(t&&n instanceof x.Group?n.children:n),n},load:function(e,t){var i,r,n,a=new x.Group,o=s.bind((function(e){for(b.temp.innerHTML=e,r=0;r<b.temp.children.length;r++)if(i=b.temp.children[r],/svg/i.test(i.nodeName))for(n=0;n<i.children.length;n++)a.add(this.interpret(i.children[n]));else a.add(this.interpret(i));if(s.isFunction(t)){var o=b.temp.children.length<=1?b.temp.children[0]:b.temp.children;t(a,o)}}),this);return/.*\.svg$/gi.test(e)?(x.Utils.xhr(e,o),a):(o(e),a)}});var M=b.getRequestAnimationFrame();function T(){for(var e=0;e<x.Instances.length;e++){var t=x.Instances[e];t.playing&&t.update()}x.nextFrameID=M(T)}return t.exports&&(t.exports=x),x}((void 0!==e?e:e||self||window).Two),i=(void 0!==e?e:e||self||window).Two,r=i.Utils,n=i.Registry=function(){this.map={}},r.extend(n.prototype,{constructor:n,add:function(e,t){return this.map[e]=t,this},remove:function(e){return delete this.map[e],this},get:function(e){return this.map[e]},contains:function(e){return e in this.map}}),function(e){var t=e.Utils,i=e.Vector=function(e,t){this.x=e||0,this.y=t||0};t.extend(i,{zero:new e.Vector,add:function(e,t){return new i(e.x+t.x,e.y+t.y)},sub:function(e,t){return new i(e.x-t.x,e.y-t.y)},subtract:function(e,t){return i.sub(e,t)},ratioBetween:function(e,t){return(e.x*t.x+e.y*t.y)/(e.length()*t.length())},angleBetween:function(e,t){var i,r;return arguments.length>=4?(i=arguments[0]-arguments[2],r=arguments[1]-arguments[3],Math.atan2(r,i)):(i=e.x-t.x,r=e.y-t.y,Math.atan2(r,i))},distanceBetween:function(e,t){return Math.sqrt(i.distanceBetweenSquared(e,t))},distanceBetweenSquared:function(e,t){var i=e.x-t.x,r=e.y-t.y;return i*i+r*r},MakeObservable:function(i){i.bind=i.on=function(){return this._bound||(this._x=this.x,this._y=this.y,Object.defineProperty(this,"x",n),Object.defineProperty(this,"y",s),t.extend(this,r),this._bound=!0),e.Utils.Events.bind.apply(this,arguments),this}}}),t.extend(i.prototype,e.Utils.Events,{constructor:i,set:function(e,t){return this.x=e,this.y=t,this},copy:function(e){return this.x=e.x,this.y=e.y,this},clear:function(){return this.x=0,this.y=0,this},clone:function(){return new i(this.x,this.y)},add:function(e,i){return arguments.length<=0||(arguments.length<=1?t.isNumber(e)?(this.x+=e,this.y+=e):e&&t.isNumber(e.x)&&t.isNumber(e.y)&&(this.x+=e.x,this.y+=e.y):(this.x+=e,this.y+=i)),this},addSelf:function(e){return this.add.apply(this,arguments)},sub:function(e,i){return arguments.length<=0||(arguments.length<=1?t.isNumber(e)?(this.x-=e,this.y-=e):e&&t.isNumber(e.x)&&t.isNumber(e.y)&&(this.x-=e.x,this.y-=e.y):(this.x-=e,this.y-=i)),this},subtract:function(){return this.sub.apply(this,arguments)},subSelf:function(e){return this.sub.apply(this,arguments)},subtractSelf:function(e){return this.sub.apply(this,arguments)},multiply:function(e,i){return arguments.length<=0||(arguments.length<=1?t.isNumber(e)?(this.x*=e,this.y*=e):e&&t.isNumber(e.x)&&t.isNumber(e.y)&&(this.x*=e.x,this.y*=e.y):(this.x*=e,this.y*=i)),this},multiplySelf:function(e){return this.multiply.apply(this,arguments)},multiplyScalar:function(e){return this.multiply(e)},divide:function(e,i){return arguments.length<=0||(arguments.length<=1?t.isNumber(e)?(this.x/=e,this.y/=e):e&&t.isNumber(e.x)&&t.isNumber(e.y)&&(this.x/=e.x,this.y/=e.y):(this.x/=e,this.y/=i),t.isNaN(this.x)&&(this.x=0),t.isNaN(this.y)&&(this.y=0)),this},divideSelf:function(e){return this.divide.apply(this,arguments)},divideScalar:function(e){return this.divide(e)},negate:function(){return this.multiply(-1)},dot:function(e){return this.x*e.x+this.y*e.y},length:function(){return Math.sqrt(this.lengthSquared())},lengthSquared:function(){return this.x*this.x+this.y*this.y},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,i=this.y-e.y;return t*t+i*i},setLength:function(e){return this.normalize().multiplyScalar(e)},equals:function(e,t){return t=void 0===t?1e-4:t,this.distanceTo(e)<t},lerp:function(e,t){var i=(e.x-this.x)*t+this.x,r=(e.y-this.y)*t+this.y;return this.set(i,r)},isZero:function(e){return e=void 0===e?1e-4:e,this.length()<e},toString:function(){return this.x+", "+this.y},toObject:function(){return{x:this.x,y:this.y}},rotate:function(e){var t=Math.cos(e),i=Math.sin(e);return this.x=this.x*t-this.y*i,this.y=this.x*i+this.y*t,this}});var r={constructor:i,set:function(t,i){return this._x=t,this._y=i,this.trigger(e.Events.change)},copy:function(t){return this._x=t.x,this._y=t.y,this.trigger(e.Events.change)},clear:function(){return this._x=0,this._y=0,this.trigger(e.Events.change)},clone:function(){return new i(this._x,this._y)},add:function(i,r){return arguments.length<=0?this:(arguments.length<=1?t.isNumber(i)?(this._x+=i,this._y+=i):i&&t.isNumber(i.x)&&t.isNumber(i.y)&&(this._x+=i.x,this._y+=i.y):(this._x+=i,this._y+=r),this.trigger(e.Events.change))},sub:function(i,r){return arguments.length<=0?this:(arguments.length<=1?t.isNumber(i)?(this._x-=i,this._y-=i):i&&t.isNumber(i.x)&&t.isNumber(i.y)&&(this._x-=i.x,this._y-=i.y):(this._x-=i,this._y-=r),this.trigger(e.Events.change))},multiply:function(i,r){return arguments.length<=0?this:(arguments.length<=1?t.isNumber(i)?(this._x*=i,this._y*=i):i&&t.isNumber(i.x)&&t.isNumber(i.y)&&(this._x*=i.x,this._y*=i.y):(this._x*=i,this._y*=r),this.trigger(e.Events.change))},divide:function(i,r){return arguments.length<=0?this:(arguments.length<=1?t.isNumber(i)?(this._x/=i,this._y/=i):i&&t.isNumber(i.x)&&t.isNumber(i.y)&&(this._x/=i.x,this._y/=i.y):(this._x/=i,this._y/=r),t.isNaN(this._x)&&(this._x=0),t.isNaN(this._y)&&(this._y=0),this.trigger(e.Events.change))},dot:function(e){return this._x*e.x+this._y*e.y},lengthSquared:function(){return this._x*this._x+this._y*this._y},distanceToSquared:function(e){var t=this._x-e.x,i=this._y-e.y;return t*t+i*i},lerp:function(e,t){var i=(e.x-this._x)*t+this._x,r=(e.y-this._y)*t+this._y;return this.set(i,r)},toString:function(){return this._x+", "+this._y},toObject:function(){return{x:this._x,y:this._y}},rotate:function(e){var t=Math.cos(e),i=Math.sin(e);return this._x=this._x*t-this._y*i,this._y=this._x*i+this._y*t,this}},n={enumerable:!0,get:function(){return this._x},set:function(t){this._x=t,this.trigger(e.Events.change,"x")}},s={enumerable:!0,get:function(){return this._y},set:function(t){this._y=t,this.trigger(e.Events.change,"y")}};i.MakeObservable(i.prototype)}((void 0!==e?e:e||self||window).Two),function(e){var t=e.Commands,i=e.Utils,r=e.Anchor=function(r,n,s,a,o,l,h){e.Vector.call(this,r,n),this._broadcast=i.bind((function(){this.trigger(e.Events.change)}),this),this._command=h||t.move,this._relative=!0;var c=i.isNumber(s),d=i.isNumber(a),u=i.isNumber(o),f=i.isNumber(l);(c||d||u||f)&&e.Anchor.AppendCurveProperties(this),c&&(this.controls.left.x=s),d&&(this.controls.left.y=a),u&&(this.controls.right.x=o),f&&(this.controls.right.y=l)};i.extend(e.Anchor,{AppendCurveProperties:function(t){t.relative=!0,t.controls={},t.controls.left=new e.Vector(0,0),t.controls.right=new e.Vector(0,0)},MakeObservable:function(s){Object.defineProperty(s,"command",{enumerable:!0,get:function(){return this._command},set:function(n){return this._command=n,this._command!==t.curve||i.isObject(this.controls)||r.AppendCurveProperties(this),this.trigger(e.Events.change)}}),Object.defineProperty(s,"relative",{enumerable:!0,get:function(){return this._relative},set:function(t){return this._relative==t?this:(this._relative=!!t,this.trigger(e.Events.change))}}),i.extend(s,e.Vector.prototype,n),s.bind=s.on=function(){var t=this._bound;e.Vector.prototype.bind.apply(this,arguments),t||i.extend(this,n)}}});var n={constructor:e.Anchor,listen:function(){return i.isObject(this.controls)||e.Anchor.AppendCurveProperties(this),this.controls.left.bind(e.Events.change,this._broadcast),this.controls.right.bind(e.Events.change,this._broadcast),this},ignore:function(){return this.controls.left.unbind(e.Events.change,this._broadcast),this.controls.right.unbind(e.Events.change,this._broadcast),this},copy:function(t){return this.x=t.x,this.y=t.y,i.isString(t.command)&&(this.command=t.command),i.isObject(t.controls)&&(i.isObject(this.controls)||e.Anchor.AppendCurveProperties(this),this.controls.left.copy(t.controls.left),this.controls.right.copy(t.controls.right)),i.isBoolean(t.relative)&&(this.relative=t.relative),this.command===e.Commands.arc&&(this.rx=t.rx,this.ry=t.ry,this.xAxisRotation=t.xAxisRotation,this.largeArcFlag=t.largeArcFlag,this.sweepFlag=t.sweepFlag),this},clone:function(){var t=this.controls,i=new e.Anchor(this.x,this.y,t&&t.left.x,t&&t.left.y,t&&t.right.x,t&&t.right.y,this.command);return i.relative=this._relative,i},toObject:function(){var e={x:this.x,y:this.y};return this._command&&(e.command=this._command),this._relative&&(e.relative=this._relative),this.controls&&(e.controls={left:this.controls.left.toObject(),right:this.controls.right.toObject()}),e},toString:function(){return this.controls?[this._x,this._y,this.controls.left.x,this.controls.left.y,this.controls.right.x,this.controls.right.y,this._command,this._relative?1:0].join(", "):[this._x,this._y].join(", ")}};e.Anchor.MakeObservable(e.Anchor.prototype)}((void 0!==e?e:e||self||window).Two),function(e){var t=Math.cos,i=Math.sin,r=Math.tan,n=e.Utils,s=[],a=e.Matrix=function(t,i,r,s,a,o){this.elements=new e.Array(9);var l=t;n.isArray(l)||(l=n.toArray(arguments)),this.identity(),l.length>0&&this.set(l)};n.extend(a,{Identity:[1,0,0,0,1,0,0,0,1],Multiply:function(t,i,r){if(i.length<=3){var n=t,s=i[0]||0,a=i[1]||0,o=i[2]||0;return{x:n[0]*s+n[1]*a+n[2]*o,y:n[3]*s+n[4]*a+n[5]*o,z:n[6]*s+n[7]*a+n[8]*o}}var l=t[0],h=t[1],c=t[2],d=t[3],u=t[4],f=t[5],_=t[6],g=t[7],p=t[8],m=i[0],v=i[1],y=i[2],b=i[3],x=i[4],w=i[5],E=i[6],A=i[7],k=i[8];return(r=r||new e.Array(9))[0]=l*m+h*b+c*E,r[1]=l*v+h*x+c*A,r[2]=l*y+h*w+c*k,r[3]=d*m+u*b+f*E,r[4]=d*v+u*x+f*A,r[5]=d*y+u*w+f*k,r[6]=_*m+g*b+p*E,r[7]=_*v+g*x+p*A,r[8]=_*y+g*w+p*k,r}}),n.extend(a.prototype,e.Utils.Events,{constructor:a,manual:!1,set:function(t,i,r,s,a,o,l,h,c){var d;return n.isUndefined(i)&&(t=(d=t)[0],i=d[1],r=d[2],s=d[3],a=d[4],o=d[5],l=d[6],h=d[7],c=d[8]),this.elements[0]=t,this.elements[1]=i,this.elements[2]=r,this.elements[3]=s,this.elements[4]=a,this.elements[5]=o,this.elements[6]=l,this.elements[7]=h,this.elements[8]=c,this.trigger(e.Events.change)},copy:function(t){return this.elements[0]=t.elements[0],this.elements[1]=t.elements[1],this.elements[2]=t.elements[2],this.elements[3]=t.elements[3],this.elements[4]=t.elements[4],this.elements[5]=t.elements[5],this.elements[6]=t.elements[6],this.elements[7]=t.elements[7],this.elements[8]=t.elements[8],this.manual=t.manual,this.trigger(e.Events.change)},identity:function(){return this.elements[0]=a.Identity[0],this.elements[1]=a.Identity[1],this.elements[2]=a.Identity[2],this.elements[3]=a.Identity[3],this.elements[4]=a.Identity[4],this.elements[5]=a.Identity[5],this.elements[6]=a.Identity[6],this.elements[7]=a.Identity[7],this.elements[8]=a.Identity[8],this.trigger(e.Events.change)},multiply:function(t,i,r,s,a,o,l,h,c){if(n.isUndefined(i))return this.elements[0]*=t,this.elements[1]*=t,this.elements[2]*=t,this.elements[3]*=t,this.elements[4]*=t,this.elements[5]*=t,this.elements[6]*=t,this.elements[7]*=t,this.elements[8]*=t,this.trigger(e.Events.change);if(n.isUndefined(s))return t=t||0,i=i||0,r=r||0,{x:(a=this.elements)[0]*t+a[1]*i+a[2]*r,y:a[3]*t+a[4]*i+a[5]*r,z:a[6]*t+a[7]*i+a[8]*r};var d=this.elements,u=[t,i,r,s,a,o,l,h,c],f=d[0],_=d[1],g=d[2],p=d[3],m=d[4],v=d[5],y=d[6],b=d[7],x=d[8],w=u[0],E=u[1],A=u[2],k=u[3],C=u[4],S=u[5],O=u[6],R=u[7],F=u[8];return this.elements[0]=f*w+_*k+g*O,this.elements[1]=f*E+_*C+g*R,this.elements[2]=f*A+_*S+g*F,this.elements[3]=p*w+m*k+v*O,this.elements[4]=p*E+m*C+v*R,this.elements[5]=p*A+m*S+v*F,this.elements[6]=y*w+b*k+x*O,this.elements[7]=y*E+b*C+x*R,this.elements[8]=y*A+b*S+x*F,this.trigger(e.Events.change)},inverse:function(t){var i=this.elements;t=t||new e.Matrix;var r=i[0],n=i[1],s=i[2],a=i[3],o=i[4],l=i[5],h=i[6],c=i[7],d=i[8],u=d*o-l*c,f=-d*a+l*h,_=c*a-o*h,g=r*u+n*f+s*_;return g?(g=1/g,t.elements[0]=u*g,t.elements[1]=(-d*n+s*c)*g,t.elements[2]=(l*n-s*o)*g,t.elements[3]=f*g,t.elements[4]=(d*r-s*h)*g,t.elements[5]=(-l*r+s*a)*g,t.elements[6]=_*g,t.elements[7]=(-c*r+n*h)*g,t.elements[8]=(o*r-n*a)*g,t):null},scale:function(e,t){var i=arguments.length;return i<=1&&(t=e),this.multiply(e,0,0,0,t,0,0,0,1)},rotate:function(e){var r=t(e),n=i(e);return this.multiply(r,-n,0,n,r,0,0,0,1)},translate:function(e,t){return this.multiply(1,0,e,0,1,t,0,0,1)},skewX:function(e){var t=r(e);return this.multiply(1,t,0,0,1,0,0,0,1)},skewY:function(e){var t=r(e);return this.multiply(1,0,0,t,1,0,0,0,1)},toString:function(t){return s.length=0,this.toTransformArray(t,s),s.map(e.Utils.toFixed).join(" ")},toTransformArray:function(e,t){var i=this.elements,r=!!t,n=i[0],s=i[1],a=i[2],o=i[3],l=i[4],h=i[5];if(e){var c=i[6],d=i[7],u=i[8];return r?(t[0]=n,t[1]=o,t[2]=c,t[3]=s,t[4]=l,t[5]=d,t[6]=a,t[7]=h,void(t[8]=u)):[n,o,c,s,l,d,a,h,u]}return r?(t[0]=n,t[1]=o,t[2]=s,t[3]=l,t[4]=a,void(t[5]=h)):[n,o,s,l,a,h]},toArray:function(e,t){var i=this.elements,r=!!t,n=i[0],s=i[1],a=i[2],o=i[3],l=i[4],h=i[5];if(e){var c=i[6],d=i[7],u=i[8];return r?(t[0]=n,t[1]=s,t[2]=a,t[3]=o,t[4]=l,t[5]=h,t[6]=c,t[7]=d,void(t[8]=u)):[n,s,a,o,l,h,c,d,u]}return r?(t[0]=n,t[1]=s,t[2]=a,t[3]=o,t[4]=l,void(t[5]=h)):[n,s,a,o,l,h]},toObject:function(){return{elements:this.toArray(!0),manual:!!this.manual}},clone:function(){return(new e.Matrix).copy(this)}})}((void 0!==e?e:e||self||window).Two),function(e){var t=e.Utils.mod,i=e.Utils.toFixed,r=e.Utils,n={version:1.1,ns:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",alignments:{left:"start",center:"middle",right:"end"},createElement:function(e,t){var i=e,s=document.createElementNS(n.ns,i);return"svg"===i&&(t=r.defaults(t||{},{version:n.version})),r.isEmpty(t)||n.setAttributes(s,t),s},setAttributes:function(e,t){for(var i=Object.keys(t),r=0;r<i.length;r++)/href/.test(i[r])?e.setAttributeNS(n.xlink,i[r],t[i[r]]):e.setAttribute(i[r],t[i[r]]);return this},removeAttributes:function(e,t){for(var i in t)e.removeAttribute(i);return this},toString:function(r,n){for(var s,a=r.length,o=a-1,l="",h=0;h<a;h++){var c,d,u,f,_,g,p,m,v,y,b,x,w,E,A=r[h],k=n?t(h-1,a):Math.max(h-1,0),C=n?t(h+1,a):Math.min(h+1,o),S=r[k],O=r[C],R=i(A.x),F=i(A.y);switch(A.command){case e.Commands.close:c=e.Commands.close;break;case e.Commands.arc:y=A.rx,b=A.ry,x=A.xAxisRotation,w=A.largeArcFlag,E=A.sweepFlag,c=e.Commands.arc+" "+y+" "+b+" "+x+" "+w+" "+E+" "+R+" "+F;break;case e.Commands.curve:g=S.controls&&S.controls.right||e.Vector.zero,p=A.controls&&A.controls.left||e.Vector.zero,S.relative?(d=i(g.x+S.x),u=i(g.y+S.y)):(d=i(g.x),u=i(g.y)),A.relative?(f=i(p.x+A.x),_=i(p.y+A.y)):(f=i(p.x),_=i(p.y)),c=(0===h?e.Commands.move:e.Commands.curve)+" "+d+" "+u+" "+f+" "+_+" "+R+" "+F;break;case e.Commands.move:s=A,c=e.Commands.move+" "+R+" "+F;break;default:c=A.command+" "+R+" "+F}h>=o&&n&&(A.command===e.Commands.curve&&(O=s,m=A.controls&&A.controls.right||A,v=O.controls&&O.controls.left||O,A.relative?(d=i(m.x+A.x),u=i(m.y+A.y)):(d=i(m.x),u=i(m.y)),O.relative?(f=i(v.x+O.x),_=i(v.y+O.y)):(f=i(v.x),_=i(v.y)),c+=" C "+d+" "+u+" "+f+" "+_+" "+(R=i(O.x))+" "+(F=i(O.y))),A.command!==e.Commands.close&&(c+=" Z")),l+=c+" "}return l},getClip:function(e){var t=e._renderer.clip;if(!t){for(var i=e;i.parent;)i=i.parent;t=e._renderer.clip=n.createElement("clipPath"),i.defs.appendChild(t)}return t},group:{appendChild:function(e){var t=e._renderer.elem;if(t){var i=t.nodeName;!i||/(radial|linear)gradient/i.test(i)||e._clip||this.elem.appendChild(t)}},removeChild:function(e){var t=e._renderer.elem;t&&t.parentNode==this.elem&&(t.nodeName&&(e._clip||this.elem.removeChild(t)))},orderChild:function(e){this.elem.appendChild(e._renderer.elem)},renderChild:function(e){n[e._renderer.type].render.call(e,this)},render:function(e){if(this._update(),0===this._opacity&&!this._flagOpacity)return this;this._renderer.elem||(this._renderer.elem=n.createElement("g",{id:this.id}),e.appendChild(this._renderer.elem));var t=this._matrix.manual||this._flagMatrix,i={domElement:e,elem:this._renderer.elem};t&&this._renderer.elem.setAttribute("transform","matrix("+this._matrix.toString()+")");for(var r=0;r<this.children.length;r++){var s=this.children[r];n[s._renderer.type].render.call(s,e)}return this._flagOpacity&&this._renderer.elem.setAttribute("opacity",this._opacity),this._flagClassName&&this._renderer.elem.setAttribute("class",this.classList.join(" ")),this._flagAdditions&&this.additions.forEach(n.group.appendChild,i),this._flagSubtractions&&this.subtractions.forEach(n.group.removeChild,i),this._flagOrder&&this.children.forEach(n.group.orderChild,i),this._flagMask&&(this._mask?this._renderer.elem.setAttribute("clip-path","url(#"+this._mask.id+")"):this._renderer.elem.removeAttribute("clip-path")),this.flagReset()}},path:{render:function(e){if(this._update(),0===this._opacity&&!this._flagOpacity)return this;var t={};if((this._matrix.manual||this._flagMatrix)&&(t.transform="matrix("+this._matrix.toString()+")"),this._flagVertices){var i=n.toString(this._renderer.vertices,this._closed);t.d=i}if(this._fill&&this._fill._renderer&&(this._fill._update(),n[this._fill._renderer.type].render.call(this._fill,e,!0)),this._flagFill&&(t.fill=this._fill&&this._fill.id?"url(#"+this._fill.id+")":this._fill),this._stroke&&this._stroke._renderer&&(this._stroke._update(),n[this._stroke._renderer.type].render.call(this._stroke,e,!0)),this._flagStroke&&(t.stroke=this._stroke&&this._stroke.id?"url(#"+this._stroke.id+")":this._stroke),this._flagLinewidth&&(t["stroke-width"]=this._linewidth),this._flagOpacity&&(t["stroke-opacity"]=this._opacity,t["fill-opacity"]=this._opacity),this._flagClassName&&(t.class=this.classList.join(" ")),this._flagVisible&&(t.visibility=this._visible?"visible":"hidden"),this._flagCap&&(t["stroke-linecap"]=this._cap),this._flagJoin&&(t["stroke-linejoin"]=this._join),this._flagMiter&&(t["stroke-miterlimit"]=this._miter),this.dashes&&this.dashes.length>0&&(t["stroke-dasharray"]=this.dashes.join(" "),t["stroke-dashoffset"]=this.dashes.offset||0),this._renderer.elem?n.setAttributes(this._renderer.elem,t):(t.id=this.id,this._renderer.elem=n.createElement("path",t),e.appendChild(this._renderer.elem)),this._flagClip){var r=n.getClip(this),s=this._renderer.elem;this._clip?(s.removeAttribute("id"),r.setAttribute("id",this.id),r.appendChild(s)):(r.removeAttribute("id"),s.setAttribute("id",this.id),this.parent._renderer.elem.appendChild(s))}return this.flagReset()}},text:{render:function(e){this._update();var t={};if((this._matrix.manual||this._flagMatrix)&&(t.transform="matrix("+this._matrix.toString()+")"),this._flagFamily&&(t["font-family"]=this._family),this._flagSize&&(t["font-size"]=this._size),this._flagLeading&&(t["line-height"]=this._leading),this._flagAlignment&&(t["text-anchor"]=n.alignments[this._alignment]||this._alignment),this._flagBaseline&&(t["alignment-baseline"]=t["dominant-baseline"]=this._baseline),this._flagStyle&&(t["font-style"]=this._style),this._flagWeight&&(t["font-weight"]=this._weight),this._flagDecoration&&(t["text-decoration"]=this._decoration),this._fill&&this._fill._renderer&&(this._fill._update(),n[this._fill._renderer.type].render.call(this._fill,e,!0)),this._flagFill&&(t.fill=this._fill&&this._fill.id?"url(#"+this._fill.id+")":this._fill),this._stroke&&this._stroke._renderer&&(this._stroke._update(),n[this._stroke._renderer.type].render.call(this._stroke,e,!0)),this._flagStroke&&(t.stroke=this._stroke&&this._stroke.id?"url(#"+this._stroke.id+")":this._stroke),this._flagLinewidth&&(t["stroke-width"]=this._linewidth),this._flagOpacity&&(t.opacity=this._opacity),this._flagClassName&&(t.class=this.classList.join(" ")),this._flagVisible&&(t.visibility=this._visible?"visible":"hidden"),this.dashes&&this.dashes.length>0&&(t["stroke-dasharray"]=this.dashes.join(" "),t["stroke-dashoffset"]=this.dashes.offset||0),this._renderer.elem?n.setAttributes(this._renderer.elem,t):(t.id=this.id,this._renderer.elem=n.createElement("text",t),e.defs.appendChild(this._renderer.elem)),this._flagClip){var i=n.getClip(this),r=this._renderer.elem;this._clip?(r.removeAttribute("id"),i.setAttribute("id",this.id),i.appendChild(r)):(i.removeAttribute("id"),r.setAttribute("id",this.id),this.parent._renderer.elem.appendChild(r))}return this._flagValue&&(this._renderer.elem.textContent=this._value),this.flagReset()}},"linear-gradient":{render:function(e,t){t||this._update();var i={};if(this._flagEndPoints&&(i.x1=this.left._x,i.y1=this.left._y,i.x2=this.right._x,i.y2=this.right._y),this._flagSpread&&(i.spreadMethod=this._spread),this._renderer.elem?n.setAttributes(this._renderer.elem,i):(i.id=this.id,i.gradientUnits="userSpaceOnUse",this._renderer.elem=n.createElement("linearGradient",i),e.defs.appendChild(this._renderer.elem)),this._flagStops){var r=this._renderer.elem.childNodes.length!==this.stops.length;if(r)for(;this._renderer.elem.lastChild;)this._renderer.elem.removeChild(this._renderer.elem.lastChild);for(var s=0;s<this.stops.length;s++){var a=this.stops[s],o={};a._flagOffset&&(o.offset=100*a._offset+"%"),a._flagColor&&(o["stop-color"]=a._color),a._flagOpacity&&(o["stop-opacity"]=a._opacity),a._renderer.elem?n.setAttributes(a._renderer.elem,o):a._renderer.elem=n.createElement("stop",o),r&&this._renderer.elem.appendChild(a._renderer.elem),a.flagReset()}}return this.flagReset()}},"radial-gradient":{render:function(e,t){t||this._update();var i={};if(this._flagCenter&&(i.cx=this.center._x,i.cy=this.center._y),this._flagFocal&&(i.fx=this.focal._x,i.fy=this.focal._y),this._flagRadius&&(i.r=this._radius),this._flagSpread&&(i.spreadMethod=this._spread),this._renderer.elem?n.setAttributes(this._renderer.elem,i):(i.id=this.id,i.gradientUnits="userSpaceOnUse",this._renderer.elem=n.createElement("radialGradient",i),e.defs.appendChild(this._renderer.elem)),this._flagStops){var r=this._renderer.elem.childNodes.length!==this.stops.length;if(r)for(;this._renderer.elem.lastChild;)this._renderer.elem.removeChild(this._renderer.elem.lastChild);for(var s=0;s<this.stops.length;s++){var a=this.stops[s],o={};a._flagOffset&&(o.offset=100*a._offset+"%"),a._flagColor&&(o["stop-color"]=a._color),a._flagOpacity&&(o["stop-opacity"]=a._opacity),a._renderer.elem?n.setAttributes(a._renderer.elem,o):a._renderer.elem=n.createElement("stop",o),r&&this._renderer.elem.appendChild(a._renderer.elem),a.flagReset()}}return this.flagReset()}},texture:{render:function(t,i){i||this._update();var s={},a={x:0,y:0},o=this.image;if(this._flagLoaded&&this.loaded)switch(o.nodeName.toLowerCase()){case"canvas":a.href=a["xlink:href"]=o.toDataURL("image/png");break;case"img":case"image":a.href=a["xlink:href"]=this.src}if((this._flagOffset||this._flagLoaded||this._flagScale)&&(s.x=this._offset.x,s.y=this._offset.y,o&&(s.x-=o.width/2,s.y-=o.height/2,this._scale instanceof e.Vector?(s.x*=this._scale.x,s.y*=this._scale.y):(s.x*=this._scale,s.y*=this._scale)),s.x>0&&(s.x*=-1),s.y>0&&(s.y*=-1)),(this._flagScale||this._flagLoaded||this._flagRepeat)&&(s.width=0,s.height=0,o)){switch(a.width=s.width=o.width,a.height=s.height=o.height,this._repeat){case"no-repeat":s.width+=1,s.height+=1}this._scale instanceof e.Vector?(s.width*=this._scale.x,s.height*=this._scale.y):(s.width*=this._scale,s.height*=this._scale)}return(this._flagScale||this._flagLoaded)&&(this._renderer.image?r.isEmpty(a)||n.setAttributes(this._renderer.image,a):this._renderer.image=n.createElement("image",a)),this._renderer.elem?r.isEmpty(s)||n.setAttributes(this._renderer.elem,s):(s.id=this.id,s.patternUnits="userSpaceOnUse",this._renderer.elem=n.createElement("pattern",s),t.defs.appendChild(this._renderer.elem)),this._renderer.elem&&this._renderer.image&&!this._renderer.appended&&(this._renderer.elem.appendChild(this._renderer.image),this._renderer.appended=!0),this.flagReset()}}},s=e[e.Types.svg]=function(t){this.domElement=t.domElement||n.createElement("svg"),this.scene=new e.Group,this.scene.parent=this,this.defs=n.createElement("defs"),this.domElement.appendChild(this.defs),this.domElement.defs=this.defs,this.domElement.style.overflow="hidden"};r.extend(s,{Utils:n}),r.extend(s.prototype,e.Utils.Events,{constructor:s,setSize:function(t,i){return this.width=t,this.height=i,n.setAttributes(this.domElement,{width:t,height:i}),this.trigger(e.Events.resize,t,i)},render:function(){return n.group.render.call(this.scene,this.domElement),this}})}((void 0!==e?e:e||self||window).Two),function(e){var t=e.Utils.mod,i=e.Utils.getRatio,r=e.Utils,n=[],s=2*Math.PI,a=Math.max,o=Math.min,l=Math.abs,h=Math.sin,c=Math.cos,d=Math.acos,u=Math.sqrt,f=function(e){return 1==e[0]&&0==e[3]&&0==e[1]&&1==e[4]&&0==e[2]&&0==e[5]},_={isHidden:/(undefined|none|transparent)/i,alignments:{left:"start",middle:"center",right:"end"},shim:function(e,t){return e.tagName=e.nodeName=t||"canvas",e.nodeType=1,e.getAttribute=function(e){return this[e]},e.setAttribute=function(e,t){return this[e]=t,this},e},group:{renderChild:function(e){_[e._renderer.type].render.call(e,this.ctx,!0,this.clip)},render:function(e){this._update();var t=this._matrix.elements,i=this.parent;this._renderer.opacity=this._opacity*(i&&i._renderer?i._renderer.opacity:1);var r=this._mask,n=f(t),s=!n||!!r;if(this._renderer.context||(this._renderer.context={}),this._renderer.context.ctx=e,s&&(e.save(),n||e.transform(t[0],t[3],t[1],t[4],t[2],t[5])),r&&_[r._renderer.type].render.call(r,e,!0),this.opacity>0&&0!==this.scale)for(var a=0;a<this.children.length;a++){var o=this.children[a];_[o._renderer.type].render.call(o,e)}return s&&e.restore(),this.flagReset()}},path:{render:function(i,s,o){var l,h,c,d,u,g,p,m,v,y,b,x,w,E,A,k,C,S,O,R,F,M,T,P,L,U,N,j,V,B,I,G,z;if(this._update(),l=this._matrix.elements,h=this._stroke,c=this._linewidth,d=this._fill,u=this._opacity*this.parent._renderer.opacity,g=this._visible,p=this._cap,m=this._join,v=this._miter,y=this._closed,w=(x=(b=this._renderer.vertices).length)-1,I=f(l),z=this.dashes,B=this._clip,!s&&(!g||B))return this;I||(i.save(),i.transform(l[0],l[3],l[1],l[4],l[2],l[5])),d&&(r.isString(d)?i.fillStyle=d:(_[d._renderer.type].render.call(d,i),i.fillStyle=d._renderer.effect)),h&&(r.isString(h)?i.strokeStyle=h:(_[h._renderer.type].render.call(h,i),i.strokeStyle=h._renderer.effect),c&&(i.lineWidth=c),v&&(i.miterLimit=v),m&&(i.lineJoin=m),!y&&p&&(i.lineCap=p)),r.isNumber(u)&&(i.globalAlpha=u),z&&z.length>0&&(i.lineDashOffset=z.offset||0,i.setLineDash(z)),i.beginPath();for(var D=0;D<b.length;D++)switch(j=(C=b[D]).x,V=C.y,C.command){case e.Commands.close:i.closePath();break;case e.Commands.arc:var H=C.rx,W=C.ry,X=C.xAxisRotation,q=C.largeArcFlag,Y=C.sweepFlag,K=(k=b[A=y?t(D-1,x):a(D-1,0)]).x,J=k.y;_.renderSvgArcCommand(i,K,J,H,W,q,Y,X,j,V);break;case e.Commands.curve:A=y?t(D-1,x):Math.max(D-1,0),E=y?t(D+1,x):Math.min(D+1,w),k=b[A],S=b[E],P=k.controls&&k.controls.right||e.Vector.zero,L=C.controls&&C.controls.left||e.Vector.zero,k._relative?(M=P.x+k.x,T=P.y+k.y):(M=P.x,T=P.y),C._relative?(R=L.x+C.x,F=L.y+C.y):(R=L.x,F=L.y),i.bezierCurveTo(M,T,R,F,j,V),D>=w&&y&&(S=O,U=C.controls&&C.controls.right||e.Vector.zero,N=S.controls&&S.controls.left||e.Vector.zero,C._relative?(M=U.x+C.x,T=U.y+C.y):(M=U.x,T=U.y),S._relative?(R=N.x+S.x,F=N.y+S.y):(R=N.x,F=N.y),j=S.x,V=S.y,i.bezierCurveTo(M,T,R,F,j,V));break;case e.Commands.line:i.lineTo(j,V);break;case e.Commands.move:O=C,i.moveTo(j,V)}return y&&i.closePath(),B||o||(_.isHidden.test(d)||((G=d._renderer&&d._renderer.offset)&&(i.save(),i.translate(-d._renderer.offset.x,-d._renderer.offset.y),i.scale(d._renderer.scale.x,d._renderer.scale.y)),i.fill(),G&&i.restore()),_.isHidden.test(h)||((G=h._renderer&&h._renderer.offset)&&(i.save(),i.translate(-h._renderer.offset.x,-h._renderer.offset.y),i.scale(h._renderer.scale.x,h._renderer.scale.y),i.lineWidth=c/h._renderer.scale.x),i.stroke(),G&&i.restore())),I||i.restore(),B&&!o&&i.clip(),z&&z.length>0&&i.setLineDash(n),this.flagReset()}},text:{render:function(e,t,i){this._update();var s,a,o,l,h,c,d,u=this._matrix.elements,g=this._stroke,p=this._linewidth,m=this._fill,v=this._opacity*this.parent._renderer.opacity,y=this._visible,b=f(u),x=m._renderer&&m._renderer.offset&&g._renderer&&g._renderer.offset,w=this.dashes,E=this._clip;return t||y&&!E?(b||(e.save(),e.transform(u[0],u[3],u[1],u[4],u[2],u[5])),x||(e.font=[this._style,this._weight,this._size+"px/"+this._leading+"px",this._family].join(" ")),e.textAlign=_.alignments[this._alignment]||this._alignment,e.textBaseline=this._baseline,m&&(r.isString(m)?e.fillStyle=m:(_[m._renderer.type].render.call(m,e),e.fillStyle=m._renderer.effect)),g&&(r.isString(g)?e.strokeStyle=g:(_[g._renderer.type].render.call(g,e),e.strokeStyle=g._renderer.effect),p&&(e.lineWidth=p)),r.isNumber(v)&&(e.globalAlpha=v),w&&w.length>0&&(e.lineDashOffset=w.offset||0,e.setLineDash(w)),E||i||(_.isHidden.test(m)||(m._renderer&&m._renderer.offset?(c=m._renderer.scale.x,d=m._renderer.scale.y,e.save(),e.translate(-m._renderer.offset.x,-m._renderer.offset.y),e.scale(c,d),s=this._size/m._renderer.scale.y,a=this._leading/m._renderer.scale.y,e.font=[this._style,this._weight,s+"px/",a+"px",this._family].join(" "),o=m._renderer.offset.x/m._renderer.scale.x,l=m._renderer.offset.y/m._renderer.scale.y,e.fillText(this.value,o,l),e.restore()):e.fillText(this.value,0,0)),_.isHidden.test(g)||(g._renderer&&g._renderer.offset?(c=g._renderer.scale.x,d=g._renderer.scale.y,e.save(),e.translate(-g._renderer.offset.x,-g._renderer.offset.y),e.scale(c,d),s=this._size/g._renderer.scale.y,a=this._leading/g._renderer.scale.y,e.font=[this._style,this._weight,s+"px/",a+"px",this._family].join(" "),o=g._renderer.offset.x/g._renderer.scale.x,l=g._renderer.offset.y/g._renderer.scale.y,h=p/g._renderer.scale.x,e.lineWidth=h,e.strokeText(this.value,o,l),e.restore()):e.strokeText(this.value,0,0))),b||e.restore(),E&&!i&&e.clip(),w&&w.length>0&&e.setLineDash(n),this.flagReset()):this}},"linear-gradient":{render:function(e){if(this._update(),!this._renderer.effect||this._flagEndPoints||this._flagStops){this._renderer.effect=e.createLinearGradient(this.left._x,this.left._y,this.right._x,this.right._y);for(var t=0;t<this.stops.length;t++){var i=this.stops[t];this._renderer.effect.addColorStop(i._offset,i._color)}}return this.flagReset()}},"radial-gradient":{render:function(e){if(this._update(),!this._renderer.effect||this._flagCenter||this._flagFocal||this._flagRadius||this._flagStops){this._renderer.effect=e.createRadialGradient(this.center._x,this.center._y,0,this.focal._x,this.focal._y,this._radius);for(var t=0;t<this.stops.length;t++){var i=this.stops[t];this._renderer.effect.addColorStop(i._offset,i._color)}}return this.flagReset()}},texture:{render:function(t){this._update();var i=this.image;return(!this._renderer.effect||(this._flagLoaded||this._flagImage||this._flagVideo||this._flagRepeat)&&this.loaded)&&(this._renderer.effect=t.createPattern(this.image,this._repeat)),(this._flagOffset||this._flagLoaded||this._flagScale)&&(this._renderer.offset instanceof e.Vector||(this._renderer.offset=new e.Vector),this._renderer.offset.x=-this._offset.x,this._renderer.offset.y=-this._offset.y,i&&(this._renderer.offset.x+=i.width/2,this._renderer.offset.y+=i.height/2,this._scale instanceof e.Vector?(this._renderer.offset.x*=this._scale.x,this._renderer.offset.y*=this._scale.y):(this._renderer.offset.x*=this._scale,this._renderer.offset.y*=this._scale))),(this._flagScale||this._flagLoaded)&&(this._renderer.scale instanceof e.Vector||(this._renderer.scale=new e.Vector),this._scale instanceof e.Vector?this._renderer.scale.copy(this._scale):this._renderer.scale.set(this._scale,this._scale)),this.flagReset()}},renderSvgArcCommand:function(i,r,n,o,d,f,_,g,m,v){g=g*Math.PI/180,o=l(o),d=l(d);var y=(r-m)/2,b=(n-v)/2,x=c(g)*y+h(g)*b,w=-h(g)*y+c(g)*b,E=o*o,A=d*d,k=x*x,C=w*w,S=k/E+C/A;if(S>1){var O=u(S);E=(o*=O)*o,A=(d*=O)*d}var R=E*C+A*k,F=u(a(0,(E*A-R)/R));f===_&&(F=-F);var M=F*o*w/d,T=-F*d*x/o,P=c(g)*M-h(g)*T+(r+m)/2,L=h(g)*M+c(g)*T+(n+v)/2,U=p(1,0,(x-M)/o,(w-T)/d);!function(i,r,n,a,o,l,h,c,d){var u=e.Utils.Curve.Tolerance.epsilon,f=h-l,_=Math.abs(f)<u;(f=t(f,s))<u&&(f=_?0:s);!0!==c||_||(f===s?f=-s:f-=s);for(var g=0;g<e.Resolution;g++){var p=g/(e.Resolution-1),m=l+p*f,v=r+a*Math.cos(m),y=n+o*Math.sin(m);if(0!==d){var b=Math.cos(d),x=Math.sin(d),w=v-r,E=y-n;v=w*b-E*x+r,y=w*x+E*b+n}i.lineTo(v,y)}}(i,P,L,o,d,U,U+p((x-M)/o,(w-T)/d,(-x-M)/o,(-w-T)/d)%s,0===_,g)}},g=e[e.Types.canvas]=function(t){var i=!1!==t.smoothing;this.domElement=t.domElement||document.createElement("canvas"),this.ctx=this.domElement.getContext("2d"),this.overdraw=t.overdraw||!1,r.isUndefined(this.ctx.imageSmoothingEnabled)||(this.ctx.imageSmoothingEnabled=i),this.scene=new e.Group,this.scene.parent=this};function p(e,t,i,r){var n=e*i+t*r,s=u(e*e+t*t)*u(i*i+r*r),l=d(a(-1,o(1,n/s)));return e*r-t*i<0&&(l=-l),l}r.extend(g,{Utils:_}),r.extend(g.prototype,e.Utils.Events,{constructor:g,setSize:function(t,n,s){return this.width=t,this.height=n,this.ratio=r.isUndefined(s)?i(this.ctx):s,this.domElement.width=t*this.ratio,this.domElement.height=n*this.ratio,this.domElement.style&&r.extend(this.domElement.style,{width:t+"px",height:n+"px"}),this.trigger(e.Events.resize,t,n,s)},render:function(){var e=1===this.ratio;return e||(this.ctx.save(),this.ctx.scale(this.ratio,this.ratio)),this.overdraw||this.ctx.clearRect(0,0,this.width,this.height),_.group.render.call(this.scene,this.ctx),e||this.ctx.restore(),this}})}((void 0!==e?e:e||self||window).Two),function(e){var t=e.root,i=e.Matrix.Multiply,r=e.Utils.mod,n=[1,0,0,0,1,0,0,0,1],s=new e.Array(9),a=e.Utils.getRatio,o=(e.Utils.getComputedMatrix,e[e.Types.canvas].Utils),l=e.Utils,h={isHidden:/(undefined|none|transparent)/i,canvas:t.document?t.document.createElement("canvas"):{getContext:l.identity},alignments:{left:"start",middle:"center",right:"end"},matrix:new e.Matrix,group:{removeChild:function(e,t){if(e.children)for(var i=0;i<e.children.length;i++)h.group.removeChild(e.children[i],t);else t.deleteTexture(e._renderer.texture),delete e._renderer.texture},render:function(t,r){this._update();var n,a=this.parent,o=a._matrix&&a._matrix.manual||a._flagMatrix,l=this._matrix.manual||this._flagMatrix;if((o||l)&&(this._renderer.matrix||(this._renderer.matrix=new e.Array(9)),this._matrix.toTransformArray(!0,s),i(s,a._renderer.matrix,this._renderer.matrix),this._renderer.scale instanceof e.Vector||(this._renderer.scale=new e.Vector),this._scale instanceof e.Vector?(this._renderer.scale.x=this._scale.x,this._renderer.scale.y=this._scale.y):(this._renderer.scale.x=this._scale,this._renderer.scale.y=this._scale),/renderer/i.test(a._renderer.type)||(this._renderer.scale.x*=a._renderer.scale.x,this._renderer.scale.y*=a._renderer.scale.y),o&&(this._flagMatrix=!0)),this._mask&&(t.clear(t.STENCIL_BUFFER_BIT),t.enable(t.STENCIL_TEST),t.stencilFunc(t.ALWAYS,1,0),t.stencilOp(t.KEEP,t.KEEP,t.REPLACE),h[this._mask._renderer.type].render.call(this._mask,t,r,this),t.stencilFunc(t.EQUAL,1,255),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)),this._flagOpacity=a._flagOpacity||this._flagOpacity,this._renderer.opacity=this._opacity*(a&&a._renderer?a._renderer.opacity:1),this._flagSubtractions)for(n=0;n<this.subtractions.length;n++)h.group.removeChild(this.subtractions[n],t);for(n=0;n<this.children.length;n++){var c=this.children[n];h[c._renderer.type].render.call(c,t,r)}return this._mask&&t.disable(t.STENCIL_TEST),this.flagReset()}},path:{updateCanvas:function(t){var i,n,s,a,c,d,u,f,_,g,p,m,v,y,b,x=t._renderer.vertices,w=this.canvas,E=this.ctx,A=t._renderer.scale,k=t._stroke,C=t._linewidth,S=t._fill,O=t._renderer.opacity||t._opacity,R=t._cap,F=t._join,M=t._miter,T=t._closed,P=t.dashes,L=x.length,U=L-1;w.width=Math.max(Math.ceil(t._renderer.rect.width*A.x),1),w.height=Math.max(Math.ceil(t._renderer.rect.height*A.y),1);var N,j=t._renderer.rect.centroid,V=j.x,B=j.y;E.clearRect(0,0,w.width,w.height),S&&(l.isString(S)?E.fillStyle=S:(h[S._renderer.type].render.call(S,E,t),E.fillStyle=S._renderer.effect)),k&&(l.isString(k)?E.strokeStyle=k:(h[k._renderer.type].render.call(k,E,t),E.strokeStyle=k._renderer.effect),C&&(E.lineWidth=C),M&&(E.miterLimit=M),F&&(E.lineJoin=F),!T&&R&&(E.lineCap=R)),l.isNumber(O)&&(E.globalAlpha=O),P&&P.length>0&&(E.lineDashOffset=P.offset||0,E.setLineDash(P)),E.save(),E.scale(A.x,A.y),E.translate(V,B),E.beginPath();for(var I=0;I<x.length;I++){var G=x[I];switch(v=G.x,y=G.y,G.command){case e.Commands.close:E.closePath();break;case e.Commands.arc:var z=G.rx,D=G.ry,H=G.xAxisRotation,W=G.largeArcFlag,X=G.sweepFlag,q=(s=x[n=T?r(I-1,L):Math.max(I-1,0)]).x,Y=s.y;o.renderSvgArcCommand(E,q,Y,z,D,W,X,H,v,y);break;case e.Commands.curve:n=T?r(I-1,L):Math.max(I-1,0),i=T?r(I+1,L):Math.min(I+1,U),s=x[n],a=x[i],_=s.controls&&s.controls.right||e.Vector.zero,g=G.controls&&G.controls.left||e.Vector.zero,s._relative?(u=_.x+s.x,f=_.y+s.y):(u=_.x,f=_.y),G._relative?(c=g.x+G.x,d=g.y+G.y):(c=g.x,d=g.y),E.bezierCurveTo(u,f,c,d,v,y),I>=U&&T&&(a=N,p=G.controls&&G.controls.right||e.Vector.zero,m=a.controls&&a.controls.left||e.Vector.zero,G._relative?(u=p.x+G.x,f=p.y+G.y):(u=p.x,f=p.y),a._relative?(c=m.x+a.x,d=m.y+a.y):(c=m.x,d=m.y),v=a.x,y=a.y,E.bezierCurveTo(u,f,c,d,v,y));break;case e.Commands.line:E.lineTo(v,y);break;case e.Commands.move:N=G,E.moveTo(v,y)}}T&&E.closePath(),h.isHidden.test(S)||((b=S._renderer&&S._renderer.offset)&&(E.save(),E.translate(-S._renderer.offset.x,-S._renderer.offset.y),E.scale(S._renderer.scale.x,S._renderer.scale.y)),E.fill(),b&&E.restore()),h.isHidden.test(k)||((b=k._renderer&&k._renderer.offset)&&(E.save(),E.translate(-k._renderer.offset.x,-k._renderer.offset.y),E.scale(k._renderer.scale.x,k._renderer.scale.y),E.lineWidth=C/k._renderer.scale.x),E.stroke(),b&&E.restore()),E.restore()},getBoundingClientRect:function(e,t,i){var r,n,s=1/0,a=-1/0,o=1/0,h=-1/0;e.forEach((function(e){var t,i,r,n,l,c,d=e.x,u=e.y,f=e.controls;o=Math.min(u,o),s=Math.min(d,s),a=Math.max(d,a),h=Math.max(u,h),e.controls&&(l=f.left,c=f.right,l&&c&&(t=e._relative?l.x+d:l.x,i=e._relative?l.y+u:l.y,r=e._relative?c.x+d:c.x,n=e._relative?c.y+u:c.y,t&&i&&r&&n&&(o=Math.min(i,n,o),s=Math.min(t,r,s),a=Math.max(t,r,a),h=Math.max(i,n,h))))})),l.isNumber(t)&&(o-=t,s-=t,a+=t,h+=t),r=a-s,n=h-o,i.top=o,i.left=s,i.right=a,i.bottom=h,i.width=r,i.height=n,i.centroid||(i.centroid={}),i.centroid.x=-s,i.centroid.y=-o},render:function(t,r,n){if(!this._visible||!this._opacity)return this;this._update();var a=this.parent,o=a._matrix.manual||a._flagMatrix,l=this._matrix.manual||this._flagMatrix,c=this._flagVertices||this._flagFill||this._fill instanceof e.LinearGradient&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagEndPoints)||this._fill instanceof e.RadialGradient&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagRadius||this._fill._flagCenter||this._fill._flagFocal)||this._fill instanceof e.Texture&&(this._fill._flagLoaded&&this._fill.loaded||this._fill._flagImage||this._fill._flagVideo||this._fill._flagRepeat||this._fill._flagOffset||this._fill._flagScale)||this._stroke instanceof e.LinearGradient&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagEndPoints)||this._stroke instanceof e.RadialGradient&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagRadius||this._stroke._flagCenter||this._stroke._flagFocal)||this._stroke instanceof e.Texture&&(this._stroke._flagLoaded&&this._stroke.loaded||this._stroke._flagImage||this._stroke._flagVideo||this._stroke._flagRepeat||this._stroke._flagOffset||this._fill._flagScale)||this._flagStroke||this._flagLinewidth||this._flagOpacity||a._flagOpacity||this._flagVisible||this._flagCap||this._flagJoin||this._flagMiter||this._flagScale||this.dashes&&this.dashes.length>0||!this._renderer.texture;if((o||l)&&(this._renderer.matrix||(this._renderer.matrix=new e.Array(9)),this._matrix.toTransformArray(!0,s),i(s,a._renderer.matrix,this._renderer.matrix),this._renderer.scale instanceof e.Vector||(this._renderer.scale=new e.Vector),this._scale instanceof e.Vector?(this._renderer.scale.x=this._scale.x*a._renderer.scale.x,this._renderer.scale.y=this._scale.y*a._renderer.scale.y):(this._renderer.scale.x=this._scale*a._renderer.scale.x,this._renderer.scale.y=this._scale*a._renderer.scale.y)),c?(this._renderer.rect||(this._renderer.rect={}),this._renderer.opacity=this._opacity*a._renderer.opacity,h.path.getBoundingClientRect(this._renderer.vertices,this._linewidth,this._renderer.rect),h.updateTexture.call(h,t,this)):(this._fill&&this._fill._update&&this._fill._update(),this._stroke&&this._stroke._update&&this._stroke._update()),!this._clip||n){t.bindTexture(t.TEXTURE_2D,this._renderer.texture);var d=this._renderer.rect;return t.uniformMatrix3fv(r.matrix,!1,this._renderer.matrix),t.uniform4f(r.rect,d.left,d.top,d.right,d.bottom),t.drawArrays(t.TRIANGLES,0,6),this.flagReset()}}},text:{updateCanvas:function(e){var t=this.canvas,i=this.ctx,r=e._renderer.scale,n=e._stroke,s=e._linewidth*r,a=e._fill,o=e._renderer.opacity||e._opacity,c=e.dashes;t.width=Math.max(Math.ceil(e._renderer.rect.width*r.x),1),t.height=Math.max(Math.ceil(e._renderer.rect.height*r.y),1);var d,u,f,_,g,p,m,v=e._renderer.rect.centroid,y=v.x,b=v.y,x=a._renderer&&a._renderer.offset&&n._renderer&&n._renderer.offset;i.clearRect(0,0,t.width,t.height),x||(i.font=[e._style,e._weight,e._size+"px/"+e._leading+"px",e._family].join(" ")),i.textAlign="center",i.textBaseline="middle",a&&(l.isString(a)?i.fillStyle=a:(h[a._renderer.type].render.call(a,i,e),i.fillStyle=a._renderer.effect)),n&&(l.isString(n)?i.strokeStyle=n:(h[n._renderer.type].render.call(n,i,e),i.strokeStyle=n._renderer.effect),s&&(i.lineWidth=s)),l.isNumber(o)&&(i.globalAlpha=o),c&&c.length>0&&(i.lineDashOffset=c.offset||0,i.setLineDash(c)),i.save(),i.scale(r.x,r.y),i.translate(y,b),h.isHidden.test(a)||(a._renderer&&a._renderer.offset?(p=a._renderer.scale.x,m=a._renderer.scale.y,i.save(),i.translate(-a._renderer.offset.x,-a._renderer.offset.y),i.scale(p,m),d=e._size/a._renderer.scale.y,u=e._leading/a._renderer.scale.y,i.font=[e._style,e._weight,d+"px/",u+"px",e._family].join(" "),f=a._renderer.offset.x/a._renderer.scale.x,_=a._renderer.offset.y/a._renderer.scale.y,i.fillText(e.value,f,_),i.restore()):i.fillText(e.value,0,0)),h.isHidden.test(n)||(n._renderer&&n._renderer.offset?(p=n._renderer.scale.x,m=n._renderer.scale.y,i.save(),i.translate(-n._renderer.offset.x,-n._renderer.offset.y),i.scale(p,m),d=e._size/n._renderer.scale.y,u=e._leading/n._renderer.scale.y,i.font=[e._style,e._weight,d+"px/",u+"px",e._family].join(" "),f=n._renderer.offset.x/n._renderer.scale.x,_=n._renderer.offset.y/n._renderer.scale.y,g=s/n._renderer.scale.x,i.lineWidth=g,i.strokeText(e.value,f,_),i.restore()):i.strokeText(e.value,0,0)),i.restore()},getBoundingClientRect:function(e,t){var i=h.ctx;i.font=[e._style,e._weight,e._size+"px/"+e._leading+"px",e._family].join(" "),i.textAlign="center",i.textBaseline=e._baseline;var r=1.25*i.measureText(e._value).width,n=1.25*Math.max(e._size,e._leading);this._linewidth&&!h.isHidden.test(this._stroke)&&(r+=2*this._linewidth,n+=2*this._linewidth);var s=r/2,a=n/2;switch(h.alignments[e._alignment]||e._alignment){case h.alignments.left:t.left=0,t.right=r;break;case h.alignments.right:t.left=-r,t.right=0;break;default:t.left=-s,t.right=s}switch(e._baseline){case"bottom":t.top=-n,t.bottom=0;break;case"top":t.top=0,t.bottom=n;break;default:t.top=-a,t.bottom=a}t.width=r,t.height=n,t.centroid||(t.centroid={}),t.centroid.x=s,t.centroid.y=a},render:function(t,r,n){if(!this._visible||!this._opacity)return this;this._update();var a=this.parent,o=a._matrix.manual||a._flagMatrix,l=this._matrix.manual||this._flagMatrix,c=this._flagVertices||this._flagFill||this._fill instanceof e.LinearGradient&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagEndPoints)||this._fill instanceof e.RadialGradient&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagRadius||this._fill._flagCenter||this._fill._flagFocal)||this._fill instanceof e.Texture&&(this._fill._flagLoaded&&this._fill.loaded||this._fill._flagImage||this._fill._flagVideo||this._fill._flagRepeat||this._fill._flagOffset||this._fill._flagScale)||this._stroke instanceof e.LinearGradient&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagEndPoints)||this._stroke instanceof e.RadialGradient&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagRadius||this._stroke._flagCenter||this._stroke._flagFocal)||this._stroke instanceof e.Texture&&(this._stroke._flagLoaded&&this._stroke.loaded||this._stroke._flagImage||this._stroke._flagVideo||this._stroke._flagRepeat||this._stroke._flagOffset||this._fill._flagScale)||this._flagStroke||this._flagLinewidth||this._flagOpacity||a._flagOpacity||this._flagVisible||this._flagScale||this._flagValue||this._flagFamily||this._flagSize||this._flagLeading||this._flagAlignment||this._flagBaseline||this._flagStyle||this._flagWeight||this._flagDecoration||this.dashes&&this.dashes.length>0||!this._renderer.texture;if((o||l)&&(this._renderer.matrix||(this._renderer.matrix=new e.Array(9)),this._matrix.toTransformArray(!0,s),i(s,a._renderer.matrix,this._renderer.matrix),this._renderer.scale instanceof e.Vector||(this._renderer.scale=new e.Vector),this._scale instanceof e.Vector?(this._renderer.scale.x=this._scale.x*a._renderer.scale.x,this._renderer.scale.y=this._scale.y*a._renderer.scale.y):(this._renderer.scale.x=this._scale*a._renderer.scale.x,this._renderer.scale.y=this._scale*a._renderer.scale.y)),c?(this._renderer.rect||(this._renderer.rect={}),this._renderer.opacity=this._opacity*a._renderer.opacity,h.text.getBoundingClientRect(this,this._renderer.rect),h.updateTexture.call(h,t,this)):(this._fill&&this._fill._update&&this._fill._update(),this._stroke&&this._stroke._update&&this._stroke._update()),!this._clip||n){t.bindTexture(t.TEXTURE_2D,this._renderer.texture);var d=this._renderer.rect;return t.uniformMatrix3fv(r.matrix,!1,this._renderer.matrix),t.uniform4f(r.rect,d.left,d.top,d.right,d.bottom),t.drawArrays(t.TRIANGLES,0,6),this.flagReset()}}},"linear-gradient":{render:function(e,t){if(e.canvas.getContext("2d")){if(this._update(),!this._renderer.effect||this._flagEndPoints||this._flagStops){this._renderer.effect=e.createLinearGradient(this.left._x,this.left._y,this.right._x,this.right._y);for(var i=0;i<this.stops.length;i++){var r=this.stops[i];this._renderer.effect.addColorStop(r._offset,r._color)}}return this.flagReset()}}},"radial-gradient":{render:function(e,t){if(e.canvas.getContext("2d")){if(this._update(),!this._renderer.effect||this._flagCenter||this._flagFocal||this._flagRadius||this._flagStops){this._renderer.effect=e.createRadialGradient(this.center._x,this.center._y,0,this.focal._x,this.focal._y,this._radius);for(var i=0;i<this.stops.length;i++){var r=this.stops[i];this._renderer.effect.addColorStop(r._offset,r._color)}}return this.flagReset()}}},texture:{render:function(t,i){if(t.canvas.getContext("2d")){this._update();var r=this.image;if((this._flagLoaded||this._flagImage||this._flagVideo||this._flagRepeat)&&this.loaded)this._renderer.effect=t.createPattern(r,this._repeat);else if(!this._renderer.effect)return this.flagReset();return(this._flagOffset||this._flagLoaded||this._flagScale)&&(this._renderer.offset instanceof e.Vector||(this._renderer.offset=new e.Vector),this._renderer.offset.x=-this._offset.x,this._renderer.offset.y=-this._offset.y,r&&(this._renderer.offset.x+=r.width/2,this._renderer.offset.y+=r.height/2,this._scale instanceof e.Vector?(this._renderer.offset.x*=this._scale.x,this._renderer.offset.y*=this._scale.y):(this._renderer.offset.x*=this._scale,this._renderer.offset.y*=this._scale))),(this._flagScale||this._flagLoaded)&&(this._renderer.scale instanceof e.Vector||(this._renderer.scale=new e.Vector),this._scale instanceof e.Vector?this._renderer.scale.copy(this._scale):this._renderer.scale.set(this._scale,this._scale)),this.flagReset()}}},updateTexture:function(e,t){this[t._renderer.type].updateCanvas.call(h,t),t._renderer.texture||(t._renderer.texture=e.createTexture()),e.bindTexture(e.TEXTURE_2D,t._renderer.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),this.canvas.width<=0||this.canvas.height<=0||e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this.canvas)},program:{create:function(t,i){var r,n;if(r=t.createProgram(),l.each(i,(function(e){t.attachShader(r,e)})),t.linkProgram(r),!t.getProgramParameter(r,t.LINK_STATUS))throw n=t.getProgramInfoLog(r),t.deleteProgram(r),new e.Utils.Error("unable to link program: "+n);return r}},shaders:{create:function(t,i,r){var n,s;if(n=t.createShader(t[r]),t.shaderSource(n,i),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))throw s=t.getShaderInfoLog(n),t.deleteShader(n),new e.Utils.Error("unable to compile shader "+n+": "+s);return n},types:{vertex:"VERTEX_SHADER",fragment:"FRAGMENT_SHADER"},vertex:["precision mediump float;","attribute vec2 a_position;","","uniform mat3 u_matrix;","uniform vec2 u_resolution;","uniform vec4 u_rect;","","varying vec2 v_textureCoords;","","void main() {","   vec2 rectCoords = (a_position * (u_rect.zw - u_rect.xy)) + u_rect.xy;","   vec2 projected = (u_matrix * vec3(rectCoords, 1.0)).xy;","   vec2 normal = projected / u_resolution;","   vec2 clipspace = (normal * 2.0) - 1.0;","","   gl_Position = vec4(clipspace * vec2(1.0, -1.0), 0.0, 1.0);","   v_textureCoords = a_position;","}"].join("\n"),fragment:["precision mediump float;","","uniform sampler2D u_image;","varying vec2 v_textureCoords;","","void main() {","  vec4 texel = texture2D(u_image, v_textureCoords);","  if (texel.a == 0.0) {","    discard;","  }","  gl_FragColor = texel;","}"].join("\n")},TextureRegistry:new e.Registry};h.ctx=h.canvas.getContext("2d");var c=e[e.Types.webgl]=function(t){var i,r,s;if(this.domElement=t.domElement||document.createElement("canvas"),l.isUndefined(t.offscreenElement)||(h.canvas=t.offscreenElement,h.ctx=h.canvas.getContext("2d")),this.scene=new e.Group,this.scene.parent=this,this._renderer={type:"renderer",matrix:new e.Array(n),scale:1,opacity:1},this._flagMatrix=!0,t=l.defaults(t||{},{antialias:!1,alpha:!0,premultipliedAlpha:!0,stencil:!0,preserveDrawingBuffer:!0,overdraw:!1}),this.overdraw=t.overdraw,i=this.ctx=this.domElement.getContext("webgl",t)||this.domElement.getContext("experimental-webgl",t),!this.ctx)throw new e.Utils.Error("unable to create a webgl context. Try using another renderer.");r=h.shaders.create(i,h.shaders.vertex,h.shaders.types.vertex),s=h.shaders.create(i,h.shaders.fragment,h.shaders.types.fragment),this.program=h.program.create(i,[r,s]),i.useProgram(this.program),this.program.position=i.getAttribLocation(this.program,"a_position"),this.program.matrix=i.getUniformLocation(this.program,"u_matrix"),this.program.rect=i.getUniformLocation(this.program,"u_rect");var a=i.createBuffer();i.bindBuffer(i.ARRAY_BUFFER,a),i.vertexAttribPointer(this.program.position,2,i.FLOAT,!1,0,0),i.enableVertexAttribArray(this.program.position),i.bufferData(i.ARRAY_BUFFER,new e.Array([0,0,1,0,0,1,0,1,1,0,1,1]),i.STATIC_DRAW),i.enable(i.BLEND),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ONE_MINUS_SRC_ALPHA)};l.extend(c,{Utils:h}),l.extend(c.prototype,e.Utils.Events,{constructor:c,setSize:function(t,i,r){this.width=t,this.height=i,this.ratio=l.isUndefined(r)?a(this.ctx):r,this.domElement.width=t*this.ratio,this.domElement.height=i*this.ratio,l.isObject(this.domElement.style)&&l.extend(this.domElement.style,{width:t+"px",height:i+"px"}),this._renderer.matrix[0]=this._renderer.matrix[4]=this._renderer.scale=this.ratio,this._flagMatrix=!0,this.ctx.viewport(0,0,t*this.ratio,i*this.ratio);var n=this.ctx.getUniformLocation(this.program,"u_resolution");return this.ctx.uniform2f(n,t*this.ratio,i*this.ratio),this.trigger(e.Events.resize,t,i,r)},render:function(){var e=this.ctx;return this.overdraw||e.clear(e.COLOR_BUFFER_BIT),h.group.render.call(this.scene,e,this.program),this._flagMatrix=!1,this}})}((void 0!==e?e:e||self||window).Two),function(e){var t=e.Utils,i=e.Shape=function(){this._renderer={},this._renderer.flagMatrix=t.bind(i.FlagMatrix,this),this.isShape=!0,this.id=e.Identifier+e.uniqueId(),this.classList=[],this.matrix=new e.Matrix,this.translation=new e.Vector,this.rotation=0,this.scale=1};t.extend(i,{FlagMatrix:function(){this._flagMatrix=!0},MakeObservable:function(r){var n={enumerable:!1,get:function(){return this._translation},set:function(t){this._translation&&this._translation.unbind(e.Events.change,this._renderer.flagMatrix),this._translation=t,this._translation.bind(e.Events.change,this._renderer.flagMatrix),i.FlagMatrix.call(this)}};Object.defineProperty(r,"translation",n),Object.defineProperty(r,"position",n),Object.defineProperty(r,"rotation",{enumerable:!0,get:function(){return this._rotation},set:function(e){this._rotation=e,this._flagMatrix=!0}}),Object.defineProperty(r,"scale",{enumerable:!0,get:function(){return this._scale},set:function(t){this._scale instanceof e.Vector&&this._scale.unbind(e.Events.change,this._renderer.flagMatrix),this._scale=t,this._scale instanceof e.Vector&&this._scale.bind(e.Events.change,this._renderer.flagMatrix),this._flagMatrix=!0,this._flagScale=!0}}),Object.defineProperty(r,"matrix",{enumerable:!0,get:function(){return this._matrix},set:function(e){this._matrix=e,this._flagMatrix=!0}}),Object.defineProperty(r,"className",{enumerable:!0,get:function(){return this._className},set:function(e){if(this._flagClassName=this._className!==e,this._flagClassName){for(var i=this._className.split(/\s+?/),r=e.split(/\s+?/),n=0;n<i.length;n++){var s=i[n],a=t.indexOf(this.classList,s);a>=0&&this.classList.splice(a,1)}this.classList=this.classList.concat(r)}this._className=e}})}}),t.extend(i.prototype,e.Utils.Events,{_flagMatrix:!0,_flagScale:!1,_flagClassName:!1,_translation:null,_rotation:0,_scale:1,_className:"",constructor:i,addTo:function(e){return e.add(this),this},clone:function(e){var t=new i;return t.translation.copy(this.translation),t.rotation=this.rotation,t.scale=this.scale,this.matrix.manual&&t.matrix.copy(this.matrix),e&&e.add(t),t._update()},_update:function(t){return!this._matrix.manual&&this._flagMatrix&&(this._matrix.identity().translate(this.translation.x,this.translation.y),this._scale instanceof e.Vector?this._matrix.scale(this._scale.x,this._scale.y):this._matrix.scale(this._scale),this._matrix.rotate(this.rotation)),t&&this.parent&&this.parent._update&&this.parent._update(),this},flagReset:function(){return this._flagMatrix=this._flagScale=this._flagClassName=!1,this}}),i.MakeObservable(i.prototype)}((void 0!==e?e:e||self||window).Two),function(e){var t=Math.min,i=Math.max,r=Math.ceil,n=Math.floor,s=e.Utils.getComputedMatrix,a=e.Utils;a.each(e.Commands,(function(e,t){}));var o=e.Path=function(t,i,r,n){e.Shape.call(this),this._renderer.type="path",this._renderer.flagVertices=a.bind(o.FlagVertices,this),this._renderer.bindVertices=a.bind(o.BindVertices,this),this._renderer.unbindVertices=a.bind(o.UnbindVertices,this),this._renderer.flagFill=a.bind(o.FlagFill,this),this._renderer.flagStroke=a.bind(o.FlagStroke,this),this._renderer.vertices=[],this._renderer.collection=[],this._closed=!!i,this._curved=!!r,this.beginning=0,this.ending=1,this.fill="#fff",this.stroke="#000",this.linewidth=1,this.opacity=1,this.className="",this.visible=!0,this.cap="butt",this.join="miter",this.miter=4,this.vertices=t,this.automatic=!n,this.dashes=[],this.dashes.offset=0};function l(e,t){if(0===t||1===t)return!0;for(var i=e._length*t,r=0,n=0;n<e._lengths.length;n++){var s=e._lengths[n];if(r>=i)return i-r>=0;r+=s}return!1}function h(e,t){var i=e._length;if(t<=0)return 0;if(t>=i)return e._lengths.length-1;for(var r=0,n=0;r<e._lengths.length;r++){if(n+e._lengths[r]>=t)return t-=n,Math.max(r-1,0)+t/e._lengths[r];n+=e._lengths[r]}return-1}function c(t,i,r){var n,s,a,o,l,h,c,d,u=i.controls&&i.controls.right,f=t.controls&&t.controls.left;return n=i.x,l=i.y,s=(u||i).x,h=(u||i).y,a=(f||t).x,c=(f||t).y,o=t.x,d=t.y,u&&i._relative&&(s+=i.x,h+=i.y),f&&t._relative&&(a+=t.x,c+=t.y),e.Utils.getCurveLength(n,l,s,h,a,c,o,d,r)}function d(t,i,r){var n,s,a,o,l,h,c,d,u=i.controls&&i.controls.right,f=t.controls&&t.controls.left;return n=i.x,l=i.y,s=(u||i).x,h=(u||i).y,a=(f||t).x,c=(f||t).y,o=t.x,d=t.y,u&&i._relative&&(s+=i.x,h+=i.y),f&&t._relative&&(a+=t.x,c+=t.y),e.Utils.subdivide(n,l,s,h,a,c,o,d,r)}a.extend(o,{Properties:["fill","stroke","linewidth","opacity","visible","cap","join","miter","closed","curved","automatic","beginning","ending"],Utils:{getCurveLength:c},FlagVertices:function(){this._flagVertices=!0,this._flagLength=!0,this.parent&&(this.parent._flagLength=!0)},BindVertices:function(t){for(var i=t.length;i--;)t[i].bind(e.Events.change,this._renderer.flagVertices);this._renderer.flagVertices()},UnbindVertices:function(t){for(var i=t.length;i--;)t[i].unbind(e.Events.change,this._renderer.flagVertices);this._renderer.flagVertices()},FlagFill:function(){this._flagFill=!0},FlagStroke:function(){this._flagStroke=!0},MakeObservable:function(t){e.Shape.MakeObservable(t),a.each(o.Properties.slice(2,8),e.Utils.defineProperty,t),Object.defineProperty(t,"fill",{enumerable:!0,get:function(){return this._fill},set:function(t){(this._fill instanceof e.Gradient||this._fill instanceof e.LinearGradient||this._fill instanceof e.RadialGradient||this._fill instanceof e.Texture)&&this._fill.unbind(e.Events.change,this._renderer.flagFill),this._fill=t,this._flagFill=!0,(this._fill instanceof e.Gradient||this._fill instanceof e.LinearGradient||this._fill instanceof e.RadialGradient||this._fill instanceof e.Texture)&&this._fill.bind(e.Events.change,this._renderer.flagFill)}}),Object.defineProperty(t,"stroke",{enumerable:!0,get:function(){return this._stroke},set:function(t){(this._stroke instanceof e.Gradient||this._stroke instanceof e.LinearGradient||this._stroke instanceof e.RadialGradient||this._stroke instanceof e.Texture)&&this._stroke.unbind(e.Events.change,this._renderer.flagStroke),this._stroke=t,this._flagStroke=!0,(this._stroke instanceof e.Gradient||this._stroke instanceof e.LinearGradient||this._stroke instanceof e.RadialGradient||this._stroke instanceof e.Texture)&&this._stroke.bind(e.Events.change,this._renderer.flagStroke)}}),Object.defineProperty(t,"length",{get:function(){return this._flagLength&&this._updateLength(),this._length}}),Object.defineProperty(t,"closed",{enumerable:!0,get:function(){return this._closed},set:function(e){this._closed=!!e,this._flagVertices=!0}}),Object.defineProperty(t,"curved",{enumerable:!0,get:function(){return this._curved},set:function(e){this._curved=!!e,this._flagVertices=!0}}),Object.defineProperty(t,"automatic",{enumerable:!0,get:function(){return this._automatic},set:function(e){if(e!==this._automatic){this._automatic=!!e;var t=this._automatic?"ignore":"listen";a.each(this.vertices,(function(e){e[t]()}))}}}),Object.defineProperty(t,"beginning",{enumerable:!0,get:function(){return this._beginning},set:function(e){this._beginning=e,this._flagVertices=!0}}),Object.defineProperty(t,"ending",{enumerable:!0,get:function(){return this._ending},set:function(e){this._ending=e,this._flagVertices=!0}}),Object.defineProperty(t,"vertices",{enumerable:!0,get:function(){return this._collection},set:function(t){this._renderer.flagVertices;var i=this._renderer.bindVertices,r=this._renderer.unbindVertices;this._collection&&this._collection.unbind(e.Events.insert,i).unbind(e.Events.remove,r),t instanceof e.Utils.Collection?this._collection=t:this._collection=new e.Utils.Collection(t||[]),this._collection.bind(e.Events.insert,i).bind(e.Events.remove,r),i(this._collection)}}),Object.defineProperty(t,"clip",{enumerable:!0,get:function(){return this._clip},set:function(e){this._clip=e,this._flagClip=!0}}),Object.defineProperty(t,"dashes",{enumerable:!0,get:function(){return this._dashes},set:function(e){a.isNumber(e.offset)||(e.offset=this._dashes.offset||0),this._dashes=e}})}}),a.extend(o.prototype,e.Shape.prototype,{_flagVertices:!0,_flagLength:!0,_flagFill:!0,_flagStroke:!0,_flagLinewidth:!0,_flagOpacity:!0,_flagVisible:!0,_flagCap:!0,_flagJoin:!0,_flagMiter:!0,_flagClip:!1,_length:0,_fill:"#fff",_stroke:"#000",_linewidth:1,_opacity:1,_visible:!0,_cap:"round",_join:"round",_miter:4,_closed:!0,_curved:!1,_automatic:!0,_beginning:0,_ending:1,_clip:!1,_dashes:[],constructor:o,clone:function(e){for(var t=new o,i=0;i<this.vertices.length;i++)t.vertices.push(this.vertices[i].clone());for(var r=0;r<o.Properties.length;r++){var n=o.Properties[r];t[n]=this[n]}return t.className=this.className,t.translation.copy(this.translation),t.rotation=this.rotation,t.scale=this.scale,this.matrix.manual&&t.matrix.copy(this.matrix),e&&e.add(t),t._update()},toObject:function(){var t={vertices:a.map(this.vertices,(function(e){return e.toObject()}))};return a.each(e.Shape.Properties,(function(e){t[e]=this[e]}),this),t.className=this.className,t.translation=this.translation.toObject(),t.rotation=this.rotation,t.scale=this.scale instanceof e.Vector?this.scale.toObject():this.scale,this.matrix.manual&&(t.matrix=this.matrix.toObject()),t},noFill:function(){return this.fill="transparent",this},noStroke:function(){return this.stroke=void 0,this},corner:function(){var e=this.getBoundingClientRect(!0);return e.centroid={x:e.left+e.width/2,y:e.top+e.height/2},a.each(this.vertices,(function(t){t.subSelf(e.centroid),t.x+=e.width/2,t.y+=e.height/2})),this},center:function(){var e=this.getBoundingClientRect(!0);return e.centroid={x:e.left+e.width/2-this.translation.x,y:e.top+e.height/2-this.translation.y},a.each(this.vertices,(function(t){t.subSelf(e.centroid)})),this},remove:function(){return this.parent?(this.parent.remove(this),this):this},getBoundingClientRect:function(r){var n,a,o,l,h,c,d,u,f=1/0,_=-1/0,g=1/0,p=-1/0;if(this._update(!0),n=r?this._matrix:s(this),a=this.linewidth/2,(o=this._renderer.vertices.length)<=0)return{width:0,height:0};for(l=0;l<o;l++)if(u=this._renderer.vertices[l],(h=this._renderer.vertices[(l+o-1)%o]).controls&&u.controls){c=h.relative?n.multiply(h.controls.right.x+h.x,h.controls.right.y+h.y,1):n.multiply(h.controls.right.x,h.controls.right.y,1),h=n.multiply(h.x,h.y,1),d=u.relative?n.multiply(u.controls.left.x+u.x,u.controls.left.y+u.y,1):n.multiply(u.controls.left.x,u.controls.left.y,1),u=n.multiply(u.x,u.y,1);var m=e.Utils.getCurveBoundingBox(h.x,h.y,c.x,c.y,d.x,d.y,u.x,u.y);g=t(m.min.y-a,g),f=t(m.min.x-a,f),_=i(m.max.x+a,_),p=i(m.max.y+a,p)}else l<=1&&(h=n.multiply(h.x,h.y,1),g=t(h.y-a,g),f=t(h.x-a,f),_=i(h.x+a,_),p=i(h.y+a,p)),u=n.multiply(u.x,u.y,1),g=t(u.y-a,g),f=t(u.x-a,f),_=i(u.x+a,_),p=i(u.y+a,p);return{top:g,left:f,right:_,bottom:p,width:_-f,height:p-g}},getPointAt:function(t,i){for(var r,n,s,o,l,h,c,d,u,f,_,g,p,m,v,y=this.length*Math.min(Math.max(t,0),1),b=this.vertices.length,x=b-1,w=null,E=null,A=0,k=this._lengths.length,C=0;A<k;A++){if(C+this._lengths[A]>=y){this._closed?(r=e.Utils.mod(A,b),n=e.Utils.mod(A-1,b),0===A&&(r=n,n=A)):(r=A,n=Math.min(Math.max(A-1,0),x)),w=this.vertices[r],E=this.vertices[n],y-=C,t=0!==this._lengths[A]?y/this._lengths[A]:0;break}C+=this._lengths[A]}if(a.isNull(w)||a.isNull(E))return null;if(!w)return E;if(!E)return w;v=E.controls&&E.controls.right,m=w.controls&&w.controls.left,l=E.x,f=E.y,h=(v||E).x,_=(v||E).y,c=(m||w).x,g=(m||w).y,d=w.x,p=w.y,v&&E.relative&&(h+=E.x,_+=E.y),m&&w.relative&&(c+=w.x,g+=w.y),o=e.Utils.getComponentOnCubicBezier(t,l,h,c,d),u=e.Utils.getComponentOnCubicBezier(t,f,_,g,p);var S=e.Utils.lerp(l,h,t),O=e.Utils.lerp(f,_,t),R=e.Utils.lerp(h,c,t),F=e.Utils.lerp(_,g,t),M=e.Utils.lerp(c,d,t),T=e.Utils.lerp(g,p,t),P=e.Utils.lerp(S,R,t),L=e.Utils.lerp(O,F,t),U=e.Utils.lerp(R,M,t),N=e.Utils.lerp(F,T,t);return a.isObject(i)?(i.x=o,i.y=u,a.isObject(i.controls)||e.Anchor.AppendCurveProperties(i),i.controls.left.x=P,i.controls.left.y=L,i.controls.right.x=U,i.controls.right.y=N,a.isBoolean(i.relative)&&!i.relative||(i.controls.left.x-=o,i.controls.left.y-=u,i.controls.right.x-=o,i.controls.right.y-=u),i.t=t,i):((s=new e.Anchor(o,u,P-o,L-u,U-o,N-u,this._curved?e.Commands.curve:e.Commands.line)).t=t,s)},plot:function(){if(this.curved)return e.Utils.getCurveFromPoints(this._collection,this.closed),this;for(var t=0;t<this._collection.length;t++)this._collection[t].command=0===t?e.Commands.move:e.Commands.line;return this},subdivide:function(t){this._update();var i=this.vertices.length-1,r=this.vertices[i],n=this._closed||this.vertices[i]._command===e.Commands.close,s=[];return a.each(this.vertices,(function(o,l){if(l<=0&&!n)r=o;else{if(o.command===e.Commands.move)return s.push(new e.Anchor(r.x,r.y)),l>0&&(s[s.length-1].command=e.Commands.line),void(r=o);var h=d(o,r,t);s=s.concat(h),a.each(h,(function(t,i){i<=0&&r.command===e.Commands.move?t.command=e.Commands.move:t.command=e.Commands.line})),l>=i&&(this._closed&&this._automatic?(h=d(o,r=o,t),s=s.concat(h),a.each(h,(function(t,i){i<=0&&r.command===e.Commands.move?t.command=e.Commands.move:t.command=e.Commands.line}))):n&&s.push(new e.Anchor(o.x,o.y)),s[s.length-1].command=n?e.Commands.close:e.Commands.line),r=o}}),this),this._automatic=!1,this._curved=!1,this.vertices=s,this},_updateLength:function(t,i){i||this._update();var r=this.vertices.length,n=r-1,s=this.vertices[n],o=0;return a.isUndefined(this._lengths)&&(this._lengths=[]),a.each(this.vertices,(function(i,r){if(r<=0||i.command===e.Commands.move)return s=i,void(this._lengths[r]=0);this._lengths[r]=c(i,s,t),o+=this._lengths[r],s=i}),this),this._length=o,this._flagLength=!1,this},_update:function(){if(this._flagVertices){this._automatic&&this.plot(),this._flagLength&&this._updateLength(void 0,!0);var t,i,s,a,o,c=this._collection.length,d=this._closed,u=Math.min(this._beginning,this._ending),f=Math.max(this._beginning,this._ending),_=h(this,u*this._length),g=h(this,f*this._length),p=r(_),m=n(g);this._renderer.vertices.length=0;for(var v=0;v<c;v++)this._renderer.collection.length<=v&&this._renderer.collection.push(new e.Anchor),v>m&&!i?((o=this._renderer.collection[v]).copy(this._collection[v]),this.getPointAt(f,o),o.command=this._renderer.collection[v].command,this._renderer.vertices.push(o),i=o,(s=this._collection[v-1])&&s.controls&&(o.controls.right.clear(),this._renderer.collection[v-1].controls.right.clear().lerp(s.controls.right,o.t))):v>=p&&v<=m&&(o=this._renderer.collection[v].copy(this._collection[v]),this._renderer.vertices.push(o),v===m&&l(this,f)?(i=o,!d&&i.controls&&i.controls.right.clear()):v===p&&l(this,u)&&((t=o).command=e.Commands.move,!d&&t.controls&&t.controls.left.clear()));p>0&&!t&&(v=p-1,(o=this._renderer.collection[v]).copy(this._collection[v]),this.getPointAt(u,o),o.command=e.Commands.move,this._renderer.vertices.unshift(o),t=o,(a=this._collection[v+1])&&a.controls&&(o.controls.left.clear(),this._renderer.collection[v+1].controls.left.copy(a.controls.left).lerp(e.Vector.zero,o.t)))}return e.Shape.prototype._update.apply(this,arguments),this},flagReset:function(){return this._flagVertices=this._flagFill=this._flagStroke=this._flagLinewidth=this._flagOpacity=this._flagVisible=this._flagCap=this._flagJoin=this._flagMiter=this._flagClip=!1,e.Shape.prototype.flagReset.call(this),this}}),o.MakeObservable(o.prototype)}((void 0!==e?e:e||self||window).Two),function(e){var t=e.Path,i=e.Utils,r=e.Line=function(i,r,n,s){t.call(this,[new e.Anchor(i,r),new e.Anchor(n,s)]),this.vertices[0].command=e.Commands.move,this.vertices[1].command=e.Commands.line,this.automatic=!1};i.extend(r.prototype,t.prototype),r.prototype.constructor=r,t.MakeObservable(r.prototype)}((void 0!==e?e:e||self||window).Two),function(e){var t=e.Path,i=e.Utils,r=e.Rectangle=function(i,r,n,s){t.call(this,[new e.Anchor,new e.Anchor,new e.Anchor,new e.Anchor],!0,!1,!0),this.width=n,this.height=s,this.origin=new e.Vector,this.translation.set(i,r),this._update()};i.extend(r,{Properties:["width","height"],MakeObservable:function(n){t.MakeObservable(n),i.each(r.Properties,e.Utils.defineProperty,n),Object.defineProperty(n,"origin",{enumerable:!0,get:function(){return this._origin},set:function(t){this._origin&&this._origin.unbind(e.Events.change,this._renderer.flagVertices),this._origin=t,this._origin.bind(e.Events.change,this._renderer.flagVertices),this._renderer.flagVertices()}})}}),i.extend(r.prototype,t.prototype,{_flagWidth:0,_flagHeight:0,_width:0,_height:0,_origin:null,constructor:r,_update:function(){if(this._flagWidth||this._flagHeight){var i=this._width/2,r=this._height/2;this.vertices[0].set(-i,-r).add(this._origin).command=e.Commands.move,this.vertices[1].set(i,-r).add(this._origin).command=e.Commands.line,this.vertices[2].set(i,r).add(this._origin).command=e.Commands.line,this.vertices[3].set(-i,r).add(this._origin).command=e.Commands.line,this.vertices[4]&&(this.vertices[4].set(-i,-r).add(this._origin).command=e.Commands.line)}return t.prototype._update.call(this),this},flagReset:function(){return this._flagWidth=this._flagHeight=!1,t.prototype.flagReset.call(this),this},clone:function(t){var n=new r(0,0,this.width,this.height);return n.translation.copy(this.translation),n.rotation=this.rotation,n.scale=this.scale,this.matrix.manual&&n.matrix.copy(this.matrix),i.each(e.Path.Properties,(function(e){n[e]=this[e]}),this),t&&t.add(n),n},toObject:function(){var e=t.prototype.toObject.call(this);return e.width=this.width,e.height=this.height,e.origin=this.origin.toObject(),e}}),r.MakeObservable(r.prototype)}((void 0!==e?e:e||self||window).Two),function(e){var t=e.Path,i=2*Math.PI,r=Math.PI/2,n=Math.cos,s=Math.sin,a=e.Utils,o=e.Ellipse=function(i,r,n,s,o){a.isNumber(s)||(s=n);var l=o?Math.max(o,2):4,h=a.map(a.range(l),(function(t){return new e.Anchor}),this);t.call(this,h,!0,!0,!0),this.width=2*n,this.height=2*s,this._update(),this.translation.set(i,r)};a.extend(o,{Properties:["width","height"],MakeObservable:function(i){t.MakeObservable(i),a.each(o.Properties,e.Utils.defineProperty,i)}}),a.extend(o.prototype,t.prototype,{_flagWidth:!1,_flagHeight:!1,_width:0,_height:0,constructor:o,_update:function(){if(this._flagWidth||this._flagHeight)for(var a=4/3*Math.tan(Math.PI/(2*this.vertices.length)),o=this._width/2,l=this._height/2,h=0,c=this.vertices.length;h<c;h++){var d=h/c*i,u=o*n(d),f=l*s(d),_=o*a*n(d-r),g=l*a*s(d-r),p=o*a*n(d+r),m=l*a*s(d+r),v=this.vertices[h];v.command=e.Commands.curve,v.set(u,f),v.controls.left.set(_,g),v.controls.right.set(p,m)}return t.prototype._update.call(this),this},flagReset:function(){return this._flagWidth=this._flagHeight=!1,t.prototype.flagReset.call(this),this},clone:function(t){var i=this.width/2,r=this.height/2,n=this.vertices.length,s=new o(0,0,i,r,n);return s.translation.copy(this.translation),s.rotation=this.rotation,s.scale=this.scale,this.matrix.manual&&s.matrix.copy(this.matrix),a.each(e.Path.Properties,(function(e){s[e]=this[e]}),this),t&&t.add(s),s},toObject:function(){var e=t.prototype.toObject.call(this);return a.each(o.Properties,(function(t){e[t]=this[t]}),this),e}}),o.MakeObservable(o.prototype)}((void 0!==e?e:e||self||window).Two),function(e){var t=e.Path,i=2*Math.PI,r=Math.PI/2,n=Math.cos,s=Math.sin,a=e.Utils,o=e.Circle=function(i,r,n,s){var o=s?Math.max(s,2):4,l=a.map(a.range(o),(function(t){return new e.Anchor}),this);t.call(this,l,!0,!0,!0),this.radius=n,this._update(),a.isNumber(i)&&(this.translation.x=i),a.isNumber(r)&&(this.translation.y=r)};a.extend(o,{Properties:["radius"],MakeObservable:function(i){t.MakeObservable(i),a.each(o.Properties,e.Utils.defineProperty,i)}}),a.extend(o.prototype,t.prototype,{_flagRadius:!1,_radius:0,constructor:o,_update:function(){if(this._flagRadius)for(var a=4/3*Math.tan(Math.PI/(2*this.vertices.length)),o=this._radius,l=o*a,h=0,c=this.vertices.length;h<c;h++){var d=h/c*i,u=o*n(d),f=o*s(d),_=l*n(d-r),g=l*s(d-r),p=l*n(d+r),m=l*s(d+r),v=this.vertices[h];v.command=e.Commands.curve,v.set(u,f),v.controls.left.set(_,g),v.controls.right.set(p,m)}return t.prototype._update.call(this),this},flagReset:function(){return this._flagRadius=!1,t.prototype.flagReset.call(this),this},clone:function(t){var i=new o(0,0,this.radius,this.vertices.length);return i.translation.copy(this.translation),i.rotation=this.rotation,i.scale=this.scale,this.matrix.manual&&i.matrix.copy(this.matrix),a.each(e.Path.Properties,(function(e){i[e]=this[e]}),this),t&&t.add(i),i},toObject:function(){var e=t.prototype.toObject.call(this);return a.each(o.Properties,(function(t){e[t]=this[t]}),this),e}}),o.MakeObservable(o.prototype)}((void 0!==e?e:e||self||window).Two),function(e){var t=e.Path,i=2*Math.PI,r=Math.cos,n=Math.sin,s=e.Utils,a=e.Polygon=function(e,i,r,n){n=Math.max(n||0,3),t.call(this),this.closed=!0,this.automatic=!1,this.width=2*r,this.height=2*r,this.sides=n,this._update(),this.translation.set(e,i)};s.extend(a,{Properties:["width","height","sides"],MakeObservable:function(i){t.MakeObservable(i),s.each(a.Properties,e.Utils.defineProperty,i)}}),s.extend(a.prototype,t.prototype,{_flagWidth:!1,_flagHeight:!1,_flagSides:!1,_width:0,_height:0,_sides:0,constructor:a,_update:function(){if(this._flagWidth||this._flagHeight||this._flagSides){var s=this._sides,a=s+1,o=this.vertices.length;o>s&&(this.vertices.splice(s-1,o-s),o=s);for(var l=0;l<a;l++){var h=i*((l+.5)/s)+Math.PI/2,c=this._width*r(h)/2,d=this._height*n(h)/2;l>=o?this.vertices.push(new e.Anchor(c,d)):this.vertices[l].set(c,d),this.vertices[l].command=0===l?e.Commands.move:e.Commands.line}}return t.prototype._update.call(this),this},flagReset:function(){return this._flagWidth=this._flagHeight=this._flagSides=!1,t.prototype.flagReset.call(this),this},clone:function(t){var i=new a(0,0,this.radius,this.sides);return i.translation.copy(this.translation),i.rotation=this.rotation,i.scale=this.scale,this.matrix.manual&&i.matrix.copy(this.matrix),s.each(e.Path.Properties,(function(e){i[e]=this[e]}),this),t&&t.add(i),i},toObject:function(){var e=t.prototype.toObject.call(this);return s.each(a.Properties,(function(t){e[t]=this[t]}),this),e}}),a.MakeObservable(a.prototype)}((void 0!==e?e:e||self||window).Two),function(e){var t=e.Path,i=2*Math.PI,r=Math.PI/2,n=e.Utils,s=e.Utils.mod,a=e.ArcSegment=function(i,r,s,a,o,l,h){var c=h||3*e.Resolution,d=n.map(n.range(c),(function(){return new e.Anchor}));t.call(this,d,!0,!1,!0),this.innerRadius=s,this.outerRadius=a,this.startAngle=o,this.endAngle=l,this._update(),n.isNumber(i)&&(this.translation.x=i),n.isNumber(r)&&(this.translation.y=r)};n.extend(a,{Properties:["startAngle","endAngle","innerRadius","outerRadius"],MakeObservable:function(i){t.MakeObservable(i),n.each(a.Properties,e.Utils.defineProperty,i)}}),n.extend(a.prototype,t.prototype,{_flagStartAngle:!1,_flagEndAngle:!1,_flagInnerRadius:!1,_flagOuterRadius:!1,_startAngle:0,_endAngle:i,_innerRadius:0,_outerRadius:0,constructor:a,_update:function(){if(this._flagStartAngle||this._flagEndAngle||this._flagInnerRadius||this._flagOuterRadius){var n,a=this._startAngle,o=this._endAngle,l=this._innerRadius,h=this._outerRadius,c=s(a,i)===s(o,i),d=l>0,u=this.vertices,f=d?u.length/2:u.length,_=0;c?f--:d||(f-=2);for(var g=0,p=f-1;g<f;g++){var m=g/p,v=u[_],y=m*(o-a)+a,b=(o-a)/f,x=h*Math.cos(y),w=h*Math.sin(y);switch(g){case 0:n=e.Commands.move;break;default:n=e.Commands.curve}if(v.command=n,v.x=x,v.y=w,v.controls.left.clear(),v.controls.right.clear(),v.command===e.Commands.curve){var E=h*b/Math.PI;v.controls.left.x=E*Math.cos(y-r),v.controls.left.y=E*Math.sin(y-r),v.controls.right.x=E*Math.cos(y+r),v.controls.right.y=E*Math.sin(y+r),1===g&&v.controls.left.multiplyScalar(2),g===p&&v.controls.right.multiplyScalar(2)}_++}if(d){for(c?(u[_].command=e.Commands.close,_++):p=--f-1,g=0;g<f;g++)m=g/p,v=u[_],y=(1-m)*(o-a)+a,b=(o-a)/f,x=l*Math.cos(y),w=l*Math.sin(y),n=e.Commands.curve,g<=0&&(n=c?e.Commands.move:e.Commands.line),v.command=n,v.x=x,v.y=w,v.controls.left.clear(),v.controls.right.clear(),v.command===e.Commands.curve&&(E=l*b/Math.PI,v.controls.left.x=E*Math.cos(y+r),v.controls.left.y=E*Math.sin(y+r),v.controls.right.x=E*Math.cos(y-r),v.controls.right.y=E*Math.sin(y-r),1===g&&v.controls.left.multiplyScalar(2),g===p&&v.controls.right.multiplyScalar(2)),_++;u[_].copy(u[0]),u[_].command=e.Commands.line}else c||(u[_].command=e.Commands.line,u[_].x=0,u[_].y=0,u[++_].copy(u[0]),u[_].command=e.Commands.line)}return t.prototype._update.call(this),this},flagReset:function(){return t.prototype.flagReset.call(this),this._flagStartAngle=this._flagEndAngle=this._flagInnerRadius=this._flagOuterRadius=!1,this},clone:function(t){var i=this.innerRadius,r=this.outerradius,s=this.startAngle,o=this.endAngle,l=this.vertices.length,h=new a(0,0,i,r,s,o,l);return h.translation.copy(this.translation),h.rotation=this.rotation,h.scale=this.scale,this.matrix.manual&&h.matrix.copy(this.matrix),n.each(e.Path.Properties,(function(e){h[e]=this[e]}),this),t&&t.add(h),h},toObject:function(){var e=t.prototype.toObject.call(this);return n.each(a.Properties,(function(t){e[t]=this[t]}),this),e}}),a.MakeObservable(a.prototype)}((void 0!==e?e:e||self||window).Two),function(e){var t=e.Path,i=2*Math.PI,r=Math.cos,n=Math.sin,s=e.Utils,a=e.Star=function(e,i,r,n,a){arguments.length<=3&&(r=(n=r)/2),(!s.isNumber(a)||a<=0)&&(a=5),t.call(this),this.closed=!0,this.automatic=!1,this.innerRadius=r,this.outerRadius=n,this.sides=a,this._update(),this.translation.set(e,i)};s.extend(a,{Properties:["innerRadius","outerRadius","sides"],MakeObservable:function(i){t.MakeObservable(i),s.each(a.Properties,e.Utils.defineProperty,i)}}),s.extend(a.prototype,t.prototype,{_flagInnerRadius:!1,_flagOuterRadius:!1,_flagSides:!1,_innerRadius:0,_outerRadius:0,_sides:0,constructor:a,_update:function(){if(this._flagInnerRadius||this._flagOuterRadius||this._flagSides){var s=2*this._sides,a=s+1,o=this.vertices.length;o>s&&(this.vertices.splice(s-1,o-s),o=s);for(var l=0;l<a;l++){var h=i*((l+.5)/s),c=(l%2?this._outerRadius:this._innerRadius)/2,d=c*r(h),u=c*n(h);l>=o?this.vertices.push(new e.Anchor(d,u)):this.vertices[l].set(d,u),this.vertices[l].command=0===l?e.Commands.move:e.Commands.line}}return t.prototype._update.call(this),this},flagReset:function(){return this._flagInnerRadius=this._flagOuterRadius=this._flagSides=!1,t.prototype.flagReset.call(this),this},clone:function(t){var i=this.innerRadius,r=this.outerRadius,n=this.sides,o=new a(0,0,i,r,n);return o.translation.copy(this.translation),o.rotation=this.rotation,o.scale=this.scale,this.matrix.manual&&o.matrix.copy(this.matrix),s.each(e.Path.Properties,(function(e){o[e]=this[e]}),this),t&&t.add(o),o},toObject:function(){var e=t.prototype.toObject.call(this);return s.each(a.Properties,(function(t){e[t]=this[t]}),this),e}}),a.MakeObservable(a.prototype)}((void 0!==e?e:e||self||window).Two),function(e){var t=e.Path,i=e.Utils,r=e.RoundedRectangle=function(n,s,a,o,l){i.isUndefined(l)&&(l=Math.floor(Math.min(a,o)/12));var h=i.map(i.range(10),(function(t){return new e.Anchor(0,0,0,0,0,0,0===t?e.Commands.move:e.Commands.curve)}));t.call(this,h),this.closed=!0,this.automatic=!1,this._renderer.flagRadius=i.bind(r.FlagRadius,this),this.width=a,this.height=o,this.radius=l,this._update(),this.translation.set(n,s)};i.extend(r,{Properties:["width","height"],FlagRadius:function(){this._flagRadius=!0},MakeObservable:function(n){t.MakeObservable(n),i.each(r.Properties,e.Utils.defineProperty,n),Object.defineProperty(n,"radius",{enumerable:!0,get:function(){return this._radius},set:function(t){this._radius instanceof e.Vector&&this._radius.unbind(e.Events.change,this._renderer.flagRadius),this._radius=t,this._radius instanceof e.Vector&&this._radius.bind(e.Events.change,this._renderer.flagRadius),this._flagRadius=!0}})}}),i.extend(r.prototype,t.prototype,{_flagWidth:!1,_flagHeight:!1,_flagRadius:!1,_width:0,_height:0,_radius:0,constructor:r,_update:function(){if(this._flagWidth||this._flagHeight||this._flagRadius){var i,r,n,s=this._width,a=this._height;this._radius instanceof e.Vector?(i=this._radius.x,r=this._radius.y):(i=this._radius,r=this._radius);var o=s/2,l=a/2;(n=this.vertices[0]).x=-(o-i),n.y=-l,(n=this.vertices[1]).x=o-i,n.y=-l,n.controls.left.clear(),n.controls.right.x=i,n.controls.right.y=0,(n=this.vertices[2]).x=o,n.y=-(l-r),n.controls.right.clear(),n.controls.left.clear(),(n=this.vertices[3]).x=o,n.y=l-r,n.controls.left.clear(),n.controls.right.x=0,n.controls.right.y=r,(n=this.vertices[4]).x=o-i,n.y=l,n.controls.right.clear(),n.controls.left.clear(),(n=this.vertices[5]).x=-(o-i),n.y=l,n.controls.left.clear(),n.controls.right.x=-i,n.controls.right.y=0,(n=this.vertices[6]).x=-o,n.y=l-r,n.controls.left.clear(),n.controls.right.clear(),(n=this.vertices[7]).x=-o,n.y=-(l-r),n.controls.left.clear(),n.controls.right.x=0,n.controls.right.y=-r,(n=this.vertices[8]).x=-(o-i),n.y=-l,n.controls.left.clear(),n.controls.right.clear(),(n=this.vertices[9]).copy(this.vertices[8])}return t.prototype._update.call(this),this},flagReset:function(){return this._flagWidth=this._flagHeight=this._flagRadius=!1,t.prototype.flagReset.call(this),this},clone:function(t){var n=this.width,s=this.height,a=this.radius,o=new r(0,0,n,s,a);return o.translation.copy(this.translation),o.rotation=this.rotation,o.scale=this.scale,this.matrix.manual&&o.matrix.copy(this.matrix),i.each(e.Path.Properties,(function(e){o[e]=this[e]}),this),t&&t.add(o),o},toObject:function(){var e=t.prototype.toObject.call(this);return i.each(r.Properties,(function(t){e[t]=this[t]}),this),e.radius=i.isNumber(this.radius)?this.radius:this.radius.toObject(),e}}),r.MakeObservable(r.prototype)}((void 0!==e?e:e||self||window).Two),function(e){e.root;var t=e.Utils.getComputedMatrix,i=e.Utils,r=e.Text=function(t,r,n,s){if(e.Shape.call(this),this._renderer.type="text",this._renderer.flagFill=i.bind(e.Text.FlagFill,this),this._renderer.flagStroke=i.bind(e.Text.FlagStroke,this),this.value=t,i.isNumber(r)&&(this.translation.x=r),i.isNumber(n)&&(this.translation.y=n),this.dashes=[],this.dashes.offset=0,!i.isObject(s))return this;i.each(e.Text.Properties,(function(e){e in s&&(this[e]=s[e])}),this)};i.extend(e.Text,{Ratio:.6,Properties:["value","family","size","leading","alignment","linewidth","style","className","weight","decoration","baseline","opacity","visible","fill","stroke"],FlagFill:function(){this._flagFill=!0},FlagStroke:function(){this._flagStroke=!0},MakeObservable:function(t){e.Shape.MakeObservable(t),i.each(e.Text.Properties.slice(0,13),e.Utils.defineProperty,t),Object.defineProperty(t,"fill",{enumerable:!0,get:function(){return this._fill},set:function(t){(this._fill instanceof e.Gradient||this._fill instanceof e.LinearGradient||this._fill instanceof e.RadialGradient||this._fill instanceof e.Texture)&&this._fill.unbind(e.Events.change,this._renderer.flagFill),this._fill=t,this._flagFill=!0,(this._fill instanceof e.Gradient||this._fill instanceof e.LinearGradient||this._fill instanceof e.RadialGradient||this._fill instanceof e.Texture)&&this._fill.bind(e.Events.change,this._renderer.flagFill)}}),Object.defineProperty(t,"stroke",{enumerable:!0,get:function(){return this._stroke},set:function(t){(this._stroke instanceof e.Gradient||this._stroke instanceof e.LinearGradient||this._stroke instanceof e.RadialGradient||this._stroke instanceof e.Texture)&&this._stroke.unbind(e.Events.change,this._renderer.flagStroke),this._stroke=t,this._flagStroke=!0,(this._stroke instanceof e.Gradient||this._stroke instanceof e.LinearGradient||this._stroke instanceof e.RadialGradient||this._stroke instanceof e.Texture)&&this._stroke.bind(e.Events.change,this._renderer.flagStroke)}}),Object.defineProperty(t,"clip",{enumerable:!0,get:function(){return this._clip},set:function(e){this._clip=e,this._flagClip=!0}}),Object.defineProperty(t,"dashes",{enumerable:!0,get:function(){return this._dashes},set:function(e){i.isNumber(e.offset)||(e.offset=this._dashes.offset||0),this._dashes=e}})}}),i.extend(e.Text.prototype,e.Shape.prototype,{_flagValue:!0,_flagFamily:!0,_flagSize:!0,_flagLeading:!0,_flagAlignment:!0,_flagBaseline:!0,_flagStyle:!0,_flagWeight:!0,_flagDecoration:!0,_flagFill:!0,_flagStroke:!0,_flagLinewidth:!0,_flagOpacity:!0,_flagClassName:!0,_flagVisible:!0,_flagClip:!1,_value:"",_family:"sans-serif",_size:13,_leading:17,_alignment:"center",_baseline:"middle",_style:"normal",_weight:500,_decoration:"none",_fill:"#000",_stroke:"transparent",_linewidth:1,_opacity:1,_className:"",_visible:!0,_clip:!1,_dashes:[],constructor:e.Text,remove:function(){return this.parent?(this.parent.remove(this),this):this},clone:function(t){var r=new e.Text(this.value);return r.translation.copy(this.translation),r.rotation=this.rotation,r.scale=this.scale,i.each(e.Text.Properties,(function(e){r[e]=this[e]}),this),this.matrix.manual&&r.matrix.copy(this.matrix),t&&t.add(r),r._update()},toObject:function(){var t={translation:this.translation.toObject(),rotation:this.rotation,scale:this.scale};return this.matrix.manual&&(t.matrix=this.matrix.toObject()),i.each(e.Text.Properties,(function(e){t[e]=this[e]}),this),t},noFill:function(){return this.fill="transparent",this},noStroke:function(){return this.stroke=void 0,this.linewidth=void 0,this},getBoundingClientRect:function(e){var i,n,s,a,o,l;this._update(!0),i=e?this._matrix:t(this);var h=this.leading,c=this.value.length*this.size*r.Ratio;switch(this.alignment){case"left":s=0,a=c;break;case"right":s=-c,a=0;break;default:s=-c/2,a=c/2}switch(this.baseline){case"top":o=0,l=h;break;case"bottom":o=-h,l=0;break;default:o=-h/2,l=h/2}return{top:o=(n=i.multiply(s,o,1)).y,left:s=n.x,right:a=(n=i.multiply(a,l,1)).x,bottom:l=n.y,width:a-s,height:l-o}},flagReset:function(){return this._flagValue=this._flagFamily=this._flagSize=this._flagLeading=this._flagAlignment=this._flagFill=this._flagStroke=this._flagLinewidth=this._flagOpacity=this._flagVisible=this._flagClip=this._flagDecoration=this._flagClassName=this._flagBaseline=!1,e.Shape.prototype.flagReset.call(this),this}}),e.Text.MakeObservable(e.Text.prototype)}((void 0!==e?e:e||self||window).Two),function(e){var t=e.Utils,i=e.Stop=function(e,r,n){this._renderer={},this._renderer.type="stop",this.offset=t.isNumber(e)?e:i.Index<=0?0:1,this.opacity=t.isNumber(n)?n:1,this.color=t.isString(r)?r:i.Index<=0?"#fff":"#000",i.Index=(i.Index+1)%2};t.extend(i,{Index:0,Properties:["offset","opacity","color"],MakeObservable:function(e){t.each(i.Properties,(function(e){var t="_"+e,i="_flag"+e.charAt(0).toUpperCase()+e.slice(1);Object.defineProperty(this,e,{enumerable:!0,get:function(){return this[t]},set:function(e){this[t]=e,this[i]=!0,this.parent&&(this.parent._flagStops=!0)}})}),e)}}),t.extend(i.prototype,e.Utils.Events,{constructor:i,clone:function(){var e=new i;return t.each(i.Properties,(function(t){e[t]=this[t]}),this),e},toObject:function(){var e={};return t.each(i.Properties,(function(t){e[t]=this[t]}),this),e},flagReset:function(){return this._flagOffset=this._flagColor=this._flagOpacity=!1,this}}),i.MakeObservable(i.prototype),i.prototype.constructor=i;var r=e.Gradient=function(i){this._renderer={},this._renderer.type="gradient",this.id=e.Identifier+e.uniqueId(),this.classList=[],this._renderer.flagStops=t.bind(r.FlagStops,this),this._renderer.bindStops=t.bind(r.BindStops,this),this._renderer.unbindStops=t.bind(r.UnbindStops,this),this.spread="pad",this.stops=i};t.extend(r,{Stop:i,Properties:["spread"],MakeObservable:function(i){t.each(r.Properties,e.Utils.defineProperty,i),Object.defineProperty(i,"stops",{enumerable:!0,get:function(){return this._stops},set:function(t){this._renderer.flagStops;var i=this._renderer.bindStops,r=this._renderer.unbindStops;this._stops&&this._stops.unbind(e.Events.insert,i).unbind(e.Events.remove,r),this._stops=new e.Utils.Collection((t||[]).slice(0)),this._stops.bind(e.Events.insert,i).bind(e.Events.remove,r),i(this._stops)}})},FlagStops:function(){this._flagStops=!0},BindStops:function(t){for(var i=t.length;i--;)t[i].bind(e.Events.change,this._renderer.flagStops),t[i].parent=this;this._renderer.flagStops()},UnbindStops:function(t){for(var i=t.length;i--;)t[i].unbind(e.Events.change,this._renderer.flagStops),delete t[i].parent;this._renderer.flagStops()}}),t.extend(r.prototype,e.Utils.Events,{_flagStops:!1,_flagSpread:!1,clone:function(i){var n=t.map(this.stops,(function(e){return e.clone()})),s=new r(n);return t.each(e.Gradient.Properties,(function(e){s[e]=this[e]}),this),i&&i.add(s),s},toObject:function(){var e={stops:t.map(this.stops,(function(e){return e.toObject()}))};return t.each(r.Properties,(function(t){e[t]=this[t]}),this),e},_update:function(){return(this._flagSpread||this._flagStops)&&this.trigger(e.Events.change),this},flagReset:function(){return this._flagSpread=this._flagStops=!1,this}}),r.MakeObservable(r.prototype)}((void 0!==e?e:e||self||window).Two),function(e){var t=e.Utils,i=e.LinearGradient=function(r,n,s,a,o){e.Gradient.call(this,o),this._renderer.type="linear-gradient";var l=t.bind(i.FlagEndPoints,this);this.left=(new e.Vector).bind(e.Events.change,l),this.right=(new e.Vector).bind(e.Events.change,l),t.isNumber(r)&&(this.left.x=r),t.isNumber(n)&&(this.left.y=n),t.isNumber(s)&&(this.right.x=s),t.isNumber(a)&&(this.right.y=a)};t.extend(i,{Stop:e.Gradient.Stop,MakeObservable:function(t){e.Gradient.MakeObservable(t)},FlagEndPoints:function(){this._flagEndPoints=!0}}),t.extend(i.prototype,e.Gradient.prototype,{_flagEndPoints:!1,constructor:i,clone:function(r){var n=t.map(this.stops,(function(e){return e.clone()})),s=new i(this.left._x,this.left._y,this.right._x,this.right._y,n);return t.each(e.Gradient.Properties,(function(e){s[e]=this[e]}),this),r&&r.add(s),s},toObject:function(){var t=e.Gradient.prototype.toObject.call(this);return t.left=this.left.toObject(),t.right=this.right.toObject(),t},_update:function(){return(this._flagEndPoints||this._flagSpread||this._flagStops)&&this.trigger(e.Events.change),this},flagReset:function(){return this._flagEndPoints=!1,e.Gradient.prototype.flagReset.call(this),this}}),i.MakeObservable(i.prototype)}((void 0!==e?e:e||self||window).Two),function(e){var t=e.Utils,i=e.RadialGradient=function(i,r,n,s,a,o){e.Gradient.call(this,s),this._renderer.type="radial-gradient",this.center=(new e.Vector).bind(e.Events.change,t.bind((function(){this._flagCenter=!0}),this)),this.radius=t.isNumber(n)?n:20,this.focal=(new e.Vector).bind(e.Events.change,t.bind((function(){this._flagFocal=!0}),this)),t.isNumber(i)&&(this.center.x=i),t.isNumber(r)&&(this.center.y=r),this.focal.copy(this.center),t.isNumber(a)&&(this.focal.x=a),t.isNumber(o)&&(this.focal.y=o)};t.extend(i,{Stop:e.Gradient.Stop,Properties:["radius"],MakeObservable:function(r){e.Gradient.MakeObservable(r),t.each(i.Properties,e.Utils.defineProperty,r)}}),t.extend(i.prototype,e.Gradient.prototype,{_flagRadius:!1,_flagCenter:!1,_flagFocal:!1,constructor:i,clone:function(r){var n=t.map(this.stops,(function(e){return e.clone()})),s=new i(this.center._x,this.center._y,this._radius,n,this.focal._x,this.focal._y);return t.each(e.Gradient.Properties.concat(i.Properties),(function(e){s[e]=this[e]}),this),r&&r.add(s),s},toObject:function(){var r=e.Gradient.prototype.toObject.call(this);return t.each(i.Properties,(function(e){r[e]=this[e]}),this),r.center=this.center.toObject(),r.focal=this.focal.toObject(),r},_update:function(){return(this._flagRadius||this._flatCenter||this._flagFocal||this._flagSpread||this._flagStops)&&this.trigger(e.Events.change),this},flagReset:function(){return this._flagRadius=this._flagCenter=this._flagFocal=!1,e.Gradient.prototype.flagReset.call(this),this}}),i.MakeObservable(i.prototype)}((void 0!==e?e:e||self||window).Two),function(e){var t,i=e.root,r=e.Utils,n={video:/\.(mp4|webm|ogg)$/i,image:/\.(jpe?g|png|gif|tiff|webp)$/i,effect:/texture|gradient/i};i.document&&(t=document.createElement("a"));var s=e.Texture=function(t,i){if(this._renderer={},this._renderer.type="texture",this._renderer.flagOffset=r.bind(s.FlagOffset,this),this._renderer.flagScale=r.bind(s.FlagScale,this),this.id=e.Identifier+e.uniqueId(),this.classList=[],this.loaded=!1,this.repeat="no-repeat",this.offset=new e.Vector,r.isFunction(i)){var n=r.bind((function(){this.unbind(e.Events.load,n),r.isFunction(i)&&i()}),this);this.bind(e.Events.load,n)}r.isString(t)?this.src=t:r.isElement(t)&&(this.image=t),this._update()};r.extend(s,{Properties:["src","loaded","repeat"],RegularExpressions:n,ImageRegistry:new e.Registry,getAbsoluteURL:function(e){return t?(t.href=e,t.href):e},loadHeadlessBuffer:new Function("texture","loaded",['var fs = require("fs");',"var buffer = fs.readFileSync(texture.src);","texture.image.src = buffer;","loaded();"].join("\n")),getImage:function(t){var r,a=s.getAbsoluteURL(t);return s.ImageRegistry.contains(a)?s.ImageRegistry.get(a):(e.Utils.Image?(r=new e.Utils.Image,e.CanvasRenderer.Utils.shim(r,"img")):i.document?r=n.video.test(a)?document.createElement("video"):document.createElement("img"):console.warn("Two.js: no prototypical image defined for Two.Texture"),r.crossOrigin="anonymous",r)},Register:{canvas:function(e,t){e._src="#"+e.id,s.ImageRegistry.add(e.src,e.image),r.isFunction(t)&&t()},img:function(t,i){var n=function(e){r.isFunction(t.image.removeEventListener)&&(t.image.removeEventListener("load",n,!1),t.image.removeEventListener("error",a,!1)),r.isFunction(i)&&i()},a=function(i){throw r.isFunction(t.image.removeEventListener)&&(t.image.removeEventListener("load",n,!1),t.image.removeEventListener("error",a,!1)),new e.Utils.Error("unable to load "+t.src)};r.isNumber(t.image.width)&&t.image.width>0&&r.isNumber(t.image.height)&&t.image.height>0?n():r.isFunction(t.image.addEventListener)&&(t.image.addEventListener("load",n,!1),t.image.addEventListener("error",a,!1)),t._src=s.getAbsoluteURL(t._src),t.image&&t.image.getAttribute("two-src")||(t.image.setAttribute("two-src",t.src),s.ImageRegistry.add(t.src,t.image),e.Utils.isHeadless?s.loadHeadlessBuffer(t,n):t.image.src=t.src)},video:function(t,i){var n=function(e){t.image.removeEventListener("canplaythrough",n,!1),t.image.removeEventListener("error",a,!1),t.image.width=t.image.videoWidth,t.image.height=t.image.videoHeight,t.image.play(),r.isFunction(i)&&i()},a=function(i){throw t.image.removeEventListener("canplaythrough",n,!1),t.image.removeEventListener("error",a,!1),new e.Utils.Error("unable to load "+t.src)};if(t._src=s.getAbsoluteURL(t._src),t.image.addEventListener("canplaythrough",n,!1),t.image.addEventListener("error",a,!1),!t.image||!t.image.getAttribute("two-src")){if(e.Utils.isHeadless)throw new e.Utils.Error("video textures are not implemented in headless environments.");t.image.setAttribute("two-src",t.src),s.ImageRegistry.add(t.src,t.image),t.image.src=t.src,t.image.loop=!0,t.image.load()}}},load:function(e,t){e.src;var i=e.image,r=i&&i.nodeName.toLowerCase();e._flagImage&&(/canvas/i.test(r)?s.Register.canvas(e,t):(e._src=i.getAttribute("two-src")||i.src,s.Register[r](e,t))),e._flagSrc&&(i||(e.image=s.getImage(e.src)),r=e.image.nodeName.toLowerCase(),s.Register[r](e,t))},FlagOffset:function(){this._flagOffset=!0},FlagScale:function(){this._flagScale=!0},MakeObservable:function(t){r.each(s.Properties,e.Utils.defineProperty,t),Object.defineProperty(t,"image",{enumerable:!0,get:function(){return this._image},set:function(e){var t;switch(e&&e.nodeName.toLowerCase()){case"canvas":t="#"+e.id;break;default:t=e.src}s.ImageRegistry.contains(t)?this._image=s.ImageRegistry.get(e.src):this._image=e,this._flagImage=!0}}),Object.defineProperty(t,"offset",{enumerable:!0,get:function(){return this._offset},set:function(t){this._offset&&this._offset.unbind(e.Events.change,this._renderer.flagOffset),this._offset=t,this._offset.bind(e.Events.change,this._renderer.flagOffset),this._flagOffset=!0}}),Object.defineProperty(t,"scale",{enumerable:!0,get:function(){return this._scale},set:function(t){this._scale instanceof e.Vector&&this._scale.unbind(e.Events.change,this._renderer.flagScale),this._scale=t,this._scale instanceof e.Vector&&this._scale.bind(e.Events.change,this._renderer.flagScale),this._flagScale=!0}})}}),r.extend(s.prototype,e.Utils.Events,e.Shape.prototype,{_flagSrc:!1,_flagImage:!1,_flagVideo:!1,_flagLoaded:!1,_flagRepeat:!1,_flagOffset:!1,_flagScale:!1,_src:"",_image:null,_loaded:!1,_repeat:"no-repeat",_scale:1,_offset:null,constructor:s,clone:function(){var e=new s(this.src);return e.repeat=this.repeat,e.offset.copy(this.origin),e.scale=this.scale,e},toObject:function(){return{src:this.src,repeat:this.repeat,origin:this.origin.toObject(),scale:r.isNumber(this.scale)?this.scale:this.scale.toObject()}},_update:function(){return(this._flagSrc||this._flagImage)&&(this.trigger(e.Events.change),(this._flagSrc||this._flagImage)&&(this.loaded=!1,s.load(this,r.bind((function(){this.loaded=!0,this.trigger(e.Events.change).trigger(e.Events.load)}),this)))),this._image&&this._image.readyState>=4&&(this._flagVideo=!0),this},flagReset:function(){return this._flagSrc=this._flagImage=this._flagLoaded=this._flagVideo=this._flagScale=this._flagOffset=!1,this}}),s.MakeObservable(s.prototype)}((void 0!==e?e:e||self||window).Two),function(e){var t=e.Utils,i=e.Path,r=e.Rectangle,n=e.Sprite=function(r,n,s,a,o,l){i.call(this,[new e.Anchor,new e.Anchor,new e.Anchor,new e.Anchor],!0),this.noStroke(),this.noFill(),r instanceof e.Texture?this.texture=r:t.isString(r)&&(this.texture=new e.Texture(r)),this.origin=new e.Vector,this._update(),this.translation.set(n||0,s||0),t.isNumber(a)&&(this.columns=a),t.isNumber(o)&&(this.rows=o),t.isNumber(l)&&(this.frameRate=l),this.index=0};t.extend(n,{Properties:["texture","columns","rows","frameRate","index"],MakeObservable:function(i){r.MakeObservable(i),t.each(n.Properties,e.Utils.defineProperty,i)}}),t.extend(n.prototype,r.prototype,{_flagTexture:!1,_flagColumns:!1,_flagRows:!1,_flagFrameRate:!1,flagIndex:!1,_amount:1,_duration:0,_startTime:0,_playing:!1,_firstFrame:0,_lastFrame:0,_loop:!0,_texture:null,_columns:1,_rows:1,_frameRate:0,_index:0,_origin:null,constructor:n,play:function(e,i,r){return this._playing=!0,this._firstFrame=0,this._lastFrame=this.amount-1,this._startTime=t.performance.now(),t.isNumber(e)&&(this._firstFrame=e),t.isNumber(i)&&(this._lastFrame=i),t.isFunction(r)?this._onLastFrame=r:delete this._onLastFrame,this._index!==this._firstFrame&&(this._startTime-=1e3*Math.abs(this._index-this._firstFrame)/this._frameRate),this},pause:function(){return this._playing=!1,this},stop:function(){return this._playing=!1,this._index=0,this},clone:function(e){var t=new n(this.texture,this.translation.x,this.translation.y,this.columns,this.rows,this.frameRate);return this.playing&&(t.play(this._firstFrame,this._lastFrame),t._loop=this._loop),e&&e.add(t),t},toObject:function(){var e=r.prototype.toObject.call(this);return e.texture=this.texture.toObject(),e.columns=this.columns,e.rows=this.rows,e.frameRate=this.frameRate,e.index=this.index,e._firstFrame=this._firstFrame,e._lastFrame=this._lastFrame,e._loop=this._loop,e},_update:function(){var e,i,n,s,a,o,l,h,c,d=this._texture,u=this._columns,f=this._rows;if((this._flagColumns||this._flagRows)&&(this._amount=this._columns*this._rows),this._flagFrameRate&&(this._duration=1e3*this._amount/this._frameRate),this._flagTexture&&(this.fill=this._texture),this._texture.loaded){e=(l=d.image.width)/u,i=(h=d.image.height)/f,s=this._amount,this.width!==e&&(this.width=e),this.height!==i&&(this.height=i),this._playing&&this._frameRate>0&&(t.isNaN(this._lastFrame)&&(this._lastFrame=s-1),n=t.performance.now()-this._startTime,a=1e3*((c=this._lastFrame+1)-this._firstFrame)/this._frameRate,this._loop?n%=a:n=Math.min(n,a),o=t.lerp(this._firstFrame,c,n/a),(o=Math.floor(o))!==this._index&&(this._index=o,o>=this._lastFrame-1&&this._onLastFrame&&this._onLastFrame()));var _=-e*(this._index%u)+(l-e)/2,g=-i*Math.floor(this._index/u)+(h-i)/2;_!==d.offset.x&&(d.offset.x=_),g!==d.offset.y&&(d.offset.y=g)}return r.prototype._update.call(this),this},flagReset:function(){return this._flagTexture=this._flagColumns=this._flagRows=this._flagFrameRate=!1,r.prototype.flagReset.call(this),this}}),n.MakeObservable(n.prototype)}((void 0!==e?e:e||self||window).Two),function(e){var t=e.Utils,i=e.Path,r=e.Rectangle,n=e.ImageSequence=function(r,s,a,o){i.call(this,[new e.Anchor,new e.Anchor,new e.Anchor,new e.Anchor],!0),this._renderer.flagTextures=t.bind(n.FlagTextures,this),this._renderer.bindTextures=t.bind(n.BindTextures,this),this._renderer.unbindTextures=t.bind(n.UnbindTextures,this),this.noStroke(),this.noFill(),t.isObject(r)?this.textures=t.map(r,n.GenerateTexture,this):this.textures=[n.GenerateTexture(r)],this.origin=new e.Vector,this._update(),this.translation.set(s||0,a||0),t.isNumber(o)?this.frameRate=o:this.frameRate=n.DefaultFrameRate,this.index=0};t.extend(n,{Properties:["frameRate","index"],DefaultFrameRate:30,FlagTextures:function(){this._flagTextures=!0},BindTextures:function(t){for(var i=t.length;i--;)t[i].bind(e.Events.change,this._renderer.flagTextures);this._renderer.flagTextures()},UnbindTextures:function(t){for(var i=t.length;i--;)t[i].unbind(e.Events.change,this._renderer.flagTextures);this._renderer.flagTextures()},MakeObservable:function(i){r.MakeObservable(i),t.each(n.Properties,e.Utils.defineProperty,i),Object.defineProperty(i,"textures",{enumerable:!0,get:function(){return this._textures},set:function(t){this._renderer.flagTextures;var i=this._renderer.bindTextures,r=this._renderer.unbindTextures;this._textures&&this._textures.unbind(e.Events.insert,i).unbind(e.Events.remove,r),this._textures=new e.Utils.Collection((t||[]).slice(0)),this._textures.bind(e.Events.insert,i).bind(e.Events.remove,r),i(this._textures)}})},GenerateTexture:function(i){return i instanceof e.Texture?i:t.isString(i)?new e.Texture(i):void 0}}),t.extend(n.prototype,r.prototype,{_flagTextures:!1,_flagFrameRate:!1,_flagIndex:!1,_amount:1,_duration:0,_index:0,_startTime:0,_playing:!1,_firstFrame:0,_lastFrame:0,_loop:!0,_textures:null,_frameRate:0,_origin:null,constructor:n,play:function(e,i,r){return this._playing=!0,this._firstFrame=0,this._lastFrame=this.amount-1,this._startTime=t.performance.now(),t.isNumber(e)&&(this._firstFrame=e),t.isNumber(i)&&(this._lastFrame=i),t.isFunction(r)?this._onLastFrame=r:delete this._onLastFrame,this._index!==this._firstFrame&&(this._startTime-=1e3*Math.abs(this._index-this._firstFrame)/this._frameRate),this},pause:function(){return this._playing=!1,this},stop:function(){return this._playing=!1,this._index=this._firstFrame,this},clone:function(e){var t=new n(this.textures,this.translation.x,this.translation.y,this.frameRate);return t._loop=this._loop,this._playing&&t.play(),e&&e.add(t),t},toObject:function(){var e=r.prototype.toObject.call(this);return e.textures=t.map(this.textures,(function(e){return e.toObject()})),e.frameRate=this.frameRate,e.index=this.index,e._firstFrame=this._firstFrame,e._lastFrame=this._lastFrame,e._loop=this._loop,e},_update:function(){var i,n,s,a,o,l,h,c,d=this._textures;return this._flagTextures&&(this._amount=d.length),this._flagFrameRate&&(this._duration=1e3*this._amount/this._frameRate),this._playing&&this._frameRate>0?(a=this._amount,t.isNaN(this._lastFrame)&&(this._lastFrame=a-1),s=t.performance.now()-this._startTime,o=1e3*((c=this._lastFrame+1)-this._firstFrame)/this._frameRate,this._loop?s%=o:s=Math.min(s,o),h=t.lerp(this._firstFrame,c,s/o),(h=Math.floor(h))!==this._index&&(this._index=h,(l=d[this._index]).loaded&&(i=l.image.width,n=l.image.height,this.width!==i&&(this.width=i),this.height!==n&&(this.height=n),this.fill=l,h>=this._lastFrame-1&&this._onLastFrame&&this._onLastFrame()))):!this._flagIndex&&this.fill instanceof e.Texture||((l=d[this._index]).loaded&&(i=l.image.width,n=l.image.height,this.width!==i&&(this.width=i),this.height!==n&&(this.height=n)),this.fill=l),r.prototype._update.call(this),this},flagReset:function(){return this._flagTextures=this._flagFrameRate=!1,r.prototype.flagReset.call(this),this}}),n.MakeObservable(n.prototype)}((void 0!==e?e:e||self||window).Two),function(e){var t=Math.min,i=Math.max,r=e.Utils,n=function(){e.Utils.Collection.apply(this,arguments),Object.defineProperty(this,"_events",{value:{},enumerable:!1}),this.ids={},this.on(e.Events.insert,this.attach),this.on(e.Events.remove,this.detach),n.prototype.attach.apply(this,arguments)};n.prototype=new e.Utils.Collection,r.extend(n.prototype,{constructor:n,attach:function(e){for(var t=0;t<e.length;t++)this.ids[e[t].id]=e[t];return this},detach:function(e){for(var t=0;t<e.length;t++)delete this.ids[e[t].id];return this}});var s=e.Group=function(t){e.Shape.call(this,!0),this._renderer.type="group",this.additions=[],this.subtractions=[],this.children=r.isArray(t)?t:arguments};function a(e,t){var i,n=e.parent;function s(){t.subtractions.length>0&&(i=r.indexOf(t.subtractions,e))>=0&&t.subtractions.splice(i,1),t.additions.length>0&&(i=r.indexOf(t.additions,e))>=0&&t.additions.splice(i,1),e.parent=t,t.additions.push(e),t._flagAdditions=!0}function a(){(i=r.indexOf(n.additions,e))>=0&&n.additions.splice(i,1),(i=r.indexOf(n.subtractions,e))<0&&(n.subtractions.push(e),n._flagSubtractions=!0)}n!==t?(n&&n.children.ids[e.id]&&(i=r.indexOf(n.children,e),n.children.splice(i,1),a()),t?s():(a(),n._flagAdditions&&0===n.additions.length&&(n._flagAdditions=!1),n._flagSubtractions&&0===n.subtractions.length&&(n._flagSubtractions=!1),delete e.parent)):s()}r.extend(s,{Children:n,InsertChildren:function(e){for(var t=0;t<e.length;t++)a.call(this,e[t],this)},RemoveChildren:function(e){for(var t=0;t<e.length;t++)a.call(this,e[t])},OrderChildren:function(e){this._flagOrder=!0},Properties:["fill","stroke","linewidth","visible","cap","join","miter","closed","curved","automatic"],MakeObservable:function(t){var i=e.Group.Properties;Object.defineProperty(t,"opacity",{enumerable:!0,get:function(){return this._opacity},set:function(e){this._flagOpacity=this._opacity!==e,this._opacity=e}}),Object.defineProperty(t,"beginning",{enumerable:!0,get:function(){return this._beginning},set:function(e){this._flagBeginning=this._beginning!==e,this._beginning=e}}),Object.defineProperty(t,"ending",{enumerable:!0,get:function(){return this._ending},set:function(e){this._flagEnding=this._ending!==e,this._ending=e}}),Object.defineProperty(t,"length",{enumerable:!0,get:function(){if(this._flagLength||this._length<=0){if(this._length=0,!this.children)return this._length;for(var e=0;e<this.children.length;e++){var t=this.children[e];this._length+=t.length}}return this._length}}),e.Shape.MakeObservable(t),s.MakeGetterSetters(t,i),Object.defineProperty(t,"children",{enumerable:!0,get:function(){return this._children},set:function(t){var i=r.bind(s.InsertChildren,this),a=r.bind(s.RemoveChildren,this),o=r.bind(s.OrderChildren,this);this._children&&this._children.unbind(),this._children=new n(t),this._children.bind(e.Events.insert,i),this._children.bind(e.Events.remove,a),this._children.bind(e.Events.order,o)}}),Object.defineProperty(t,"mask",{enumerable:!0,get:function(){return this._mask},set:function(e){this._mask=e,this._flagMask=!0,e.clip||(e.clip=!0)}})},MakeGetterSetters:function(e,t){r.isArray(t)||(t=[t]),r.each(t,(function(t){s.MakeGetterSetter(e,t)}))},MakeGetterSetter:function(e,t){var i="_"+t;Object.defineProperty(e,t,{enumerable:!0,get:function(){return this[i]},set:function(e){this[i]=e;for(var r=0;r<this.children.length;r++){this.children[r][t]=e}}})}}),r.extend(s.prototype,e.Shape.prototype,{_flagAdditions:!1,_flagSubtractions:!1,_flagOrder:!1,_flagOpacity:!0,_flagBeginning:!1,_flagEnding:!1,_flagLength:!1,_flagMask:!1,_fill:"#fff",_stroke:"#000",_linewidth:1,_opacity:1,_visible:!0,_cap:"round",_join:"round",_miter:4,_closed:!0,_curved:!1,_automatic:!0,_beginning:0,_ending:1,_length:0,_mask:null,constructor:s,clone:function(e){var t=new s,i=r.map(this.children,(function(e){return e.clone()}));return t.add(i),t.opacity=this.opacity,this.mask&&(t.mask=this.mask),t.translation.copy(this.translation),t.rotation=this.rotation,t.scale=this.scale,t.className=this.className,this.matrix.manual&&t.matrix.copy(this.matrix),e&&e.add(t),t._update()},toObject:function(){var t={children:[],translation:this.translation.toObject(),rotation:this.rotation,scale:this.scale instanceof e.Vector?this.scale.toObject():this.scale,opacity:this.opacity,className:this.className,mask:this.mask?this.mask.toObject():null};return this.matrix.manual&&(t.matrix=this.matrix.toObject()),r.each(this.children,(function(e,i){t.children[i]=e.toObject()}),this),t},corner:function(){var e=this.getBoundingClientRect(!0),t={x:e.left,y:e.top};return this.children.forEach((function(e){e.translation.sub(t)})),this},center:function(){var e=this.getBoundingClientRect(!0);return e.centroid={x:e.left+e.width/2-this.translation.x,y:e.top+e.height/2-this.translation.y},this.children.forEach((function(t){t.isShape&&t.translation.sub(e.centroid)})),this},getById:function(e){var t=null;return function i(r){if(r.id===e)return r;if(r.children)for(var n=0;n<r.children.length;n++)if(t=i(r.children[n]))return t;return null}(this)},getByClassName:function(e){var t=[];return function i(n){if(r.indexOf(n.classList,e)>=0&&t.push(n),n.children)for(var s=0;s<n.children.length;s++){i(n.children[s])}return t}(this)},getByType:function(e){var t=[];return function i(r){if(r instanceof e&&t.push(r),r.children)for(var n=0;n<r.children.length;n++){i(r.children[n])}return t}(this)},add:function(e){e=e instanceof Array?e.slice():r.toArray(arguments);for(var t=0;t<e.length;t++){var i=e[t];if(i&&i.id){var n=r.indexOf(this.children,i);n>=0&&this.children.splice(n,1),this.children.push(i)}}return this},remove:function(e){var t=arguments.length,i=this.parent;if(t<=0&&i)return i.remove(this),this;e=e instanceof Array?e.slice():r.toArray(arguments);for(var n=0;n<e.length;n++)e[n]&&this.children.ids[e[n].id]&&this.children.splice(r.indexOf(this.children,e[n]),1);return this},getBoundingClientRect:function(n){var s;this._update(!0);for(var a=1/0,o=-1/0,l=1/0,h=-1/0,c=e.Texture.RegularExpressions.effect,d=0;d<this.children.length;d++){var u=this.children[d];u.visible&&!c.test(u._renderer.type)&&(s=u.getBoundingClientRect(n),r.isNumber(s.top)&&r.isNumber(s.left)&&r.isNumber(s.right)&&r.isNumber(s.bottom)&&(l=t(s.top,l),a=t(s.left,a),o=i(s.right,o),h=i(s.bottom,h)))}return{top:l,left:a,right:o,bottom:h,width:o-a,height:h-l}},noFill:function(){return this.children.forEach((function(e){e.noFill()})),this},noStroke:function(){return this.children.forEach((function(e){e.noStroke()})),this},subdivide:function(){var e=arguments;return this.children.forEach((function(t){t.subdivide.apply(t,e)})),this},_update:function(){if(this._flagBeginning||this._flagEnding)for(var t=Math.min(this._beginning,this._ending),i=Math.max(this._beginning,this._ending),r=this.length,n=0,s=t*r,a=i*r,o=0;o<this.children.length;o++){var l=this.children[o],h=l.length;s>n+h?(l.beginning=1,l.ending=1):a<n?(l.beginning=0,l.ending=0):s>n&&s<n+h?(l.beginning=(s-n)/h,l.ending=1):a>n&&a<n+h?(l.beginning=0,l.ending=(a-n)/h):(l.beginning=0,l.ending=1),n+=h}return e.Shape.prototype._update.apply(this,arguments)},flagReset:function(){return this._flagAdditions&&(this.additions.length=0,this._flagAdditions=!1),this._flagSubtractions&&(this.subtractions.length=0,this._flagSubtractions=!1),this._flagOrder=this._flagMask=this._flagOpacity=this._flagBeginning=this._flagEnding=!1,e.Shape.prototype.flagReset.call(this),this}}),s.MakeObservable(s.prototype)}((void 0!==e?e:e||self||window).Two)}));function r(e,t){var i=e.__state.conversionName.toString(),r=Math.round(e.r),n=Math.round(e.g),s=Math.round(e.b),a=e.a,o=Math.round(e.h),l=e.s.toFixed(1),h=e.v.toFixed(1);if(t||"THREE_CHAR_HEX"===i||"SIX_CHAR_HEX"===i){for(var c=e.hex.toString(16);c.length<6;)c="0"+c;return"#"+c}return"CSS_RGB"===i?"rgb("+r+","+n+","+s+")":"CSS_RGBA"===i?"rgba("+r+","+n+","+s+","+a+")":"HEX"===i?"0x"+e.hex.toString(16):"RGB_ARRAY"===i?"["+r+","+n+","+s+"]":"RGBA_ARRAY"===i?"["+r+","+n+","+s+","+a+"]":"RGB_OBJ"===i?"{r:"+r+",g:"+n+",b:"+s+"}":"RGBA_OBJ"===i?"{r:"+r+",g:"+n+",b:"+s+",a:"+a+"}":"HSV_OBJ"===i?"{h:"+o+",s:"+l+",v:"+h+"}":"HSVA_OBJ"===i?"{h:"+o+",s:"+l+",v:"+h+",a:"+a+"}":"unknown format"}var n=Array.prototype.forEach,s=Array.prototype.slice,a={BREAK:{},extend:function(e){return this.each(s.call(arguments,1),(function(t){(this.isObject(t)?Object.keys(t):[]).forEach(function(i){this.isUndefined(t[i])||(e[i]=t[i])}.bind(this))}),this),e},defaults:function(e){return this.each(s.call(arguments,1),(function(t){(this.isObject(t)?Object.keys(t):[]).forEach(function(i){this.isUndefined(e[i])&&(e[i]=t[i])}.bind(this))}),this),e},compose:function(){var e=s.call(arguments);return function(){for(var t=s.call(arguments),i=e.length-1;i>=0;i--)t=[e[i].apply(this,t)];return t[0]}},each:function(e,t,i){if(e)if(n&&e.forEach&&e.forEach===n)e.forEach(t,i);else if(e.length===e.length+0){var r,s=void 0;for(s=0,r=e.length;s<r;s++)if(s in e&&t.call(i,e[s],s)===this.BREAK)return}else for(var a in e)if(t.call(i,e[a],a)===this.BREAK)return},defer:function(e){setTimeout(e,0)},debounce:function(e,t,i){var r=void 0;return function(){var n=this,s=arguments;function a(){r=null,i||e.apply(n,s)}var o=i||!r;clearTimeout(r),r=setTimeout(a,t),o&&e.apply(n,s)}},toArray:function(e){return e.toArray?e.toArray():s.call(e)},isUndefined:function(e){return void 0===e},isNull:function(e){return null===e},isNaN:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return isNaN(e)})),isArray:Array.isArray||function(e){return e.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return!1===e||!0===e},isFunction:function(e){return e instanceof Function}},o=[{litmus:a.isString,conversions:{THREE_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString()+t[1].toString()+t[2].toString()+t[2].toString()+t[3].toString()+t[3].toString(),0)}},write:r},SIX_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9]{6})$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString(),0)}},write:r},CSS_RGB:{read:function(e){var t=e.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3])}},write:r},CSS_RGBA:{read:function(e){var t=e.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3]),a:parseFloat(t[4])}},write:r}}},{litmus:a.isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:a.isArray,conversions:{RGB_ARRAY:{read:function(e){return 3===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return 4===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:a.isObject,conversions:{RGBA_OBJ:{read:function(e){return!!(a.isNumber(e.r)&&a.isNumber(e.g)&&a.isNumber(e.b)&&a.isNumber(e.a))&&{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return!!(a.isNumber(e.r)&&a.isNumber(e.g)&&a.isNumber(e.b))&&{space:"RGB",r:e.r,g:e.g,b:e.b}},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return!!(a.isNumber(e.h)&&a.isNumber(e.s)&&a.isNumber(e.v)&&a.isNumber(e.a))&&{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return!!(a.isNumber(e.h)&&a.isNumber(e.s)&&a.isNumber(e.v))&&{space:"HSV",h:e.h,s:e.s,v:e.v}},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}],l=void 0,h=void 0,c=function(){h=!1;var e=arguments.length>1?a.toArray(arguments):arguments[0];return a.each(o,(function(t){if(t.litmus(e))return a.each(t.conversions,(function(t,i){if(l=t.read(e),!1===h&&!1!==l)return h=l,l.conversionName=i,l.conversion=t,a.BREAK})),a.BREAK})),h},d=void 0,u={hsv_to_rgb:function(e,t,i){var r=Math.floor(e/60)%6,n=e/60-Math.floor(e/60),s=i*(1-t),a=i*(1-n*t),o=i*(1-(1-n)*t),l=[[i,o,s],[a,i,s],[s,i,o],[s,a,i],[o,s,i],[i,s,a]][r];return{r:255*l[0],g:255*l[1],b:255*l[2]}},rgb_to_hsv:function(e,t,i){var r=Math.min(e,t,i),n=Math.max(e,t,i),s=n-r,a=void 0;return 0===n?{h:NaN,s:0,v:0}:(a=e===n?(t-i)/s:t===n?2+(i-e)/s:4+(e-t)/s,(a/=6)<0&&(a+=1),{h:360*a,s:s/n,v:n/255})},rgb_to_hex:function(e,t,i){var r=this.hex_with_component(0,2,e);return r=this.hex_with_component(r,1,t),r=this.hex_with_component(r,0,i)},component_from_hex:function(e,t){return e>>8*t&255},hex_with_component:function(e,t,i){return i<<(d=8*t)|e&~(255<<d)}},f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},g=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),p=function e(t,i,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,i);if(void 0===n){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,i,r)}if("value"in n)return n.value;var a=n.get;return void 0!==a?a.call(r):void 0},m=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},v=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},y=function(){function e(){if(_(this,e),this.__state=c.apply(this,arguments),!1===this.__state)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return g(e,[{key:"toString",value:function(){return r(this)}},{key:"toHexString",value:function(){return r(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),e}();function b(e,t,i){Object.defineProperty(e,t,{get:function(){return"RGB"===this.__state.space||y.recalculateRGB(this,t,i),this.__state[t]},set:function(e){"RGB"!==this.__state.space&&(y.recalculateRGB(this,t,i),this.__state.space="RGB"),this.__state[t]=e}})}function x(e,t){Object.defineProperty(e,t,{get:function(){return"HSV"===this.__state.space||y.recalculateHSV(this),this.__state[t]},set:function(e){"HSV"!==this.__state.space&&(y.recalculateHSV(this),this.__state.space="HSV"),this.__state[t]=e}})}y.recalculateRGB=function(e,t,i){if("HEX"===e.__state.space)e.__state[t]=u.component_from_hex(e.__state.hex,i);else{if("HSV"!==e.__state.space)throw new Error("Corrupted color state");a.extend(e.__state,u.hsv_to_rgb(e.__state.h,e.__state.s,e.__state.v))}},y.recalculateHSV=function(e){var t=u.rgb_to_hsv(e.r,e.g,e.b);a.extend(e.__state,{s:t.s,v:t.v}),a.isNaN(t.h)?a.isUndefined(e.__state.h)&&(e.__state.h=0):e.__state.h=t.h},y.COMPONENTS=["r","g","b","h","s","v","hex","a"],b(y.prototype,"r",2),b(y.prototype,"g",1),b(y.prototype,"b",0),x(y.prototype,"h"),x(y.prototype,"s"),x(y.prototype,"v"),Object.defineProperty(y.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}}),Object.defineProperty(y.prototype,"hex",{get:function(){return"HEX"!==this.__state.space&&(this.__state.hex=u.rgb_to_hex(this.r,this.g,this.b),this.__state.space="HEX"),this.__state.hex},set:function(e){this.__state.space="HEX",this.__state.hex=e}});var w=function(){function e(t,i){_(this,e),this.initialValue=t[i],this.domElement=document.createElement("div"),this.object=t,this.property=i,this.__onChange=void 0,this.__onFinishChange=void 0}return g(e,[{key:"onChange",value:function(e){return this.__onChange=e,this}},{key:"onFinishChange",value:function(e){return this.__onFinishChange=e,this}},{key:"setValue",value:function(e){return this.object[this.property]=e,this.__onChange&&this.__onChange.call(this,e),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),e}(),E={};a.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},(function(e,t){a.each(e,(function(e){E[e]=t}))}));var A=/(\d+(\.\d+)?)px/;function k(e){if("0"===e||a.isUndefined(e))return 0;var t=e.match(A);return a.isNull(t)?0:parseFloat(t[1])}var C={makeSelectable:function(e,t){void 0!==e&&void 0!==e.style&&(e.onselectstart=t?function(){return!1}:function(){},e.style.MozUserSelect=t?"auto":"none",e.style.KhtmlUserSelect=t?"auto":"none",e.unselectable=t?"on":"off")},makeFullscreen:function(e,t,i){var r=i,n=t;a.isUndefined(n)&&(n=!0),a.isUndefined(r)&&(r=!0),e.style.position="absolute",n&&(e.style.left=0,e.style.right=0),r&&(e.style.top=0,e.style.bottom=0)},fakeEvent:function(e,t,i,r){var n=i||{},s=E[t];if(!s)throw new Error("Event type "+t+" not supported.");var o=document.createEvent(s);switch(s){case"MouseEvents":var l=n.x||n.clientX||0,h=n.y||n.clientY||0;o.initMouseEvent(t,n.bubbles||!1,n.cancelable||!0,window,n.clickCount||1,0,0,l,h,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var c=o.initKeyboardEvent||o.initKeyEvent;a.defaults(n,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),c(t,n.bubbles||!1,n.cancelable,window,n.ctrlKey,n.altKey,n.shiftKey,n.metaKey,n.keyCode,n.charCode);break;default:o.initEvent(t,n.bubbles||!1,n.cancelable||!0)}a.defaults(o,r),e.dispatchEvent(o)},bind:function(e,t,i,r){var n=r||!1;return e.addEventListener?e.addEventListener(t,i,n):e.attachEvent&&e.attachEvent("on"+t,i),C},unbind:function(e,t,i,r){var n=r||!1;return e.removeEventListener?e.removeEventListener(t,i,n):e.detachEvent&&e.detachEvent("on"+t,i),C},addClass:function(e,t){if(void 0===e.className)e.className=t;else if(e.className!==t){var i=e.className.split(/ +/);-1===i.indexOf(t)&&(i.push(t),e.className=i.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return C},removeClass:function(e,t){if(t)if(e.className===t)e.removeAttribute("class");else{var i=e.className.split(/ +/),r=i.indexOf(t);-1!==r&&(i.splice(r,1),e.className=i.join(" "))}else e.className=void 0;return C},hasClass:function(e,t){return new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)").test(e.className)||!1},getWidth:function(e){var t=getComputedStyle(e);return k(t["border-left-width"])+k(t["border-right-width"])+k(t["padding-left"])+k(t["padding-right"])+k(t.width)},getHeight:function(e){var t=getComputedStyle(e);return k(t["border-top-width"])+k(t["border-bottom-width"])+k(t["padding-top"])+k(t["padding-bottom"])+k(t.height)},getOffset:function(e){var t=e,i={left:0,top:0};if(t.offsetParent)do{i.left+=t.offsetLeft,i.top+=t.offsetTop,t=t.offsetParent}while(t);return i},isActive:function(e){return e===document.activeElement&&(e.type||e.href)}},S=function(e){function t(e,i){_(this,t);var r=v(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i)),n=r;return r.__prev=r.getValue(),r.__checkbox=document.createElement("input"),r.__checkbox.setAttribute("type","checkbox"),C.bind(r.__checkbox,"change",(function(){n.setValue(!n.__prev)}),!1),r.domElement.appendChild(r.__checkbox),r.updateDisplay(),r}return m(t,e),g(t,[{key:"setValue",value:function(e){var i=p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),i}},{key:"updateDisplay",value:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(w),O=function(e){function t(e,i,r){_(this,t);var n=v(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i)),s=r,o=n;if(n.__select=document.createElement("select"),a.isArray(s)){var l={};a.each(s,(function(e){l[e]=e})),s=l}return a.each(s,(function(e,t){var i=document.createElement("option");i.innerHTML=t,i.setAttribute("value",e),o.__select.appendChild(i)})),n.updateDisplay(),C.bind(n.__select,"change",(function(){var e=this.options[this.selectedIndex].value;o.setValue(e)})),n.domElement.appendChild(n.__select),n}return m(t,e),g(t,[{key:"setValue",value:function(e){var i=p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),i}},{key:"updateDisplay",value:function(){return C.isActive(this.__select)?this:(this.__select.value=this.getValue(),p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this))}}]),t}(w),R=function(e){function t(e,i){_(this,t);var r=v(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i)),n=r;function s(){n.setValue(n.__input.value)}return r.__input=document.createElement("input"),r.__input.setAttribute("type","text"),C.bind(r.__input,"keyup",s),C.bind(r.__input,"change",s),C.bind(r.__input,"blur",(function(){n.__onFinishChange&&n.__onFinishChange.call(n,n.getValue())})),C.bind(r.__input,"keydown",(function(e){13===e.keyCode&&this.blur()})),r.updateDisplay(),r.domElement.appendChild(r.__input),r}return m(t,e),g(t,[{key:"updateDisplay",value:function(){return C.isActive(this.__input)||(this.__input.value=this.getValue()),p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(w);function F(e){var t=e.toString();return t.indexOf(".")>-1?t.length-t.indexOf(".")-1:0}var M=function(e){function t(e,i,r){_(this,t);var n=v(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i)),s=r||{};return n.__min=s.min,n.__max=s.max,n.__step=s.step,a.isUndefined(n.__step)?0===n.initialValue?n.__impliedStep=1:n.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(n.initialValue))/Math.LN10))/10:n.__impliedStep=n.__step,n.__precision=F(n.__impliedStep),n}return m(t,e),g(t,[{key:"setValue",value:function(e){var i=e;return void 0!==this.__min&&i<this.__min?i=this.__min:void 0!==this.__max&&i>this.__max&&(i=this.__max),void 0!==this.__step&&i%this.__step!=0&&(i=Math.round(i/this.__step)*this.__step),p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,i)}},{key:"min",value:function(e){return this.__min=e,this}},{key:"max",value:function(e){return this.__max=e,this}},{key:"step",value:function(e){return this.__step=e,this.__impliedStep=e,this.__precision=F(e),this}}]),t}(w);var T=function(e){function t(e,i,r){_(this,t);var n=v(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,r));n.__truncationSuspended=!1;var s=n,o=void 0;function l(){s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}function h(e){var t=o-e.clientY;s.setValue(s.getValue()+t*s.__impliedStep),o=e.clientY}function c(){C.unbind(window,"mousemove",h),C.unbind(window,"mouseup",c),l()}return n.__input=document.createElement("input"),n.__input.setAttribute("type","text"),C.bind(n.__input,"change",(function(){var e=parseFloat(s.__input.value);a.isNaN(e)||s.setValue(e)})),C.bind(n.__input,"blur",(function(){l()})),C.bind(n.__input,"mousedown",(function(e){C.bind(window,"mousemove",h),C.bind(window,"mouseup",c),o=e.clientY})),C.bind(n.__input,"keydown",(function(e){13===e.keyCode&&(s.__truncationSuspended=!0,this.blur(),s.__truncationSuspended=!1,l())})),n.updateDisplay(),n.domElement.appendChild(n.__input),n}return m(t,e),g(t,[{key:"updateDisplay",value:function(){var e,i,r;return this.__input.value=this.__truncationSuspended?this.getValue():(e=this.getValue(),i=this.__precision,r=Math.pow(10,i),Math.round(e*r)/r),p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(M);function P(e,t,i,r,n){return r+(e-t)/(i-t)*(n-r)}var L=function(e){function t(e,i,r,n,s){_(this,t);var a=v(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,{min:r,max:n,step:s})),o=a;function l(e){e.preventDefault();var t=o.__background.getBoundingClientRect();return o.setValue(P(e.clientX,t.left,t.right,o.__min,o.__max)),!1}function h(){C.unbind(window,"mousemove",l),C.unbind(window,"mouseup",h),o.__onFinishChange&&o.__onFinishChange.call(o,o.getValue())}function c(e){var t=e.touches[0].clientX,i=o.__background.getBoundingClientRect();o.setValue(P(t,i.left,i.right,o.__min,o.__max))}function d(){C.unbind(window,"touchmove",c),C.unbind(window,"touchend",d),o.__onFinishChange&&o.__onFinishChange.call(o,o.getValue())}return a.__background=document.createElement("div"),a.__foreground=document.createElement("div"),C.bind(a.__background,"mousedown",(function(e){document.activeElement.blur(),C.bind(window,"mousemove",l),C.bind(window,"mouseup",h),l(e)})),C.bind(a.__background,"touchstart",(function(e){if(1!==e.touches.length)return;C.bind(window,"touchmove",c),C.bind(window,"touchend",d),c(e)})),C.addClass(a.__background,"slider"),C.addClass(a.__foreground,"slider-fg"),a.updateDisplay(),a.__background.appendChild(a.__foreground),a.domElement.appendChild(a.__background),a}return m(t,e),g(t,[{key:"updateDisplay",value:function(){var e=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*e+"%",p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(M),U=function(e){function t(e,i,r){_(this,t);var n=v(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i)),s=n;return n.__button=document.createElement("div"),n.__button.innerHTML=void 0===r?"Fire":r,C.bind(n.__button,"click",(function(e){return e.preventDefault(),s.fire(),!1})),C.addClass(n.__button,"button"),n.domElement.appendChild(n.__button),n}return m(t,e),g(t,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),t}(w),N=function(e){function t(e,i){_(this,t);var r=v(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));r.__color=new y(r.getValue()),r.__temp=new y(0);var n=r;r.domElement=document.createElement("div"),C.makeSelectable(r.domElement,!1),r.__selector=document.createElement("div"),r.__selector.className="selector",r.__saturation_field=document.createElement("div"),r.__saturation_field.className="saturation-field",r.__field_knob=document.createElement("div"),r.__field_knob.className="field-knob",r.__field_knob_border="2px solid ",r.__hue_knob=document.createElement("div"),r.__hue_knob.className="hue-knob",r.__hue_field=document.createElement("div"),r.__hue_field.className="hue-field",r.__input=document.createElement("input"),r.__input.type="text",r.__input_textShadow="0 1px 1px ",C.bind(r.__input,"keydown",(function(e){13===e.keyCode&&f.call(this)})),C.bind(r.__input,"blur",f),C.bind(r.__selector,"mousedown",(function(){C.addClass(this,"drag").bind(window,"mouseup",(function(){C.removeClass(n.__selector,"drag")}))})),C.bind(r.__selector,"touchstart",(function(){C.addClass(this,"drag").bind(window,"touchend",(function(){C.removeClass(n.__selector,"drag")}))}));var s,o=document.createElement("div");function l(e){p(e),C.bind(window,"mousemove",p),C.bind(window,"touchmove",p),C.bind(window,"mouseup",d),C.bind(window,"touchend",d)}function h(e){m(e),C.bind(window,"mousemove",m),C.bind(window,"touchmove",m),C.bind(window,"mouseup",u),C.bind(window,"touchend",u)}function d(){C.unbind(window,"mousemove",p),C.unbind(window,"touchmove",p),C.unbind(window,"mouseup",d),C.unbind(window,"touchend",d),g()}function u(){C.unbind(window,"mousemove",m),C.unbind(window,"touchmove",m),C.unbind(window,"mouseup",u),C.unbind(window,"touchend",u),g()}function f(){var e=c(this.value);!1!==e?(n.__color.__state=e,n.setValue(n.__color.toOriginal())):this.value=n.__color.toString()}function g(){n.__onFinishChange&&n.__onFinishChange.call(n,n.__color.toOriginal())}function p(e){-1===e.type.indexOf("touch")&&e.preventDefault();var t=n.__saturation_field.getBoundingClientRect(),i=e.touches&&e.touches[0]||e,r=i.clientX,s=i.clientY,a=(r-t.left)/(t.right-t.left),o=1-(s-t.top)/(t.bottom-t.top);return o>1?o=1:o<0&&(o=0),a>1?a=1:a<0&&(a=0),n.__color.v=o,n.__color.s=a,n.setValue(n.__color.toOriginal()),!1}function m(e){-1===e.type.indexOf("touch")&&e.preventDefault();var t=n.__hue_field.getBoundingClientRect(),i=1-((e.touches&&e.touches[0]||e).clientY-t.top)/(t.bottom-t.top);return i>1?i=1:i<0&&(i=0),n.__color.h=360*i,n.setValue(n.__color.toOriginal()),!1}return a.extend(r.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),a.extend(r.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:r.__field_knob_border+(r.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),a.extend(r.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),a.extend(r.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),a.extend(o.style,{width:"100%",height:"100%",background:"none"}),V(o,"top","rgba(0,0,0,0)","#000"),a.extend(r.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),(s=r.__hue_field).style.background="",s.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",s.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",s.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",s.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",s.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",a.extend(r.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:r.__input_textShadow+"rgba(0,0,0,0.7)"}),C.bind(r.__saturation_field,"mousedown",l),C.bind(r.__saturation_field,"touchstart",l),C.bind(r.__field_knob,"mousedown",l),C.bind(r.__field_knob,"touchstart",l),C.bind(r.__hue_field,"mousedown",h),C.bind(r.__hue_field,"touchstart",h),r.__saturation_field.appendChild(o),r.__selector.appendChild(r.__field_knob),r.__selector.appendChild(r.__saturation_field),r.__selector.appendChild(r.__hue_field),r.__hue_field.appendChild(r.__hue_knob),r.domElement.appendChild(r.__input),r.domElement.appendChild(r.__selector),r.updateDisplay(),r}return m(t,e),g(t,[{key:"updateDisplay",value:function(){var e=c(this.getValue());if(!1!==e){var t=!1;a.each(y.COMPONENTS,(function(i){if(!a.isUndefined(e[i])&&!a.isUndefined(this.__color.__state[i])&&e[i]!==this.__color.__state[i])return t=!0,{}}),this),t&&a.extend(this.__color.__state,e)}a.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var i=this.__color.v<.5||this.__color.s>.5?255:0,r=255-i;a.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+i+","+i+","+i+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,V(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),a.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+i+","+i+","+i+")",textShadow:this.__input_textShadow+"rgba("+r+","+r+","+r+",.7)"})}}]),t}(w),j=["-moz-","-o-","-webkit-","-ms-",""];function V(e,t,i,r){e.style.background="",a.each(j,(function(n){e.style.cssText+="background: "+n+"linear-gradient("+t+", "+i+" 0%, "+r+" 100%); "}))}var B=function(e,t){var i=t||document,r=document.createElement("style");r.type="text/css",r.innerHTML=e;var n=i.getElementsByTagName("head")[0];try{n.appendChild(r)}catch(e){}},I='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>',G=function(e,t){var i=e[t];return a.isArray(arguments[2])||a.isObject(arguments[2])?new O(e,t,arguments[2]):a.isNumber(i)?a.isNumber(arguments[2])&&a.isNumber(arguments[3])?a.isNumber(arguments[4])?new L(e,t,arguments[2],arguments[3],arguments[4]):new L(e,t,arguments[2],arguments[3]):a.isNumber(arguments[4])?new T(e,t,{min:arguments[2],max:arguments[3],step:arguments[4]}):new T(e,t,{min:arguments[2],max:arguments[3]}):a.isString(i)?new R(e,t):a.isFunction(i)?new U(e,t,""):a.isBoolean(i)?new S(e,t):null};var z=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)},D=function(){function e(){_(this,e),this.backgroundElement=document.createElement("div"),a.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),C.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),a.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var t=this;C.bind(this.backgroundElement,"click",(function(){t.hide()}))}return g(e,[{key:"show",value:function(){var e=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),a.defer((function(){e.backgroundElement.style.opacity=1,e.domElement.style.opacity=1,e.domElement.style.webkitTransform="scale(1)"}))}},{key:"hide",value:function(){var e=this,t=function t(){e.domElement.style.display="none",e.backgroundElement.style.display="none",C.unbind(e.domElement,"webkitTransitionEnd",t),C.unbind(e.domElement,"transitionend",t),C.unbind(e.domElement,"oTransitionEnd",t)};C.bind(this.domElement,"webkitTransitionEnd",t),C.bind(this.domElement,"transitionend",t),C.bind(this.domElement,"oTransitionEnd",t),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-C.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-C.getHeight(this.domElement)/2+"px"}}]),e}();B(function(e){if(e&&"undefined"!=typeof window){var t=document.createElement("style");return t.setAttribute("type","text/css"),t.innerHTML=e,document.head.appendChild(t),e}}(".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n"));var H=function(){try{return!!window.localStorage}catch(e){return!1}}(),W=void 0,X=!0,q=void 0,Y=!1,K=[],J=function e(t){var i=this,r=t||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),C.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],r=a.defaults(r,{closeOnTop:!1,autoPlace:!0,width:e.DEFAULT_WIDTH}),r=a.defaults(r,{resizable:r.autoPlace,hideable:r.autoPlace}),a.isUndefined(r.load)?r.load={preset:"Default"}:r.preset&&(r.load.preset=r.preset),a.isUndefined(r.parent)&&r.hideable&&K.push(this),r.resizable=a.isUndefined(r.parent)&&r.resizable,r.autoPlace&&a.isUndefined(r.scrollable)&&(r.scrollable=!0);var n,s=H&&"true"===localStorage.getItem(ie(this,"isLocal")),o=void 0,l=void 0;if(Object.defineProperties(this,{parent:{get:function(){return r.parent}},scrollable:{get:function(){return r.scrollable}},autoPlace:{get:function(){return r.autoPlace}},closeOnTop:{get:function(){return r.closeOnTop}},preset:{get:function(){return i.parent?i.getRoot().preset:r.load.preset},set:function(e){i.parent?i.getRoot().preset=e:r.load.preset=e,function(e){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].value===e.preset&&(e.__preset_select.selectedIndex=t)}(this),i.revert()}},width:{get:function(){return r.width},set:function(e){r.width=e,oe(i,e)}},name:{get:function(){return r.name},set:function(e){r.name=e,l&&(l.innerHTML=r.name)}},closed:{get:function(){return r.closed},set:function(t){r.closed=t,r.closed?C.addClass(i.__ul,e.CLASS_CLOSED):C.removeClass(i.__ul,e.CLASS_CLOSED),this.onResize(),i.__closeButton&&(i.__closeButton.innerHTML=t?e.TEXT_OPEN:e.TEXT_CLOSED)}},load:{get:function(){return r.load}},useLocalStorage:{get:function(){return s},set:function(e){H&&(s=e,e?C.bind(window,"unload",o):C.unbind(window,"unload",o),localStorage.setItem(ie(i,"isLocal"),e))}}}),a.isUndefined(r.parent)){if(this.closed=r.closed||!1,C.addClass(this.domElement,e.CLASS_MAIN),C.makeSelectable(this.domElement,!1),H&&s){i.useLocalStorage=!0;var h=localStorage.getItem(ie(this,"gui"));h&&(r.load=JSON.parse(h))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=e.TEXT_CLOSED,C.addClass(this.__closeButton,e.CLASS_CLOSE_BUTTON),r.closeOnTop?(C.addClass(this.__closeButton,e.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(C.addClass(this.__closeButton,e.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),C.bind(this.__closeButton,"click",(function(){i.closed=!i.closed}))}else{void 0===r.closed&&(r.closed=!0);var c=document.createTextNode(r.name);C.addClass(c,"controller-name"),l=Q(i,c);C.addClass(this.__ul,e.CLASS_CLOSED),C.addClass(l,"title"),C.bind(l,"click",(function(e){return e.preventDefault(),i.closed=!i.closed,!1})),r.closed||(this.closed=!1)}r.autoPlace&&(a.isUndefined(r.parent)&&(X&&(q=document.createElement("div"),C.addClass(q,"dg"),C.addClass(q,e.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(q),X=!1),q.appendChild(this.domElement),C.addClass(this.domElement,e.CLASS_AUTO_PLACE)),this.parent||oe(i,r.width)),this.__resizeHandler=function(){i.onResizeDebounced()},C.bind(window,"resize",this.__resizeHandler),C.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),C.bind(this.__ul,"transitionend",this.__resizeHandler),C.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),r.resizable&&ae(this),o=function(){H&&"true"===localStorage.getItem(ie(i,"isLocal"))&&localStorage.setItem(ie(i,"gui"),JSON.stringify(i.getSaveObject()))},this.saveToLocalStorageIfPossible=o,r.parent||((n=i.getRoot()).width+=1,a.defer((function(){n.width-=1})))};function Q(e,t,i){var r=document.createElement("li");return t&&r.appendChild(t),i?e.__ul.insertBefore(r,i):e.__ul.appendChild(r),e.onResize(),r}function $(e){C.unbind(window,"resize",e.__resizeHandler),e.saveToLocalStorageIfPossible&&C.unbind(window,"unload",e.saveToLocalStorageIfPossible)}function Z(e,t){var i=e.__preset_select[e.__preset_select.selectedIndex];i.innerHTML=t?i.value+"*":i.value}function ee(e,t){var i=e.getRoot(),r=i.__rememberedObjects.indexOf(t.object);if(-1!==r){var n=i.__rememberedObjectIndecesToControllers[r];if(void 0===n&&(n={},i.__rememberedObjectIndecesToControllers[r]=n),n[t.property]=t,i.load&&i.load.remembered){var s=i.load.remembered,a=void 0;if(s[e.preset])a=s[e.preset];else{if(!s.Default)return;a=s.Default}if(a[r]&&void 0!==a[r][t.property]){var o=a[r][t.property];t.initialValue=o,t.setValue(o)}}}}function te(e,t,i,r){if(void 0===t[i])throw new Error('Object "'+t+'" has no property "'+i+'"');var n=void 0;if(r.color)n=new N(t,i);else{var s=[t,i].concat(r.factoryArgs);n=G.apply(e,s)}r.before instanceof w&&(r.before=r.before.__li),ee(e,n),C.addClass(n.domElement,"c");var o=document.createElement("span");C.addClass(o,"property-name"),o.innerHTML=n.property;var l=document.createElement("div");l.appendChild(o),l.appendChild(n.domElement);var h=Q(e,l,r.before);return C.addClass(h,J.CLASS_CONTROLLER_ROW),n instanceof N?C.addClass(h,"color"):C.addClass(h,f(n.getValue())),function(e,t,i){if(i.__li=t,i.__gui=e,a.extend(i,{options:function(t){if(arguments.length>1){var r=i.__li.nextElementSibling;return i.remove(),te(e,i.object,i.property,{before:r,factoryArgs:[a.toArray(arguments)]})}if(a.isArray(t)||a.isObject(t)){var n=i.__li.nextElementSibling;return i.remove(),te(e,i.object,i.property,{before:n,factoryArgs:[t]})}},name:function(e){return i.__li.firstElementChild.firstElementChild.innerHTML=e,i},listen:function(){return i.__gui.listen(i),i},remove:function(){return i.__gui.remove(i),i}}),i instanceof L){var r=new T(i.object,i.property,{min:i.__min,max:i.__max,step:i.__step});a.each(["updateDisplay","onChange","onFinishChange","step","min","max"],(function(e){var t=i[e],n=r[e];i[e]=r[e]=function(){var e=Array.prototype.slice.call(arguments);return n.apply(r,e),t.apply(i,e)}})),C.addClass(t,"has-slider"),i.domElement.insertBefore(r.domElement,i.domElement.firstElementChild)}else if(i instanceof T){var n=function(t){if(a.isNumber(i.__min)&&a.isNumber(i.__max)){var r=i.__li.firstElementChild.firstElementChild.innerHTML,n=i.__gui.__listening.indexOf(i)>-1;i.remove();var s=te(e,i.object,i.property,{before:i.__li.nextElementSibling,factoryArgs:[i.__min,i.__max,i.__step]});return s.name(r),n&&s.listen(),s}return t};i.min=a.compose(n,i.min),i.max=a.compose(n,i.max)}else i instanceof S?(C.bind(t,"click",(function(){C.fakeEvent(i.__checkbox,"click")})),C.bind(i.__checkbox,"click",(function(e){e.stopPropagation()}))):i instanceof U?(C.bind(t,"click",(function(){C.fakeEvent(i.__button,"click")})),C.bind(t,"mouseover",(function(){C.addClass(i.__button,"hover")})),C.bind(t,"mouseout",(function(){C.removeClass(i.__button,"hover")}))):i instanceof N&&(C.addClass(t,"color"),i.updateDisplay=a.compose((function(e){return t.style.borderLeftColor=i.__color.toString(),e}),i.updateDisplay),i.updateDisplay());i.setValue=a.compose((function(t){return e.getRoot().__preset_select&&i.isModified()&&Z(e.getRoot(),!0),t}),i.setValue)}(e,h,n),e.__controllers.push(n),n}function ie(e,t){return document.location.href+"."+t}function re(e,t,i){var r=document.createElement("option");r.innerHTML=t,r.value=t,e.__preset_select.appendChild(r),i&&(e.__preset_select.selectedIndex=e.__preset_select.length-1)}function ne(e,t){t.style.display=e.useLocalStorage?"block":"none"}function se(e){var t=e.__save_row=document.createElement("li");C.addClass(e.domElement,"has-save"),e.__ul.insertBefore(t,e.__ul.firstChild),C.addClass(t,"save-row");var i=document.createElement("span");i.innerHTML="&nbsp;",C.addClass(i,"button gears");var r=document.createElement("span");r.innerHTML="Save",C.addClass(r,"button"),C.addClass(r,"save");var n=document.createElement("span");n.innerHTML="New",C.addClass(n,"button"),C.addClass(n,"save-as");var s=document.createElement("span");s.innerHTML="Revert",C.addClass(s,"button"),C.addClass(s,"revert");var o=e.__preset_select=document.createElement("select");if(e.load&&e.load.remembered?a.each(e.load.remembered,(function(t,i){re(e,i,i===e.preset)})):re(e,"Default",!1),C.bind(o,"change",(function(){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].innerHTML=e.__preset_select[t].value;e.preset=this.value})),t.appendChild(o),t.appendChild(i),t.appendChild(r),t.appendChild(n),t.appendChild(s),H){var l=document.getElementById("dg-local-explain"),h=document.getElementById("dg-local-storage");document.getElementById("dg-save-locally").style.display="block","true"===localStorage.getItem(ie(0,"isLocal"))&&h.setAttribute("checked","checked"),ne(e,l),C.bind(h,"change",(function(){e.useLocalStorage=!e.useLocalStorage,ne(e,l)}))}var c=document.getElementById("dg-new-constructor");C.bind(c,"keydown",(function(e){!e.metaKey||67!==e.which&&67!==e.keyCode||W.hide()})),C.bind(i,"click",(function(){c.innerHTML=JSON.stringify(e.getSaveObject(),void 0,2),W.show(),c.focus(),c.select()})),C.bind(r,"click",(function(){e.save()})),C.bind(n,"click",(function(){var t=prompt("Enter a new preset name.");t&&e.saveAs(t)})),C.bind(s,"click",(function(){e.revert()}))}function ae(e){var t=void 0;function i(i){return i.preventDefault(),e.width+=t-i.clientX,e.onResize(),t=i.clientX,!1}function r(){C.removeClass(e.__closeButton,J.CLASS_DRAG),C.unbind(window,"mousemove",i),C.unbind(window,"mouseup",r)}function n(n){return n.preventDefault(),t=n.clientX,C.addClass(e.__closeButton,J.CLASS_DRAG),C.bind(window,"mousemove",i),C.bind(window,"mouseup",r),!1}e.__resize_handle=document.createElement("div"),a.extend(e.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),C.bind(e.__resize_handle,"mousedown",n),C.bind(e.__closeButton,"mousedown",n),e.domElement.insertBefore(e.__resize_handle,e.domElement.firstElementChild)}function oe(e,t){e.domElement.style.width=t+"px",e.__save_row&&e.autoPlace&&(e.__save_row.style.width=t+"px"),e.__closeButton&&(e.__closeButton.style.width=t+"px")}function le(e,t){var i={};return a.each(e.__rememberedObjects,(function(r,n){var s={},o=e.__rememberedObjectIndecesToControllers[n];a.each(o,(function(e,i){s[i]=t?e.initialValue:e.getValue()})),i[n]=s})),i}J.toggleHide=function(){Y=!Y,a.each(K,(function(e){e.domElement.style.display=Y?"none":""}))},J.CLASS_AUTO_PLACE="a",J.CLASS_AUTO_PLACE_CONTAINER="ac",J.CLASS_MAIN="main",J.CLASS_CONTROLLER_ROW="cr",J.CLASS_TOO_TALL="taller-than-window",J.CLASS_CLOSED="closed",J.CLASS_CLOSE_BUTTON="close-button",J.CLASS_CLOSE_TOP="close-top",J.CLASS_CLOSE_BOTTOM="close-bottom",J.CLASS_DRAG="drag",J.DEFAULT_WIDTH=245,J.TEXT_CLOSED="Close Controls",J.TEXT_OPEN="Open Controls",J._keydownHandler=function(e){"text"===document.activeElement.type||72!==e.which&&72!==e.keyCode||J.toggleHide()},C.bind(window,"keydown",J._keydownHandler,!1),a.extend(J.prototype,{add:function(e,t){return te(this,e,t,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(e,t){return te(this,e,t,{color:!0})},remove:function(e){this.__ul.removeChild(e.__li),this.__controllers.splice(this.__controllers.indexOf(e),1);var t=this;a.defer((function(){t.onResize()}))},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&q.removeChild(this.domElement);var e=this;a.each(this.__folders,(function(t){e.removeFolder(t)})),C.unbind(window,"keydown",J._keydownHandler,!1),$(this)},addFolder:function(e){if(void 0!==this.__folders[e])throw new Error('You already have a folder in this GUI by the name "'+e+'"');var t={name:e,parent:this};t.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[e]&&(t.closed=this.load.folders[e].closed,t.load=this.load.folders[e]);var i=new J(t);this.__folders[e]=i;var r=Q(this,i.domElement);return C.addClass(r,"folder"),i},removeFolder:function(e){this.__ul.removeChild(e.domElement.parentElement),delete this.__folders[e.name],this.load&&this.load.folders&&this.load.folders[e.name]&&delete this.load.folders[e.name],$(e);var t=this;a.each(e.__folders,(function(t){e.removeFolder(t)})),a.defer((function(){t.onResize()}))},open:function(){this.closed=!1},close:function(){this.closed=!0},hide:function(){this.domElement.style.display="none"},show:function(){this.domElement.style.display=""},onResize:function(){var e=this.getRoot();if(e.scrollable){var t=C.getOffset(e.__ul).top,i=0;a.each(e.__ul.childNodes,(function(t){e.autoPlace&&t===e.__save_row||(i+=C.getHeight(t))})),window.innerHeight-t-20<i?(C.addClass(e.domElement,J.CLASS_TOO_TALL),e.__ul.style.height=window.innerHeight-t-20+"px"):(C.removeClass(e.domElement,J.CLASS_TOO_TALL),e.__ul.style.height="auto")}e.__resize_handle&&a.defer((function(){e.__resize_handle.style.height=e.__ul.offsetHeight+"px"})),e.__closeButton&&(e.__closeButton.style.width=e.width+"px")},onResizeDebounced:a.debounce((function(){this.onResize()}),50),remember:function(){if(a.isUndefined(W)&&((W=new D).domElement.innerHTML=I),this.parent)throw new Error("You can only call remember on a top level GUI.");var e=this;a.each(Array.prototype.slice.call(arguments),(function(t){0===e.__rememberedObjects.length&&se(e),-1===e.__rememberedObjects.indexOf(t)&&e.__rememberedObjects.push(t)})),this.autoPlace&&oe(this,this.width)},getRoot:function(){for(var e=this;e.parent;)e=e.parent;return e},getSaveObject:function(){var e=this.load;return e.closed=this.closed,this.__rememberedObjects.length>0&&(e.preset=this.preset,e.remembered||(e.remembered={}),e.remembered[this.preset]=le(this)),e.folders={},a.each(this.__folders,(function(t,i){e.folders[i]=t.getSaveObject()})),e},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=le(this),Z(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(e){this.load.remembered||(this.load.remembered={},this.load.remembered.Default=le(this,!0)),this.load.remembered[e]=le(this),this.preset=e,re(this,e,!0),this.saveToLocalStorageIfPossible()},revert:function(e){a.each(this.__controllers,(function(t){this.getRoot().load.remembered?ee(e||this.getRoot(),t):t.setValue(t.initialValue),t.__onFinishChange&&t.__onFinishChange.call(t,t.getValue())}),this),a.each(this.__folders,(function(e){e.revert(e)})),e||Z(this.getRoot(),!1)},listen:function(e){var t=0===this.__listening.length;this.__listening.push(e),t&&function e(t){0!==t.length&&z.call(window,(function(){e(t)}));a.each(t,(function(e){e.updateDisplay()}))}(this.__listening)},updateDisplay:function(){a.each(this.__controllers,(function(e){e.updateDisplay()})),a.each(this.__folders,(function(e){e.updateDisplay()}))}});var he={color:{Color:y,math:u,interpret:c},controllers:{Controller:w,BooleanController:S,OptionController:O,StringController:R,NumberController:M,NumberControllerBox:T,NumberControllerSlider:L,FunctionController:U,ColorController:N},dom:{dom:C},gui:{GUI:J},GUI:J};
/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */
function ce(e,t,i,r){var n,s=arguments.length,a=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var o=e.length-1;o>=0;o--)(n=e[o])&&(a=(s<3?n(a):s>3?n(t,i,a):n(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a}var de=t((function(e){var t=/\n/,i=/\s/;function r(e,t,i,r){var n=e.indexOf(t,i);return-1===n||n>r?r:n}function n(e){return i.test(e)}function s(e,t,i,r){return{start:t,end:t+Math.min(r,i-t)}}e.exports=function(t,i){return e.exports.lines(t,i).map((function(e){return t.substring(e.start,e.end)})).join("\n")},e.exports.lines=function(e,i){if(0===(i=i||{}).width&&"nowrap"!==i.mode)return[];e=e||"";var a="number"==typeof i.width?i.width:Number.MAX_VALUE,o=Math.max(0,i.start||0),l="number"==typeof i.end?i.end:e.length,h=i.mode,c=i.measure||s;return"pre"===h?function(e,i,r,n,s){for(var a=[],o=r,l=r;l<n&&l<i.length;l++){var h=i.charAt(l),c=t.test(h);if(c||l===n-1){var d=e(i,o,c?l:l+1,s);a.push(d),o=l+1}}return a}(c,e,o,l,a):function(e,t,i,s,a,o){var l=[],h=a;"nowrap"===o&&(h=Number.MAX_VALUE);for(;i<s&&i<t.length;){for(var c=r(t,"\n",i,s);i<c&&n(t.charAt(i));)i++;var d=e(t,i,c,h),u=i+(d.end-d.start),f=u+"\n".length;if(u<c){for(;u>i&&!n(t.charAt(u));)u--;if(u===i)f>i+"\n".length&&f--,u=f;else for(f=u;u>i&&n(t.charAt(u-"\n".length));)u--}if(u>=i){var _=e(t,i,u,h);l.push(_)}i=f}return l}(c,e,o,l,a,h)}}));de.lines;const ue=e=>(t,i)=>{const r="_"+i,n=`_flag${e[0].toUpperCase()}${e.slice(1)}`;Object.defineProperty(t,i,{get(){return this[r]},set(e){this[r]=e,this[n]=!0}})};class fe extends i.Group{constructor(e,t=0,i=0,{width:r=1/0,measure:n="font",mode:s="normal",family:a="sans-serif",size:o=13,weight:l=500,style:h="normal",leading:c=1.2,absoluteLeading:d=!1,alignment:u="middle",fill:f="#000",stroke:_="transparent",linewidth:g=1,decoration:p="none",baseline:m="middle",opacity:v=1,visible:y=!0}={}){super(),this._flagWrapping=!0,this._flagStyle=!0,this._measureLength=(e,t,i,r)=>({start:t,end:t+Math.min(r,i-t)}),this._measureFont=(e,t,i,r)=>{for(;this.context.measureText(e.slice(t,i)).width>r;)i--;return{start:t,end:i}},this.translation.set(t,i),this.width=r,this.measure=n,this.mode=s,this.value=e,this.family=a,this.size=o,this.leading=c,this.absoluteLeading=d,this.alignment=u,this.fill=f,this.stroke=_,this.linewidth=g,this.weight=l,this.style=h,this.decoration=p,this.baseline=m,this.opacity=v,this.visible=y}get computedLeading(){return this.absoluteLeading?this.leading:this.size*this.leading}get context(){const e=("function"==typeof OffscreenCanvas?new OffscreenCanvas(1,1):document.createElement("canvas")).getContext("2d");return Object.defineProperty(fe.prototype,"context",{value:e,writable:!1,configurable:!1}),e}get _measureMonospace(){const e=this.context.measureText("M").width;return(t,i,r,n)=>({start:i,end:i+Math.min(r-i,~~(n/e),~~((r-i)*e))})}_prepareMeasureContext(){this.context.font=`${this.style} ${this.weight} ${this.size}px ${this.family}`}_update(e=!1){if(this._flagWrapping){let e;"length"===this.measure?e=this._measureLength:(this._prepareMeasureContext(),e="monospace"===this.measure?this._measureMonospace:this._measureFont);const t=this.children,r=de.lines(this.value,{measure:e,width:this.width,mode:this.mode}).map(({start:e,end:t})=>this.value.slice(e,t));for(;t.length>r.length;)this.remove(t[0]);for(t.forEach((e,t)=>{e.value=r[t].trim()});t.length<r.length;)this.add(new i.Text(r[t.length].trim(),0,0));this._flagStyle=!0}if(this._flagStyle){const{family:e,size:t,computedLeading:i,alignment:r,fill:n,stroke:s,linewidth:a,style:o,weight:l,decoration:h,baseline:c,opacity:d,visible:u}=this;let f=0;switch(r){case"end":f=this.width;break;case"center":f=this.width/2}this.children.forEach((_,g)=>{_.family=e,_.size=t,_.leading=i,_.alignment=r,_.fill=n,_.stroke=s,_.linewidth=a,_.style=o,_.weight=l,_.decoration=h,_.baseline=c,_.opacity=d,_.visible=u,_.translation.set(f,i*g)})}return i.Group.prototype._update.call(this,e),this}flagReset(){return this._flagWrapping=this._flagStyle=!1,i.Group.prototype.flagReset.call(this),this}}ce([ue("wrapping")],fe.prototype,"width",void 0),ce([ue("wrapping")],fe.prototype,"measure",void 0),ce([ue("wrapping")],fe.prototype,"mode",void 0),ce([ue("wrapping")],fe.prototype,"value",void 0),ce([ue("wrapping")],fe.prototype,"family",void 0),ce([ue("wrapping")],fe.prototype,"size",void 0),ce([ue("wrapping")],fe.prototype,"weight",void 0),ce([ue("style")],fe.prototype,"style",void 0),ce([ue("style")],fe.prototype,"leading",void 0),ce([ue("style")],fe.prototype,"absoluteLeading",void 0),ce([ue("style")],fe.prototype,"alignment",void 0),ce([ue("style")],fe.prototype,"fill",void 0),ce([ue("style")],fe.prototype,"stroke",void 0),ce([ue("style")],fe.prototype,"linewidth",void 0),ce([ue("style")],fe.prototype,"decoration",void 0),ce([ue("style")],fe.prototype,"baseline",void 0),ce([ue("style")],fe.prototype,"opacity",void 0),ce([ue("style")],fe.prototype,"visible",void 0);const _e=new i({type:i.Types.canvas,autostart:!0,fullscreen:!0}).appendTo(document.body),ge=new i.Group;ge.translation.set(20,20);const pe=new fe("",0,0,{size:36,weight:900,alignment:"start",baseline:"middle",width:500,stroke:"rgba(0, 0, 0, 0)"}),me=new i.Path([new i.Anchor(0,0,0,0,0,0,i.Commands.line),new i.Anchor(0,0,0,0,0,0,i.Commands.line),new i.Anchor(0,0,0,0,0,0,i.Commands.line),new i.Anchor(0,0,0,0,0,0,i.Commands.line)],!0,!1,!1);me.stroke="rgba(255, 0, 0, .2)",me.linewidth=1,_e.bind("update",()=>{const e=pe.computedLeading,t=pe.width,i=pe.children.length*e;me.vertices[1].x=me.vertices[2].x=t,me.vertices[2].y=me.vertices[3].y=i,pe.translation.y=e/2}),ge.add(me,pe),_e.add(ge);const ve=new he.GUI;ve.add(pe,"width",0,800,1),ve.add(pe,"mode",["normal","pre","nowrap"]),ve.add(pe,"measure",["font","monospace","length"]).onChange(()=>{me.visible="length"!==pe.measure}),ve.add(pe,"family"),ve.add(pe,"size",1,50,.1),ve.add(pe,"leading",0,5,.01),ve.add(pe,"absoluteLeading"),ve.add(pe,"alignment",["start","end","center"]),ve.addColor(pe,"fill"),ve.addColor(pe,"stroke"),ve.add(pe,"linewidth",0,10),ve.add(pe,"style",["normal","italic"]),ve.add(pe,"weight",100,900,100),ve.add(pe,"decoration",["none","underline","strikethrough"]),ve.add(pe,"baseline",["middle","baseline","top"]),ve.add(pe,"opacity",0,1,.001),ve.add(pe,"visible");const ye="\n  Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.\n\n  Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint.\n".trim();let be=setInterval(()=>{pe.value=ye.slice(0,pe.value.length+1),pe.value.length===ye.length&&clearInterval(be)},40)}();
//# sourceMappingURL=index.js.map
